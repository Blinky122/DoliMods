= USER GUIDE =
:subtitle: Guide for end users



*Guide d'utilisation*

*Dolibarr ERP/CRM*

*8.0*












*Introduction*

La douzième édition de ce livre paraît, alors que la réputation de *Dolibarr* est déjà bien établie. Seize ans après les premières lignes de code réalisées par Rodolphe Quiédeville présent sur le stand de *Dolibarr* au salon Solutions Linux ( https://www.facebook.com/photo.php?fbid=704623766274752&set=pb.132555040148297.-2207520000.1403686530.&type=1&theater[voir] ), sous la conduite de Laurent Destailleur et avec l'aide de nombreux contributeurs ( https://github.com/Dolibarr/dolibarr/graphs/contributors[voir] ), l’ERP/CRM *Dolibarr* est devenu un incontournable dans le monde du logiciel Open Source.  +
*Dolibarr a *fait cette année son DevCamp de printemps à Nancy les 9,10 et 11 mars 2018. L'un des sujets traités fut l'utilisation du nouveau module ModuleBuilder pour créer vos propres modules. Vous pouvez utiliser le nouvel exemple de code trouvé dans les fichiers du répertoire modulebuilder pour inclure le fichier main.inc.php dans votre fichier de module externe => La seule façon de charger l'environnement de framework dolibarr est la façon dont votre Dolibarr et votre module sont installés (dans custom, en root, en utilisant des liens symboliques, à l'intérieur d'un hôte virtuel ou en utilisant un alias, quelle que soit la configuration de votre serveur web, ...). Une autre présentation fut faite sur le module de création de site web...le futur se présente bien ! +
 La version *8.0* de *Dolibarr* est un pas supplémentaire vers la maturité déjà reconnue de la solution ERP & CRM de gestion d'activité professionnelle ou associative la plus accessible aux petites et moyennes entreprises. Vous aurez remarqué que l’on est passé directement de la version *7.0* à la version *8.0* sans décliner toutes les décimales de la *7.0. *En effet à partir de la version *4.0* chaque nouvelle version saute d’unité en unité, si vous m’avez bien suivi...la nouvelle version est donc la version *8.0* ( J’en vois qui ne suivent pas au fond de la classe :). Les versions *8.0.1*, *8.0.2* etc… correspondront à des versions de corrections de bogues.** **Tous les modules fonctionnels ont été améliorés, avec en particulier l’ajout d’un module pour les déclinaisons de produits, ainsi que le module de logs inaltérables nécessaire pour l’attestation. L'association a créé une page dédiée pour fournir des renseignements sur la loi de finances, les modalités pour faire attester votre environnement et les travaux en cours, à voir https://wiki.dolibarr.org/index.php/Loi_article_88_finances_2016_et_Certification_NF525_ou_LNE[ici]. La génération de prélèvements SEPA est maintenant mature. Ajout des modules Ticket(fourni dans le core de Dolibarr par Jean François Ferry), WebDAV ainsi que du module Comptabilité Expert(Comptabilité double partie), grâce à https://philippe.scoffoni.net/campagne-financement-participative-dolibarr/[une campagne de financement participative]. Refonte du module Intervention avec alignement du code sur celui des autres modules : Gestion des triggers, événements automatiques, hooks, documents PDF visible dans la GED, création d’une propale depuis le module. Amélioration du module Notification qui offre maintenant la possibilité de faire des notifications fixes et de nombreuses autres fonctionnalités ajoutées.  +
Avec _transifex,_ le nouveau processus de traduction, aider à la traduction de *Dolibarr *n'a jamais été aussi simple. Aucune connaissance technique n'est requise, créez simplement un compte surhttps://www.transifex.com/[https://www.transifex.com/[ ]]https://www.transifex.com/[transifex.com] et traduisez depuis l'interface. +
L'association *Dolibarr* a de plus lié le système au service de traduction de Google, ce qui permet si besoin d'avoir des propositions automatiquement suggérées. Ceci réduit encore le temps de travail. +
Les traductions soumises sur _transifex_ seront fréquemment synchronisées avec les sources officielles du projet *Dolibarr*. +
Notez que pour le moment, ce nouveau système doit être utilisé pour tous les langages, sauf _en_US_ (la langue source), _fr_FR_, _es_ES_ et _es_CA_ (dont les contributeurs continuent d'utiliser majoritairement GitHub). De même pour les "langues alternatives" (par example _es_MX_, _es_PR_, _es_PY_) car ces dernières sont des variantes d'une autre langue (par exemple _es_ES_) qui ne nécessitent de ne maintenir que le delta des lignes qui diffèrent. Pour tout autre langage, merci de nous aider à traduire *Dolibarr* en vous inscrivant comme traducteur en ligne de *Dolibarr* sur la pagehttps://www.transifex.com/projects/p/dolibarr/[https://www.transifex.com/projects/p/dolibarr/[ ]]https://www.transifex.com/projects/p/dolibarr/[https://www.transifex.com/projects/p/dolibarr/]. En quelques minutes, vous pourrez compléter/corriger votre langue. De même, vous pouvez juste « approuver » les traductions qui sont déjà traduites mais non encore approuvées. +
Les fonctionnalités et règles de développement ont également été enrichies afin d'améliorer la qualité et l'efficacité de la plate-forme de plugins complémentaireshttp://www.dolistore.com/[http://www.dolistore.com/[ ]]http://www.dolistore.com/[DoliStore], ainsi la plupart des modules de cette plate-forme ont aussi été mis à jour en parallèle et sont disponibles en même temps que la sortie de *Dolibarr*. +
Notez que depuis la version *3.4.0* *Dolibarr* est diffusé sous licence *GPLv3+*.

*Objectifs et contenu de ce livre* +
L'auteur Philippe GRAND (_aka _http://www.dolibarr.fr/forum/profil/635-grandoc[_grandoc]_) y participant lui même s'est largement inspiré duhttp://wiki.dolibarr.org/index.php/Main_Page[http://wiki.dolibarr.org/index.php/Main_Page[ ]]http://wiki.dolibarr.org/index.php/Main_Page[wiki de Dolibarr]. *Le contenu de ce livre est soumis à une licence creative Commons ( CC-BY-SA )*. +
*Dolibarr* étant par essence modulaire, ce document décrit module par module les étapes à suivre pour réaliser les processus minimaux à travers *Dolibarr*. +
Ce guide d’instructions prétend donner à l’utilisateur une vision globale, rapide, et non spécifique, de chacun des différents processus et fonctionnalités, afin que celui ci puisse en cas d’oubli, facilement s’éclairer de manière simple et pratique. Nous rappelons qu’il ne s’agit pas d’un manuel complet, seulement d’un guide rapide. +
*Avertissement* : Les explications et démonstration du livre sont actuellement faites sur une version *8.0* de *Dolibarr*, il ne s’agit pas d’une version finale, ce guide est en constante actualisation, de ce fait nous vous recommandons de porter toute votre attention aux nouvelles versions qui suivront l’évolution de *Dolibarr* et qui seront mises à la disposition de ses utilisateurs sur lehttp://www.dolistore.com/[http://www.dolistore.com/[ ]]http://www.dolistore.com/[DoliStore]+++<u>+++.+++</u>+++











== 2. Installation















=== 2.1. Introduction

==== 2.1.1. Doliwamp	



Dolibarr est installable sur un serveur LAMP (Linux, Apache, Mysql, Php). +
Nous prendrons tout d'abord l'exemple de l'installation d'une version locale sous Windows à l'aide de l'installeur Windows (Doliwamp). En premier lieu passons récupérer les sources sur Sourceforge :https://sourceforge.net/projects/dolibarr/files/?source=navbar[https://sourceforge.net/projects/dolibarr/files/?source=navbar[ ]]https://sourceforge.net/projects/dolibarr/files/?source=navbar[https://sourceforge.net/projects/dolibarr/files/?source=navbar] +
Cliquez sur le lien : https://sourceforge.net/projects/dolibarr/files/latest/download?source=files[*Download DoliWamp-7.0.2.exe (64.1 MB)]*__ __pour récupérer la dernière version stable.






==== 2.1.2. Étapes de l'installation	



		
Première étape, récupération et lancement de l’exécutable.
		



Suivez toutes les étapes de l'installation pas à pas, avant d'arriver à l'installation proprement dite de *Dolibarr*. Cliquez sur les boutons des fenêtres de l'assistant d'installation ( Oui, Suivant ou Installer ).























Autorisez naturellement l'accès





Le reste de l'installation se déroule dans l'interface web

==== 2.1.3. A partir des sources sur github

En prérequis, on suppose que vous avez déjà installé votre serveur LAMP sur votre PC  +
( _Wampserver_ par exemple) ainsi que _Git Bash (_http://code.google.com/p/msysgit/downloads/list?q=label:Featured[_http://code.google.com/p/msysgit/downloads/list?q=label:Featured]___)__ +
Maintenant, placez vous dans le dossier www de wamp, faites un clic droit et lancez la commande Git Bash



Utilisez la ligne de commande suivante : +
*_« git clone https://github.com/Dolibarr/dolibarr.git »_* +
Le téléchargement une fois terminé, déplacez vous dans le dossier *dolibarr*(renommé en dolibarr_800) que vous venez de télécharger pour y lancer la ligne de commande suivante : *_« git checkout 8.0 »_*__ __pour utiliser la version désirée de *Dolibarr* .

		


Nous allons maintenant créer un alias dans wampserver pour accéder directement à notre site *dolibarr *(sans avoir à rajouter /htdocs/ dans l’adresse de l’instance *Dolibarr *). Pour cela rendez vous à la racine du dossier wamp, dans le dossier alias. Dupliquez un des fichiers existants, renommez le en _dolibarr_800.conf _(ou bien ce que vous voulez). Ouvrez le fichier à l'aide d'un éditeur de texte ( Notepad++ par exemple), et faites les changements suivants :



Vérifiez que votre alias soit bien pris en compte, sinon cliquez sur “créer un alias”.

Si vous vous rendez sur la page localhost, vous avez à présent directement l'accès à l'interface web de *dolibarr* sous le nom d'alias *_dolibarr_800_*



Création de la base de données correspondante :



*_Attention ! : _*Le nom de la base de données correspond à celle que nous avons créé précédemment (ici : dolibarr_800). Et nous poursuivons l’installation.







L'étape en cours peut durer quelques minutes. Merci d'attendre l'affichage complet de la page suivante pour poursuivre. +
Merci de patienter quelques instants…







*_C’est fait !_*



== 3. Premiers paramétrages



























*Attention !*, une fois l'installation terminée, les outils d'installation/migration doivent être désactivés en ajoutant un fichier install.lock dans le répertoire C:/wamp64/www/dolibarr_800/documents. L'absence de ce fichier représente une faille de sécurité. Les alertes de sécurité sont visibles par les administrateurs uniquement et resteront actives tant que la vulnérabilité sera avérée (ou que la constante MAIN_REMOVE_INSTALL_WARNING aura été définie dans Configuration->Divers).



Une fois l'installation réalisée il est nécessaire de procéder à un paramètrage pour adapter *Dolibarr* à vos besoins.

=== 3.1. Configuration

==== 3.1.1. Société/Institution

Rendez vous dans le menu “_Configuration/Société/Institution_” et éditez sur cette page toutes les informations connues sur la société ou association que vous devez gérer (pour cela cliquez sur le bouton “_Modifier_” en bas de page). Importez votre logo (au format png ou jpg, *Attention !* pour la taille évitez une image trop grande qui pourrait déstructurer la présentation de vos modèles de documents ainsi que les alourdir inutilement). +
N'oubliez pas de définir votre pays, de nombreuses options en dépendent (un message d'alerte vous le rappellera). +
Renseignez le mois de début d'exercice pour votre société ou institution (les rapports du module _Compta/Tréso_ s'afficheront à partir de ce mois choisi). +
Définissez si vous êtes assujetti ou non à la TVA .

==== 3.1.2. Modules

Le choix des modules à activer est important, il dépend en grande partie de l'utilisation que vous prévoyez de faire de *Dolibarr *ainsi** **que de votre type de** **structure. Une société de service n'aura pas besoin par exemple d'activer les modules _Produits_ et _Stocks _à__ __l'inverse d'une PME revendeuse de produits, de même les modules _Adhérents_ ou _Don _n'intéresseront que les associations. Soyez cependant sans inquiétude, chaque module peut être activé ou désactivé à tout moment en fonction de l'évolution de votre usage et de votre connaissance du logiciel. Nous verrons l'usage et la configuration des principaux modules au fil du livre.



==== 3.1.3. Menus

Les gestionnaires de menu définissent le contenu des 2 barres de menus (la barre horizontale et la barre verticale). Il est possible de mettre un gestionnaire différent selon que l'utilisateur est interne ou externe. +
L'éditeur de menu permet de définir des entrées personnalisées dans les menus. Il doit être utilisé avec prudence sous peine de mettre *Dolibarr *en situation instable nécessitant une réinstallation pour retrouver un menu cohérent. +
Certains modules ajoutent des entrées personnalisées aux menus (dans le menu *Tous* en général). Si vous détruisez ces entrées par erreur, vous pourrez les récupérer en désactivant puis réactivant le module. +
Sous l’onglet _Divers _vous pouvez agir sur le paramètre : +
_Masquer les menus non autorisés aussi pour les utilisateurs internes (sinon juste grisés)._ +
*Attention ! *De façon générale je vous conseille d’utiliser le menu Eldy qui est le mieux maintenu, et si vous utilisez un menu “exotique” et que vous remarquez un comportement anormal de *Dolibarr* dans l’affichage, essayez de repasser au menu Eldy pour voir si le fonctionnement est le même.

==== 3.1.4. Affichage

Vous pouvez choisir ici tous les paramètres liés à l'apparence de *Dolibarr*. Choisissez votre langue. L'option multi-langue elle, permet de gérer différentes traductions pour l'affichage des produits par exemple, ainsi que de choisir par défaut la langue des tiers afin d'éditer les documents PDF dans leur langue. Choisissez le thème visuel.  +
Avec le thème _eldy_, vous pouvez maintenant changer la couleur de fond du menu du haut. 



Affichez les zones de recherche permanentes dans le menu de gauche ( Sociétés, Contacts, Produits et Services, Produits et Services (Réf. produit fournisseur), Adhérents, Projets).


Vous pouvez encore régler certain paramètres comme l’affichage de votre logo dans le menu gauche, régler la longueur maximale par défaut des listes, choisir l’ordre d'affichage prénom/nom… +
*Attention ! *L’icône d’accès à l’aide en ligne est maintenant située en haut à droite de votre page.

==== 3.1.5. Les widgets

Les widgets sont des zones d'information réduites qui s'affichent sur certaines pages. Vous pouvez choisir ou non d'activer une boîte en sélectionnant la page cible et en cliquant sur      “Activer” , ou en cliquant sur la poubelle pour la désactiver. Seuls les éléments en rapport avec unhttp://compta.aflac.fr/admin/boxes.php?mainmenu=home[http://compta.aflac.fr/admin/boxes.php?mainmenu=home[ ]]module actif sont présentés. +
Vous pouvez aussi régler ici le nombre maximum de lignes pour les boîtes.

==== 3.1.6. Alertes

Cet écran permet de définir les délais de tolérance après lesquels une alerte sera signalée à l'écran par le pictogramme  sur chaque élément en retard. Seuls les éléments en rapport avec unhttp://compta.aflac.fr/admin/modules.php[http://compta.aflac.fr/admin/modules.php[ ]]module actif sont présentés.

==== 3.1.7. Sécurité

La configuration de la sécurité touche aussi bien à des aspects techniques que fonctionnels. En effet c'est dans cette partie que vous pouvez régler :

* l'utilisation ou non d'un proxy
Si le serveur Dolibarr a besoin de passer par une passerelle proxy pour accéder à internet, saisissez ici les informations de ce proxy. *Remarque*: Ce point n'a pas de rapport avec la configuration de votre navigateur pour permettre à votre navigateur d'accéder à Internet ou à un *Dolibarr* sur Internet, il ne sert que pour permettre au serveur *Dolibarr* de voir des ressources sur Internet, chose utile uniquement pour quelques fonctions marginales de *Dolibarr* (exemple: l'ajout d'un widget Fil RSS pour afficher des infos dans les écrans issus d'un site de news externe).

* les permissions par défaut de *Dolibarr*.
Les permission par défaut sont les permissions qui seront d'entrée automatiquement affectées à chaque nouvel utilisateur créé. Elles n'ont pas d'effet sur les utilisateurs déjà existants. Pour chaque module, il vous faut préciser si vous autorisez la consultation, la modification, la suppression... Pour ce faire il suffit de cliquer sur le signe + (plus) à l'extrême droite de l'option pour donner la permission par défaut à tous les utilisateurs ou au contraire cliquer sur le signe - (moins) pour retirer cette permission. +
*Attention ! *, ceci ne détermine que les permissions qui seront effectives d'entrée lorsque vous créerez un nouvel utilisateur. Pour modifier les permissions d'un utilisateur ou groupe déjà existant ou après sa création, il faut aller sur la fiche de l'utilisateur ou groupe en question (Les permissions qui apparaîtront comme “ héritées ” sont des permission issus d'un groupe de l'utilisateur)

* divers
Utilisation du code graphique (CAPTCHA) sur la page de connexion, +
Utiliser les droits avancés dans les permissions des modules, +
Délai d’expiration des sessions, +
Forcer la valeur visible du nom de l'application, par exemple si vous renseignez “*Toto*” dans le champ, vous verrez l’application renommée en “*Toto 7.0.2*” au lieu de “*Dolibarr 7.0.2*” (*Attention !* : positionner ici son propre nom rendra inopérante la fonction de remplissage automatique de l'identifiant lorsque vous utilisez l'application mobile DoliDroid). +
*Astuce!* C’est  sous l’onglet “Fichiers” que vous pourrez régler la taille maxi des fichiers à télécharger. Il va de soit que vous ne pourrez dépasser la limite imposée par votre serveur. A voir dans votre fichier php.ini.




==== 3.1.8. Emails

Exemple pour une installation en local de Dolibarr, sur un serveur winamp. La méthode d’envoi des emails est SMTP. Ici le serveur smtp est celui d’un compte gmail. Le port 465 du serveur SMTP est lié à l’utilisation du chiffrement. L’identifiant d’authentification SMTP est l’adresse email. Le test de disponibilité du serveur confirme que la configuration est valide et fonctionnelle. *Attention! *La configuration serait différente pour un serveur Linux en ligne.

==== 3.1.9. Dictionnaires

Définissez ici les données de référence. Vous pouvez compléter/modifier les données prédéfinies avec les vôtres. Seuls les éléments en rapport avec un module actif sont présentés.


Cette page permet d'éditer les listes de valeurs définie sur certains objets de *Dolibarr*: +
Monnaies +
Pays +
Régions +
Départements/Provinces/Cantons +
Formes juridiques des Tiers +
Types de Tiers +
Effectifs +
Niveau de potentiel des prospects +
Statuts de prospection +
Titres de civilité +
Types de contacts/adresses +
Liste des types d'événements de l'agenda +
Statut d'opportunités pour les affaires/projets +
Types de charges sociales ou fiscales +
Types de déplacement et notes de frais +
Type de ressource +
Montants des timbres fiscaux +
Taux de TVA (ou de taxes de ventes US). *Remarque*: Permet de spécifier plus que la TVA française et s'apparente à un écran de gestion des taxes globales. +
Conditions de règlement +
Modes de paiements +
Origines des propales/commandes +
Méthodes de commandes +
Méthodes d'expédition +
Délai de livraison +
Format papiers +
Unités +
Incoterms +
UltimatepdfLine. *Remarque*: Ajouté par le module externe Ultimatepdf pour créer des lignes de texte spécifiques qui se placeront dans la zone d’info des documents. +
UltimatepdfTitle. *Remarque*: Ajouté par le module externe Ultimatepdf pour créer des titres à la volée pour renommer les documents (exemple pour renommer “Commande” en “Facture Proforma”).

==== 3.1.10. Utilisateurs

La dernière étape consiste à créer les utilisateurs et à leur attribuer des permissions. Presque tous les modules, même activés précédemment, ne sont accessibles que si l'on en donne la permission. Pour cela, vous pouvez vous rendre dans le menu _Accueil/Utilisateurs & Groupes _pour définir les utilisateurs et leurs droits. *Attention!*, il faudra penser à vérifier et redéfinir les droits utilisateurs quand vous activerez de nouveaux modules. La liste des droits disponibles dépendant des modules activés et des permissions par défaut, il est recommandé de ne configurer cette partie qu'après avoir activé les modules désirés. Pour certaines actions, si vous n'avez pas les droits pour ce faire, *Dolibarr* ne vous la proposera pas. Vous risquez de rater des choses utiles et/ou importantes. Pour donner les droits à un utilisateur ou vous-même si vous êtes administrateur, aller dans _Accueil/Utilisateurs & Groupes_, choisissez la fiche de l'utilisateur désiré, puis cliquez sur l'onglet **«** _Permission_ **»**. +
Il est possible d'éviter ces étapes de configuration à faire pour chaque nouvel utilisateur en configurant les droits par défaut (comprendre droits attribués automatiquement à chaque nouvel utilisateur créé), en configurant les permissions par défaut. Les permission par défaut sont les permissions qui seront automatiquement affectées à chaque nouvel utilisateur créé. Elles n'ont pas d'effet sur les utilisateurs déjà existants. Pour chaque module, il vous faut préciser si vous autorisez la consultation, la modification, la suppression... Pour cela il suffit de cliquer sur le signe + (plus) à l'extrême droite de l'option pour donner la permission par défaut à tous les utilisateurs ou au contraire cliquer sur le signe - (moins) pour retirer cette permission. +
*Attention !*, ceci ne détermine que les permissions qui seront effectives lors de la création d'un nouvel utilisateur. Pour modifier les permissions d'un utilisateur ou groupe déjà existant ou après sa création, il vous faut aller sur la fiche de l'utilisateur ou du groupe en question ( Les permissions qui apparaîtront comme **«** _héritées_ **»** sont des permissions issues d'un groupe de l'utilisateur ).

==== 3.1.11. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

MAIN_FILESYSTEM_ENCODING =>  +
Avec certaines versions de PHP, PHP n'est pas capable de détecter quel est le code de la page pour le système de fichiers du système d'exploitation du serveur. Pour résoudre ce problème, Dolibarr suppose que le système de fichiers de votre système d'exploitation est UTF-8 si vous utilisez Linux ou OSX, et ISO-8859-1 si vous utilisez Windows. Si ce n'est pas le cas, par exemple sur un serveur Windows avec un pagecode NTFS UTF-8, vous pouvez définir la variable MAIN_FILESYSTEM_ENCODING sur "utf-8".

MAIN_SHOW_TECHNICAL_ID => Afficher aussi les identifiants techniques sur les fiches d'éléments ou certaines listes (non supportées partout).

MAIN_MAXTABS_IN_CARD => Nombre maximum d'onglets visibles. Les autres sont regroupés dans une liste déroulante.

MAIN_ONLY_LOGIN_ALLOWED => Seul le login spécifié est autorisé à se connecter à Dolibarr (mode maintenance).

MAIN_AUTO_TIMESTAMP_IN_PUBLIC_NOTES / MAIN_AUTO_TIMESTAMP_IN_PRIVATE_NOTES => Ajouter un horodatage et un utilisateur automatiquement lors de l'édition de la note (publique ou privée selon l'option).

MAIN_SECURITY_CSRF_WITH_TOKEN (>= 5.0) => Activez une deuxième protection anti-CSRF sur POST (un POST d'un autre site Web ne peut pas être effectué). Notez qu'il existe déjà une protection par défaut utilisant le test sur referrer. Cette deuxième protection utilise TOKEN sur les formulaires et est moins puissante.

MAIN_APPLICATION_TITLE => Cela changera le titre du logiciel (qui apparaît sur la page de connexion par défaut). Attention, changer ceci peut faire échouer la détection de versions de Dolibarr par des applications de smartphone comme https://wiki.dolibarr.org/index.php/Application_Android_-_DoliDroid[Application Android - DoliDroid]

MAIN_AUTOFILL_DATE => Si cette constante est définie (à autre chose que 0), la date de facture, de proposition, de commande ou de paiement est renseignée avec la date actuelle. Il est fortement recommandé de ne pas activer cette fonctionnalité. Cela crée beaucoup d'erreurs de saisie sans données non validées par les utilisateurs. Cela conduit à de mauvaises valeurs enregistrées dans la base de données donnant des maux de tête lorsque vous devez faire vos rapports de comptabilité! Cependant, certains utilisateurs le veulent, alors nous le fournissons.

MAIN_DISABLE_FULL_SCANLIST => Constante à définir pour désactiver l'analyse complète des tables afin de connaître la quantité totale d'élément permettant à la pagination d'afficher le nombre total de pages. A activer sur des systèmes avec un nombre de données très important (tables de plus de 500 000 enregistrements).

MAIN_FIRST_TO_UPPER => Dolibarr ajoute des majuscules aux noms des tiers, des contacts ou des membres si cela n'est pas fait. Attention, avec certaines langues (dont les mots en majuscules ne sont pas les mêmes mots, ou pagecode n'a pas toujours une majuscule, comme les langues cyrilliques), cette fonctionnalité peut altérer vos données.

MAIN_ENABLE_LOG_TO_HTML (MAIN_LOGTOHTML before 3.9) => Si cette constante est définie, il est possible d'avoir des journaux dans les pages en ajoutant le paramètre & logtohtml = 1 dans l'URL.

MAIN_USE_HOURMIN_IN_DATE_RANGE => Sur toutes les lignes d'entités (facture, commande, contrat ...), il est possible d'ajouter l'heure et les minutes avec la date dans les champs “date début” et “date fin”.

MAIN_REMOVE_INSTALL_WARNING => Supprimez tous les avertissements de sécurité qui apparaissent aux administrateurs si l'URL/installation est publique. Vous devriez résoudre le problème si un avertissement survient au lieu de supprimer cet avertissement. Pour cela, placez un fichier nommé install.lock dans le répertoire racine de Dolibarr. Cela supprimera l'avertissement mais rendra également impossible l'utilisation de la page / installation pour protéger votre installation.

MAIN_OPTIMIZE_SPEED => Utilisez une amélioration des vitesses. Voir la page https://wiki.dolibarr.org/index.php/Increase_Performance[Increase_Performance] pour plus d'informations.

MAIN_REPLACE_TRANS_xx_XX => Où xx_XX est le code de langue. Si la valeur est string1:newstring1; string2:newstring2 alors remplacez string1 par newstring1 dans toute traduction effectuée pour la langue xx_XX.

MAIN_REPEATCONTACTONEACHTAB => Si ajouté et mis à 1, cela ajoute des contacts sur tous les onglets, pas seulement l'onglet principal.

MAIN_DISABLE_JQUERY_JNOTIFY => Désactiver l'utilisation de JNotify pour afficher les messages de confirmation ou d'erreur.

MAIN_USE_JQUERY_JEDITABLE => Permet de mettre à jour depuis l'écran, directement dans la base de données, certaines propriétés des éléments (factures, propositions, ...) en utilisant Ajax. Cela accélère le temps de réponse, mais évitez d'utiliser cette fonctionnalité, car elle dépasse certaines actions métier (mises à jour sur d'autres données à effectuer régulièrement) et ignore les contrôles métier sur les données que vous avez enregistrées. Donc, cette fonctionnalité brise la cohérence des données et la stabilité du logiciel.

MAIN_USE_JQUERY_MULTISELECT =>Permet d'utiliser Ajax lorsqu'un choix nécessitant un multiselect est utilisé (pour le moment, seuls les modules externes utilisent une boîte de sélection avec des valeurs multisélect). Définissez la valeur du nom du plugin jQuery à utiliser (multiselect, multiple-select, select2 ...). Le réglage à une autre valeur entraînera des effets secondaires indésirables et/ou des bogues.

MAIN_HELPCENTER_LINKTOUSE => Définit le lien de l'URL à utiliser comme cible pour le lien “J'ai besoin d'aide” sur la page de connexion.

MAIN_MODULES_FOR_EXTERNAL => Limiter les modules disponibles pour les utilisateurs externes. Par défaut, la valeur est “facture, commande, contact, propal, projet, contrat, societe, ficheinter, expedition, agenda”.

MAIN_SHOW_TUNING_INFO => Ajoutez des informations de réglage dans la console javascript. Bien mieux quand xdebug est activé.

MAIN_DOL_SCRIPTS_ROOT => Définir le répertoire qui contient le répertoire “scripts” (par exemple / var / www / dolibarr)

MAIN_MIN_NB_ENABLED_MODULE_FOR_WARNING => Un avertissement indiquant que l'installation des modules n'est pas terminée s'affiche si le nombre de modules activés est inférieur ou égal à cette valeur (1 si non défini)

MAIN_ADD_SALE_REP_SIGNATURE_IN_NOTE => Ajouter la signature du premier commercial dans les documents (à la fin des notes publiques).

MAIN_DISABLE_AJAX_COMBOX => Si vous avez une grande quantité de tiers ou de produit, vous pouvez désactiver la fonctionnalité de saisie semi-automatique sur la liste des tiers en définissant la constante MAIN_DISABLE_AJAX_COMBOX sur 1 dans Accueil-Configuration-Autres (avec Dolibarr v3.6.0 +).

MAIN_USE_CACHE_MANIFEST => Ajouter un manifeste de cache HTML5 à la page - Attention, cette fonctionnalité est obsolète et supprimée des standards Web

MAIN_FORCELANGDIR => chemin relatif du répertoire contenant votre dossier langs personnalisé.

MAIN_VAT_DEFAULT_IF_AUTODETECT_FAILS => permet de définir un taux de TVA par défaut.

MAIN_HTML_TITLE => peut être utilisé pour contrôler comment le titre html est formaté. Si la valeur contient la clé “noapp”, le nom de l'application ne sera pas généré. Si la valeur contient “thirdpartynameonly”, sur l'onglet pour les tiers, seuls les noms des tiers sont affichés. La valeur peut être une liste de tags: “noapp; thirdpartynameonly”.

MAIN_LANDING_PAGE => (>= 3.9) Permet de choisir la première page à afficher après la connexion. Cette option fonctionne comme une option globale (llx_const) et une option par utilisateur (llx_user_param).

MAIN_PROPAGATE_CONTACTS_FROM_ORIGIN => (>= 4.0) Lors de la création d'une commande, d'un contrat, d'une facture à partir d'un autre objet, les contacts spécifiques des objets sont définis comme contacts spécifiques du nouvel objet lorsque cela est possible.

MAIN_WEIGHT_DEFAULT_ROUND = Précision du poids (nombre de décimales).

MAIN_WEIGHT_DEFAULT_UNIT = Unité par défaut pour le poids (0 = kg, -3 = g, ...).

MAIN_VOLUME_DEFAULT_ROUND = Précision du volume (nombre de décimales).

MAIN_VOLUME_DEFAULT_UNIT = Unité par défaut pour le poids (0 = kg, -3 = g, ...).

MAIN_PUBLIC_NOTE_IN_ADDRESS >=4.0 => afficher une note publique dans le bloc d'adresse.

MAIN_DEFAULT_PAYMENT_TERM_ID => Avec l'ID d'un terme de paiement, utilisera ce terme comme terme de paiement par défaut chaque fois que vous créerez une nouvelle proposition, commande, facture (client et fournisseur).

MAIN_ROUNDOFTOTAL_NOT_TOTALOFROUND => Modifier la façon d'arrondir les lignes total TTC , en arrondissant avant ou après.

MAIN_VIEW_LINE_NUMBER => Afficher un numéro de ligne pour chaque ligne de la commande/facture pour les produits/services. Sur l'écran seulement, pas sur les PDF.

MAIN_DOC_USE_OBJECT THIRDPARTY NAME => Ajouter le nom d'un tiers au début du document généré.

MAIN_DOC_USE_TIMING => Ajouter un horodatage à la fin du document généré. La valeur doit être au format de l'horodatage. Par exemple:% Y% m% d% H% M.

MAIN_DISABLEDRAFTSTATUS => Désactiver le statut Brouillon pour un objet (projet, donation, ...).

MAIN_USE_OLD_SEARCH_FORM => Afficher l'ancien formulaire de recherche dans le menu de gauche.














== 4. Adhérents































=== 4.1. Introduction

Le module « _Adhérents_ » permet de gérer les adhérents d’une association. Nous rappelons que *Dolibarr* fait de la gestion de trésorerie mais ne fait pas de comptabilité analytique (pas encore). Cette lacune suffit pour dire que *Dolibarr* n'est pas adapté à une association de grosse taille (plus de 5000 adhérents). Il n'offre pas non plus de module de gestion de la paie, ce qui limite là aussi son utilisation aux associations qui n'ont pas de salariés. Le module de gestion d'association appelé _« module Adhérents_ » est en fait plutôt orienté vers les petites associations (dont fait parti l’association *Dolibarr*). +
*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. Vous trouverez ce dernier dans la famille “ _Modules disponibles/Gestion des Ressources Humaines (RH)_ “. Le pictogramme d'état doit être vert pour signifier son activation, 




le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :



*Onglet Divers*

*Options principales* +
_Gérer un identifiant pour chaque adhérent: _choisissez “_oui ou non_” comme valeur et cliquez sur le bouton action “_Modifier”_. (Pour info l’association *Dolibarr* a configuré à oui). +
_EMail obligatoire pour créer un nouvel adhérent_: choisissez “_oui ou non_” comme valeur et cliquez sur le bouton action “_Modifier_”. (Pour info l’association *Dolibarr* a configuré à oui). +
_Case à cocher pour envoyer un mail de confirmation (validation ou nouvelle cotisation) aux adhérents est à oui par défaut_: choisissez “_oui ou non_” comme valeur et cliquez sur le bouton action “_Modifier”_. (Pour info l’association *Dolibarr* a configuré à oui). +
_Action complémentaire proposée par défaut à l'enregistrement de l'adhésion : _ +
choisissez “_Aucun”, “Création d’une écriture directe sur le compte bancaire ou caisse”, “Création facture sans paiement”_ _ou bien _“Créer une facture avec paiement sur compte bancaire ou caisse” comme valeur et cliquez sur le bouton action “ _Modifier _“. (Pour info l’association *Dolibarr* a configuré à _Création facture avec paiement sur compte bancaire ou caisse_). +
_Taux de TVA pour les adhésions _: choisissez entre “_Taux de TVA pour les adhésions ou Pas de TVA sur les adhésions”. _(Pour info l’association *Dolibarr* a configuré à _Pas de TVA sur les adhésions)._ +
_Produit/Service utilisé pour la ligne de cotisation dans la facture: _Présente une liste déroulante des produits et services créés dans le module _Produits/Services._



*Cartes d'adhérent* +
_Format pages cartes d'adhérent_: choisissez une valeur dans la liste déroulante et cliquez sur le bouton action « _Modifier _». (Pour info l’association *Dolibarr* a choisi _« Dolibarr Business cards (A4) »_). +
_Texte imprimé sur le haut des cartes d'adhérent_: Dans le champ _« valeur_ » vous pouvez placer une ou plusieurs des constantes suivantes qui seront substituées par leur valeur correspondante : +
__DOL_MAIN_URL_ROOT__, __ID__, __FIRSTNAME__, __LASTNAME__, __FULLNAME__, __LOGIN__, __PASSWORD__, __COMPANY__, __ADDRESS__, __ZIP__, __TOWN__, __COUNTRY__, __EMAIL__, __BIRTH__, __PHOTO__, __TYPE__, __YEAR__, __MONTH__, __DAY__ , et cliquer sur le bouton action “_Modifier”_. (Pour info l’association *Dolibarr* a choisi “__FIRSTNAME__ __LASTNAME__”, ce qui affichera le prénom et nom de l’adhérent). +
_Texte imprimé sur les cartes d'adhérent (Aligné à gauche)_: Dans le champ « valeur » vous pouvez placer une ou plusieurs des constantes qui seront substituées par leur valeur correspondante, et cliquer sur le bouton action “_Modifier”_. (Pour info l’association *Dolibarr* a choisi “EMail: __EMAIL__ __ADDRESS__ __ZIP__ __TOWN__”, il s’agit du mail et de l’adresse complète de l’adhérent). +
_Texte imprimé sur les cartes d'adhérent (Aligné à droite)_: Dans le champ “_valeur”_ vous pouvez placer une ou plusieurs des constantes qui seront substituées par leur valeur correspondante, et cliquez sur le bouton action “Modifier”. (Pour info l’association *Dolibarr* a choisi “__LOGO__”, pour afficher le logo de l’association *Dolibarr*).

_Texte imprimé sur le bas des cartes d'adhérent_: Dans le champ « _valeur _» vous placerez le nom de votre association (Association *Dolibarr *pour ce qui nous concerne), et cliquez sur le bouton action « _Modifier _» .

*Étiquettes d'adhérents* +
_Format pages étiquettes_: choisissez une valeur dans la liste déroulante et cliquez sur le bouton action “Modifier”. (Pour info l’association *Dolibarr* a choisi “L7163 (A4)”). +
_Texte imprimé sur les planches d'adresses adhérent _: (Pour info l’association *Dolibarr *a choisi “__FULLNAME__, __ADDRESS__, __ZIP__ , __TOWN__, __COUNTRY__”). +
*Autre* +
_Sujet du mail reçu en cas d'auto-inscription d'un invité _: Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ . +
_Email reçu en cas d'auto-inscription d'un invité :_ Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ .



_Sujet du mail envoyé en cas d'auto-inscription d'un invité _: Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ . +
_Email envoyé en cas d'auto-inscription d'un invité :_ Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ . +
S_ujet du mail de validation adhérent:_ Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_. ([Dolibarr foundation] Votre demande d'adhésion à l'association *Dolibarr* a été enregistrée), pour ce qui nous concerne.

_Email de validation adhérent_: Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_. (__FIRSTNAME__ Votre demande d'adhésion à l'association Dolibarr vient d'être prise en compte. Voici le rappel de vos coordonnées enregistrées : __FIRSTNAME__ __LASTNAME__ __COMPANY__ __ADDRESS__ __ZIP__ __TOWN__ __COUNTRY__ __EMAIL__ Si le paiement de votre adhésion a été réalisé, vous devriez recevoir un email de validation du paiement. Sinon, vous pouvez le faire dès maintenant selon le mode qui vous convient décrit sur la pagehttp://asso.dolibarr.org/index.php/Adhérer[http://asso.dolibarr.org/index.php/Adhérer[ ]]http://asso.dolibarr.org/index.php/Adhérer[http://asso.dolibarr.org/index.php/Adhérer]), pour ce qui nous concerne.


_Sujet du mail de validation adhésion:_ Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ . ([Dolibarr foundation] Reçu de votre cotisation), pour ce qui nous concerne.


_Email de validation d'une adhésion:_ Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_. (__FIRSTNAME__ Cet email confirme que le règlement de votre cotisation à l'association *Dolibarr* a été reçu et enregistré. Votre adhésion est une aide précieuse pour aider au développement de *Dolibarr*. Vous pouvez suivre les actions et informations de l'association sur le wiki à l'adresse:http://asso.dolibarr.org/[http://asso.dolibarr.org/[ ]]http://asso.dolibarr.org/[http://asso.dolibarr.org]. Vous pouvez aussi nous suivre sur : Google+, Facebook ou Twitter :

* 	Google+ : 	https://plus.google.com/106793900529658571751[https://plus.google.com/106793900529658571751]	
* 	Twitter : 	http://twitter.com/dolibarr[http://twitter.com/dolibarr]	
* 	Facebook : 	http://www.facebook.com/dolibarr[http://www.facebook.com/dolibarr] 	,
pour ce qui nous concerne.


_Sujet du mail de résiliation_: Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ .([Dolibarr foundation] Résiliation de votre adhésion), pour ce qui nous concerne.


_Email de résiliation:_** **Remplissez le champ « _valeur _», et cliquez sur le bouton action « _Modifier _» . (__FIRSTNAME__ Votre adhésion à l'association Dolibarr vient d'être résiliée. Le motif le plus courant est un non renouvellement de la cotisation annuelle. Toutefois, si vous pensez qu'il s'agit d'une erreur, ou pour corriger cela, n'hésitez pas à contacter le trésorier à l'adresse mail mailto:tresorier@dolibarr.org[tresorier@dolibarr.org].



Note: vous pouvez toujours nous suivre sur : +
Google+, Facebook ou Twitter :

* Google+ : 	https://plus.google.com/106793900529658571751[https://plus.google.com/106793900529658571751]	
* Twitter : 	http://twitter.com/dolibarr[http://twitter.com/dolibarr]	
* Facebook :http://www.facebook.com/dolibarr[    ]http://www.facebook.com/dolibarr[http://www.facebook.com/dolibarr], 	pour ce qui nous concerne.
_Email émetteur pour les mails automatiques_: Remplissez le champ “_valeur”_, et cliquez sur le bouton action “_Modifier”_ . (+++<u>+++contact@dolibarr.org+++</u>+++), pour ce qui nous concerne.

*Attributs supplémentaires* *(adhérents)* +
Si vous avez besoin de gérer des attributs particuliers sur vos fiches adhérents et qui n'auraient pas été prévus, vous pouvez les définir ici. Nous allons dans notre exemple rajouter trois champs pour renseigner les valeurs de Google+, Twitter et Facebook.


Dans l’onglet _“Attributs supplémentaires (adhérents)_” de la configuration du module adhérents définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérez sur les Adhérents. Cliquez sur le bouton _« Nouvel attribut_ », dans le champ _« libellé »_ renseignez: Google+, dans le champ _« Code de l’attribut »_: google (uniquement des caractères alphanumériques et en minuscule sans espace), le type: _« Chaîne_ » et la _« Taille_ »: 255. Vous répétez deux fois l’opération avec respectivement Twitter et Facebook, et vous avez la possibilité maintenant d’intégrer ces éléments à la fiche de vos adhérents.






*Attributs supplémentaires* *(type d'adhérents)* +
Dans l’onglet _« Attributs supplémentaires (type d'adhérents)_ » de la configuration du module adhérents définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérez sur les Types d'Adhérents.

*Formulaire publique d’auto-inscription* +
*Dolibarr* peut offrir une URL de page publique permettant de postuler à une adhésion pour les visiteurs externes. S’il existe un module de paiement en ligne, un formulaire de paiement sera également automatiquement proposé. +
_Activer le formulaire publique d'auto-inscription_: Si vous optez pour la valeur _« Oui_ », vous verrez deux nouvelles lignes apparaître : +
_Montant par défaut de la cotisation_: l’association *Dolibarr* a configuré à 20€ cette valeur. _Le visiteur peut modifier/choisir le montant de sa cotisation_: l’association *Dolibarr* a configuré à Non cette valeur. +
_Rediriger sur la page intégrée de paiement en ligne : _S’il existe un module de paiement en ligne, un formulaire de paiement sera également automatiquement proposé, l'association utilise Paypal.

_Email à avertir en cas de retour de paiement validé pour une cotisation : _On renseignera en général l'adresse mail du trésorier.

* Cliquez sur _« Modifier_ » pour faire prendre en compte vos choix.	
* L’adresse du formulaire public d’inscription de l’association est la suivante : 	
_« _http://asso.dolibarr.org/dolibarr/public/members/new.php[http://asso.dolibarr.org/dolibarr/public/members/new.php] »

=== 4.2. Type d’adhérent

==== 4.2.1. Créer un nouveau type d'adhérent

Avant toute chose, il est nécessaire de définir les profils d'adhérents. Pour cela, il faut créer un type d'adhérent via le menu _« Type d'adhérents/Nouveau_ » . Nous nous trouvons sur la page d'accueil du module Adhérents, après avoir cliqué sur l'onglet du même nom dans la barre de menu supérieure. Cliquez sur le bouton _« Nouveau type d’adhérent_ ». Pour ce qui est de l’association, nous en avons défini deux types:

* _Libellé_: Standard, _Soumis à cotisation_: Oui, _Vote autorisé_: Oui, _Description_: Voir wiki 	http://wiki.dolibarr.org/index.php/Grilles_de_cotisation_dolibarr[http://wiki.dolibarr.org/index.php/Grilles_de_cotisation_dolibarr], _Email 	d’accueil_: néant.	
* _Libellé_: Preferred Partners, _Soumis à cotisation_: Oui, _Vote autorisé_: Oui, _Description_: 	voir wiki 	
* http://wiki.dolibarr.org/index.php/Dolibarr_Preferred_Partner_fr, _Email 	d’accueil_: néant.
Un _« _*_Dolibarr Preferred Partner_** »* est un fournisseur de service autour de Dolibarr ERP-CRM qui s'est engagé à prouver sa crédibilité et compétence autour du produit et offrant une garantie de qualité et de compétences dans ses prestations.



==== 4.2.2. Modifier un type d’adhérent

Cliquez sur le bouton « _modifier_ » et pratiquez vos changements dans les différents champs avant d’enregistrer.

==== 4.2.3. Supprimer un type d’adhérent

Cliquez sur le bouton « supprimer ». +
*Attention !*, il n’y a pas de phase intermédiaire de demande de confirmation.

=== 4.3. Nouvelle adhésion

==== 4.3.1. Création d’un adhérent

Pour créer un adhérent on va dans le menu _« Adhérents/Nouvel adhérent_ ». Un formulaire de création est alors proposé. Renseignez tous les champs et cliquez sur le bouton _« Ajouter adhérent_ ». +
*Attention!* si vous n’avez pas défini de type d’adhérent, vous aurez cette alerte : _« Aucun type d'adhérent défini. Allez dans Configuration - Types d'adhérents_ » +
Ensuite, on passe l'adhérent à l'état Validé en cliquant sur le bouton _« Valider_ » sur la fiche adhérent, avec une phase intermédiaire de validation: « _Êtes-vous sûr de vouloir valider cet adhérent ?_ ». Si on veut offrir un accès *Dolibarr* à ce membre, il faut cliquer sur _« Créer un compte utilisateur_ » depuis sa fiche membre. Si on veut manipuler un tiers propre à ce membre (pour facturation, devis, etc...), il faut soit cliquer sur le bouton _« Créer un tiers_ » depuis sa fiche membre, soit cliquer sur l’icône d’édition de la ligne _« Lien tiers Dolibarr_ », et choisir le tiers dans la liste déroulante. +
Vous pouvez adresser sa fiche par mail à votre adhérent, en cliquant sur le bouton « _Envoyer fiche par mail_ », après une réponse positive à la question : « _Voulez vous envoyer le contenu de cette fiche par mail à l'adresse adherent@dolibarr.fr_ » la fiche est adressée.


L’état** **est passé à « _Validé (attente cotisation)_ ». Cliquez sur l’onglet « _Adhésions/cotisations_ », puis sur le bouton « _Ajouter adhésion/cotisation_ ». La fiche de cotisation s’ouvre, avec le champ date pré-rempli, si vous le laissez vide, le champ « _Date fin adhésion_ » sera auto renseigné, en rajoutant un an à la date du jour. Rentrez un montant pour la cotisation, le libellé est auto renseigné, choisissez une action complémentaire à l'enregistrement. Celle par défaut : « _Création facture avec paiement sur compte bancaire ou caisse_ (_Tiers: celui que vous venez de créer_) » établira la facture pour ce dernier. Sélectionnez le compte, le mode de règlement, la date de paiement et cliquez sur le bouton« _Ajouter adhésion/cotisation _ ». L’état de votre adhérent est passé à _« Adhésion à jour_ » . Cliquez sur le _« lien tiers Dolibarr_ » pour vous rendre sur la fiche du tiers qui lui est associé, de là sur l’onglet _« Client_ », vous allez y retrouver la facture à l’état _« Commencée_ ». Cliquez dessus et passez la à l’état « _Payée_ » en utilisant le bouton correspondant « _Classer payée_ », validez, et votre adhérent fait maintenant parti de la liste « _Adhérents à jour_ ».

==== 4.3.2. Modification d’un adhérent

Cliquez sur le bouton « _modifier_ » et pratiquez vos changements dans les différents champs avant d’enregistrer.

==== 4.3.3. Suppression d’un adhérent

Cliquez sur le bouton « supprimer ». Il vous sera demandé une confirmation avant la suppression définitive :** **« _Êtes-vous sûr de vouloir effacer ce membre (Effacer un membre efface aussi toutes ses cotisations) ? _»

==== 4.3.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

MEMBER_URL_REDIRECT_SUBSCRIPTION => Lien appelé et affiché lorsqu'un compte membre est créé automatiquement dans le module adhérent par un utilisateur invité.


MEMBER_EXT_URL_SUBSCRIPTION_INFO => Lien de la page externe pointé par le lien “Afficher ici” ajouté en face de la cellule de paiement, dans la page pour faire un abonnement en ligne.

















== 5. Tiers
































=== 5.1. Introduction

Le module _Tiers-Société_ permet de gérer les entités clients, prospects et/ou fournisseurs (appelés Tiers). Ce module est un prérequis indispensable pour de nombreux autres modules qui se basent sur ces notions (factures, commandes, contrats, propositions commerciales, etc...). Un Tiers est donc une entité métier: client, prospect ou fournisseur (Exemple: Une SARL, un commerce, une association, un particulier). Le contact quant à lui représente une personne physique ou un contact générique vers une personne physique (Exemple: PDG ou ouvrier de la SARL, vendeur principal du commerce, président ou trésorier de l'association). *Dolibarr* gère de la même manière les tiers particuliers et les entreprises. Aussi, pour les particuliers, on saisira en général un “_Contact”_ qui contient les mêmes caractéristiques que l'objet “_Société”_.

*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé.


Vous trouverez ce dernier dans la famille _Gestion de la relation client (GRC)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :

*Sous l'onglet Divers :* +
*Modèle de génération et contrôles des codes tiers (clients/fournisseurs)* +
Choisissez ici le modèle qui servira de compteur pour définir le code client et le code fournisseur aux nouveaux tiers créés.


*Attention ! Réfléchissez bien au choix de configuration avant de rentrer des données, car il sera très dur de revenir en arrière, sauf à reprendre à la main un par un les codes déjà rentrés.* +
Pour les données entrées antérieurement au changement, la fiche d'un client affichera par exemple : (_Code client incorrect_), et vous devrez reprendre à la main et une par une toutes les fiches pour y renseigner le nouveau format de code. +
Choisir le modèle Elephant :


Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées : +
*{000000}* correspond à un numéro qui sera incrémenté à chaque tiers. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem que précédemment mais un offset correspondant au nombre à droite du + est appliqué dès le premier tiers.  +
*{000000@x}* idem que précédemment mais le compteur est remis à zéro le x^ème^ mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence *{yy}{mm}* ou *{yyyy}{mm}* est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur un Tiers créé le 31/03/2017: +
ABC{yy}{mm}-{000000} donnera ABC1703-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY +
IN{yy}{mm}-{0000}-{t} donnera IN0701-0099-A si la société a le type “Responsable Inscripto” avec le code type qui est “A_RI”. 

Choisir le modèle Leopard : +
Code client/fournisseur libre sans vérification. Peut être modifié à tout moment.

Choisir le modèle Monkey :


Renvoie le numéro sous la forme *CUyymm-nnnn* pour les codes clients et *SUyymm-nnnn* pour les codes fournisseurs où *yy* est l'année, *mm* le mois et *nnnn* un compteur séquentiel sans rupture et sans remise à 0.

*Modèle de génération des codes comptable (clients/fournisseurs)*

Choisissez ici le modèle qui servira à attribuer automatiquement un code comptable aux nouveaux tiers créés. +
Choisir le modèle Aquarium : +
Renvoie un code compta composé de 401 suivi du code tiers fournisseur pour le code comptable fournisseur, et 411 suivi du code tiers client pour le code comptable client. +
Choisir le modèle Panicum : +
Renvoie un code compta vide.

*Modèles de documents* +
Activez ici les modèles de documents.

*Modèle Générique ODT* +
*Attention !* Ce modèle n'est fonctionnel qu'à partir d'une version de PHP >= 5.2.0. +
Avec ce modèle, vous définissez une liste de répertoires contenant des modèles de document ODT (ces modèles doivent être des fichiers se terminant par .odt ou .ods). Indiquez les chemins complets de répertoire. Ajoutez un retour à la ligne entre chaque répertoire.** **Pour indiquer** **un répertoire du module GED, indiquez** **_DOL_DATA_ROOT/ecm/nomdurepertoireged_. Vous pouvez utiliser OpenOffice ou tout traitement de texte capable de sauvegarder des fichiers au format .odt. Si vous partez d'un exemple, vous les trouverez installés dans les sous-répertoires du répertoire _documents/doctemplates_* .* +
Ensuite, vous ajoutez et éditez vos fichiers modèles ODT avec le contenu qui vous intéresse. Incluez dans votre document les tags des informations que vous voulez voir apparaître. Les tags seront remplacés automatiquement au moment de la génération du document par *Dolibarr*. +
Si vous avez activé le module de Gestion électronique de documents, vous retrouvez le dossier que vous avez créé, ainsi que les fichiers ODT dans la partie _Racine (Arborescence manuelle)_.

*Attention !*, les tags sont entourés de {} ou [] pour les tableaux et doivent être tapés d'une traite sous la suite Office (sans retour arrière ou effacement, ni par copié-collé). Dans le cas contraire, la suite Office ajouterait des informations invisibles qui empêcherait le remplacement. +
Voici la liste des tags qui seront remplacés par les informations appropriées :

informations Société/association :

* mycompany_logo = {mycompany_logo}	
* mycompany_name = {mycompany_name}	
* mycompany_address = {mycompany_address}	
* mycompany_zip = {mycompany_zip}	
* mycompany_town = {mycompany_town}	
* mycompany_country = {mycompany_country}	
* mycompany_country_code = {mycompany_country_code}	
* mycompany_state = {mycompany_state}	
* mycompany_state_code = {mycompany_state_code}**	**
* mycompany_phone 	= {mycompany_phone}	
* mycompany_fax = {mycompany_fax}	
* mycompany_email = {mycompany_email}	
* mycompany_web = {mycompany_web}	
* mycompany_barcode = {mycompany_barcode}	
* mycompany_capital= {mycompany_capital}**	**
* mycompany_juridicalstatus= {mycompany_juridicalstatus}	
* mycompany_idprof1 = {mycompany_idprof1}**	**
* mycompany_idprof2 = {mycompany_idprof2}	
* mycompany_idprof3 = {mycompany_idprof3}	
* mycompany_idprof4 = {mycompany_idprof4}	
* mycompany_idprof5 = {mycompany_idprof5}	
* mycompany_idprof6 = {mycompany_idprof6}	
* mycompany_vatnumber = {mycompany_vatnumber}	
* mycompany_note = {mycompany_note}
*	…* +
Informations clients, prospects ou fournisseurs :

* company_name = {company_name}	
* company_address = {company_address}	
* company_zip = {company_zip}	
* company_town = {company_town}	
* company_country = {company_country}	
* company_country_code = {company_country_code}	
* company_state = {company_state}
* company_state_code = {company_state_code}	
* company_phone = {company_phone}	
* company_fax = {company_fax}	
* company_email = {company_email}	
* company_web = {company_web}	
* company_barcode = {company_barcode}	
* company_customercode = {company_customercode}	
* company_suppliercode = {company_suppliercode}	
* Company customer accountancy code = {company_customeraccountancycode} 
* Company supplier accountancy code = {company_supplieraccountancycode} 
* company_capital = {company_capital}	
* company_juridicalstatus = {company_juridicalstatus}	
* company_idprof1 = {company_idprof1}	
* company_idprof2 = {company_idprof2}	
* company_idprof3 = {company_idprof3}	
* company_idprof4 = {company_idprof4}	
* company_idprof5 = {company_idprof5}	
* company_idprof6 = {company_idprof6}	
* company_vatnumber = {company_vatnumber}	
* Customer or Supplier company public note = {company_note_public}

Informations utilisateurs :

* myuser_lastname = {myuser_lastname}	
* myuser_firstname = {myuser_firstname}	
* myuser_login = {myuser_login}	
* myuser_email = {myuser_email}
* myuser_zip = {myuser_zip}
* myuser->town = {myuser->town}
* myuser->country = {myuser->country}
* myuser->country_code = {myuser->country_code}
* myuser->state = {myuser->state}
* myuser->state_code = {myuser->state_code}
…
Autres informations

* current_date = {current_date}  (Dolibarr >= 3.4.0)
* current_datehour = {current_datehour}  (Dolibarr >= 3.4.0)
* current_server_date = {current_server_date}  (Dolibarr >= 3.4.0)
* current_server_datehour = {current_server_datehour}  (Dolibarr >= 3.4.0)
* current_date_locale = {current_date_locale}  (Dolibarr >= 3.4.0)
* current_datehour_locale = {current_datehour_locale}  (Dolibarr >= 3.4.0)
* current_server_date_locale = {current_server_date_locale}  (Dolibarr >= 3.4.0)
* current_server_datehour_locale = {current_server_datehour_locale}  (Dolibarr >= 3.4.0)
...

Informations sur l'objet (facture, proposition commercial, commande, …)

* object_id = {object_id}	
* object_ref = {object_ref}	
* object_ref_customer = {object_ref_customer}	
* object_ref_supplier = {object_ref_supplier}	
* object_date = {object_date}	
* object_date_creation = {object_date_creation}	
* object_date_modification = {object_date_modification}	
* object_date_validation = {object_date_validation}				
* object_note_private = {object_note_private}	
* object_note_public = {object_note_public}
* object_note = {object_note}

Montants (données numériques) :

* object_total_ht = {object_total_ht}
* object_total_vat = {object_total_vat}
* {object_total_localtax1} (Dolibarr >= 3.5.0)
* {object_total_localtax2} (Dolibarr >= 3.5.0)
* object_total_ttc = {object_total_ttc}
* object_total_discount_ht = {object_total_discount_ht}
* {object_total_vat_x.y} (Dolibarr >= 3.5.0, is vat total for rate x.y}

Montants (au format texte) :

* {object_total_ht_locale} (Dolibarr >= 3.5.0)
* {object_total_vat_locale} (Dolibarr >= 3.5.0)
* {object_total_localtax1_locale} (Dolibarr >= 3.5.0)
* {object_total_localtax2_locale} (Dolibarr >= 3.5.0)
* {object_total_ttc_locale} (Dolibarr >= 3.5.0)
* {object_total_discount_ht_locale} (Dolibarr >= 3.5.0)
* {object_total_vat_local_x.y} (Dolibarr >= 3.6.0, is vat total for rate x.y}


Spécifiques aux propales :

* object_date_end = {object_date_end}    Date de fin de validité de la propale

Spécifique aux commandes :

* object_date_delivery_planed = {object_date_delivery_planed}  (Dolibarr >= 3.4.0)

Spécifique aux factures :

* object_date_limit = {object_date_limit}	
* object_payment_mode = {object_payment_mode}	
* object_payment_term = {object_payment_term}	
* object_already_payed = {object_already_payed}    Montant déjà payé	
* object_remain_to_pay = {object_remain_to_pay}    Montant restant à payer
* object_source_invoice_ref = {object_source_invoice_ref}
* {object_already_payed_locale} : Montant déjà payé (au format texte)
* {object_remain_to_pay_locale} : Montant restant à payer (au format texte)

Extra fields :

* {object_options_xxx} : Value of extra field (where xxx is code of extra field)


Lignes des objets +
Voici comment utiliser les tableaux de lignes des objets (lignes de factures, commandes, etc...). Vous devez créer un tableau dans le document et utiliser une balise «begin» et «end» pour définir la ligne du tableau. Cette ligne sera répétée autant de fois que requis au moment de la génération. +
[!-- BEGIN row.lines –]  ... [!-- END row.lines --] +
Ensuite, vous ajoutez les tags de votre choix dans les lignes. +
Liste de tags :

* {line_fulldesc}	
* {line_product_ref}	
* {line_product_label}	
* {line_desc}	
* {line_vatrate}	
* {line_up}	
* {line_qty}	
* {line_discount_percent}	
* {line_price_ht}	
* {line_price_vat}	
* {line_price_ttc}	
* {line_date_start}	
* {line_date_end}


Voici ce que vous pourriez avoir dans votre traitement de texte :



*Règles sur les Identifiants professionnels*

Ce bloc permet de choisir si les 6 id professionnels (SIREN, SIRET, NAF, RCS/RM) doivent être uniques, doivent être obligatoires pour créer un tiers, ou doivent être obligatoires pour valider les factures.

*Substitution conditionnelle*

A partir de *Dolibarr* *3.3*, vous pouvez utiliser des remplacements conditionnels, ce qui en termes simples signifie que vous pouvez décider d'afficher quelque chose si une variable est vraie, ou d'afficher autre chose si elle est fausse (ou rien du tout) - et cela marche non seulement avec du texte, mais aussi toute structure plus complexe comme les tableaux et les images. +
Exemple : +
[!-- IF {my_var} --]
Print this text if {my_var} is true (can be any value but null/0/empty string)
[!-- ELSE {my_var} --]
Or print this if it's false (null/0/empty string)
[!-- ENDIF {my_var} --]

*Attention! *: le format de cette balise spéciale est très précis et pointilleux, faites attention à ne mettre qu'un seul espace entre :** **[!-- et IF/ELSE/ENDIF ou {my_var} et –]


*Autre*

Attendre que vous ayez appuyé sur une touche avant de charger le contenu de la liste déroulante des tiers (Cela peut augmenter les performances si vous avez un grand nombre de tiers) +
*Notez* que si vous avez un nombre important de tiers (> 100 000), vous pouvez améliorer les performances en définissant la constante COMPANY_DONOTSEARCH_ANYWHERE à 1 dans _Configuration->Divers_. La recherche sera alors limitée au début de la chaîne. +
Afficher le code client/fournisseur dans les liste (déroulante ou auto-complétion) et dans la plupart des hyperliens.

Attendre que vous ayez appuyé sur une touche avant de charger le contenu de la liste déroulante des contacts/adresses (Cela peut augmenter les performances si vous avez un grand nombre de contacts) +
*Notez* que si vous avez un nombre important de contacts (> 100 000), vous pouvez améliorer les performances en définissant la constante CONTACT _DONOTSEARCH_ANYWHERE à 1 dans _Configuration->Divers_. La recherche sera alors limitée au début de la chaîne.

Afficher les références client/fournisseur dans les listes (listes déroulantes ou à autocomplétion) et les libellés des liens clicables. Les tiers apparaîtront alors sous la forme “CC12345 - SC45678 - La big company coorp”, au lieu de “La big company coorp”.

Demander la méthode d'expédition préférée pour les tiers.

*Sous l'onglet Attributs supplémentaires (tiers)*

Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les Tiers. La liste de Type s'est fortement enrichie depuis *Dolibarr* *3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).



Prenons l'exemple de l'ajout d'un attribut supplémentaire _Liste issue d'une table _nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Type entreprise, _un code de l'attribut : _typent _(uniquement des caractères alphanumériques et en minuscule sans espace), un type : _Liste issue d'une table, _une valeur : nous avons choisi la table c_typent, le champ libellé (de la table c_typent) et le champ code (de la table c_typent), nous enregistrons. Maintenant si nous créons un nouveau Tiers, nous retrouvons la liste déroulante des types d'entreprises dans la fiche.




*Sous l'onglet Attributs supplémentaires (contacts/adresses)*

Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les Contacts/Adresses. La liste de Type s'est fortement enrichie depuis *Dolibarr* *3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).











=== 5.2. Tiers

==== 5.2.1. Créer un nouveau tiers (prospect, client, fournisseur)

Aller dans le menu _Tiers - Nouveau tiers (prospect/client/fournisseur)_, Saisissez les informations

La première action à pratiquer est de cocher le type du tiers, s'il s'agit d'une Société/Association ou bien d'un individu privé (ce qui créera automatiquement un contact physique avec les mêmes informations). 

En fonction de ce premier choix des champs supplémentaires s'afficheront, et nous aurons des champs obligatoires différents : +
Pour un tiers Société/Association : les champs « _nom du Tiers_ », « _Prospect/Client_ » et « _Fournisseur_ » sont obligatoires.








Pour un tiers individu privé : les champs « _nom_ », « _Prospect/Client_ » et « _Fournisseur_ » sont obligatoires. Les champs « _Prénom_ » et « _Titre civilité_» sont apparus en plus.



Choisissez dans la liste déroulante s’il s’agit d’un Prospect, Prospect/Client, Client, ni client-ni prospect. Le champs client sera pré-rempli en fonction du choix de modèle pratiqué à l’étape précédente. +
Choisissez si oui ou non, il s’agit d’un fournisseur, le champ fournisseur sera de même pré-rempli en fonction du choix de modèle pratiqué à l’étape précédente. +
Tous les champs agrémentés d’une étoile présentent des listes déroulantes dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil/Configuration/Dictionnaires_. Cliquez sur le nom d’un dictionnaire, par exemple pour rajouter un pays (exemple : la Bordurie) à la liste existante, Pays . Dans le champ code, un code calqué sur ceux déjà présents (exemple : RG) et dans le champ libellé on ajoute Bordurie. Vous retrouvez maintenant ce nom dans la liste des pays. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci.



La possibilité d'envoyer un mail à partir de la fiche du tiers a été implémentée. +
Recherche par code-barres ajoutée.

==== 5.2.2. Modifier un tiers (prospect, client, fournisseur)

Éditez la fiche _prospect/client/fournisseur_ en cliquant sur le bouton « _Modifier_ » pour effectuer un changement.

==== 5.2.3. Supprimer un tiers (prospect, client, fournisseur)

De même pour supprimer la fiche d’un _prospect/client/fournisseur_, cliquez sur le bouton « _Supprimer_ », mais vous pourrez avoir la surprise de voir s’afficher la phrase suivante :« _Impossible de supprimer l'enregistrement car il possède des fils_ ». Soutien des programmeurs à la politique nataliste de la France ? vous interrogerez vous ? Nenni, on appelle fils tout document réalisé au nom de ce tiers ( Propale, Commande, Facture), et il faudra d’abord, si c’est possible supprimer tous ces documents avant de pouvoir supprimer la fiche de ce dernier. +
Une société (Tiers) ne peut avoir qu'un seul état, celui d’exister ou pas. Une société supprimée ne change pas d'état, elle disparaît tout simplement de *Dolibarr*.


==== 5.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
SOCIETE_DISABLE_CUSTOMERS = Désactive les menus et fonctions propres aux clients

SOCIETE_DISABLE_PROSPECTS = Désactive les menus et fonctions propres aux prospects

SOCIETE_DISABLE_STATE =>Ne pas utiliser le champs “état/province”.

THIRDPARTY_NOTCUSTOMERPROSPECT_BY_DEFAULT => Ne pas configurer le statut “Client/Prospect” à “ en activité ” par défaut lors de la création d’un nouveau Tiers à partir du menu “ Nouveau Tiers ”.

THIRDPARTY_NOTSUPPLIER_BY_DEFAULT => Ne pas configurer le statut “Fournisseur” à “ en activité ” par défaut lors de la création d’un nouveau Tiers à partir du menu “ Nouveau Tiers ”.

SOCIETE_SORT_ON_TYPEENT = La liste déroulante de “type de tiers” est triée sur le champ “position” qui apparaît dans le dictionnaire au lieu de l'ordre alphabétique.

THIRDPARTY_DEFAULT_CREATE_CONTACT (Dolibarr 5.0+) => Les tiers créés par défaut sont des individus.

MAIN_THIRDPARTY_CREATION_INDIVIDUAL (Dolibarr <5.0) => Les tiers créés par défaut sont des individus.

THIRDPARTY_DEFAULT_USEVAT =>Lors de la création d'un nouveau tiers, le champ “Assujetti à la TVA” est activé ou désactivé selon la valeur de ce paramètre.

THIRDPARTY_DEFAULT_USELOCALTAX1 => Lors de la création d'un nouveau tiers, le champ “Utiliser la deuxième taxe” est activé ou désactivé selon la valeur de ce paramètre.

THIRDPARTY_DEFAULT_USELOCALTAX2 => Lors de la création d'un nouveau tiers, le champ “Utiliser la troisième taxe” est activé ou désactivé selon la valeur de ce paramètre.


=== 5.3. Contacts/Adresses

==== 5.3.1. Créer un nouveau contact/adresse

Le contact représente une personne physique ou un contact générique vers une personne physique (Exemple: PDG de la multinationale Dolistore, vendeur principal de la boutique Dolistore, président ou trésorier de l'association *Dolibarr*). *Dolibarr* gère de la même manière les tiers particuliers et les entreprises. Aussi, pour les particuliers, on saisira en général un «_ Contact _» qui contient les mêmes caractéristiques que l'objet «_ Société _». +
Pour créer un nouveau contact, cliquez dans le menu de gauche sur _Nouveau contact/adresse_. Renseignez les différents champs, seul le champs Nom/Libellé est obligatoire. Vous pouvez rattacher ce contact à une société «_ Tiers _» présente dans la liste déroulante, mais un contact peut n’être lié à aucun tiers. Plusieurs contacts peuvent être liés à la même société, cela permet par exemple de créer plusieurs adresses de livraison ou de facturation pour la même société. +
L'exemple suivant présente une facture réalisée avechttps://www.dolistore.com/fr/modules/914-Ultimatepdf-7-0.html[https://www.dolistore.com/fr/modules/914-Ultimatepdf-7-0.html[ ]]https://www.dolistore.com/fr/modules/914-Ultimatepdf-7-0.html[Ultimatepdf], vous remarquerez les deux blocs adresse, l'une de livraison, l'autre de facturation.


Tous les champs agrémentés d’une étoile présentent des listes déroulantes dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil>Configuration>Dictionnaires_. Cliquez sur le nom d’un dictionnaire, par exemple pour rajouter un pays (exemple : la Bordurie) à la liste existante, _Pays_ . Dans le champ code, un code calqué sur ceux déjà présents (exemple : RG) et dans le champ _libellé _on ajoute Bordurie. Vous retrouvez maintenant ce nom dans la liste des pays. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci. +
Le choix_ Partagé_ versus_ Privé_ permet de masquer ou non ce contact aux yeux des autres utilisateurs dans la liste des contacts. +
Vous pouvez exclure ce contact de l'envoi de mailing de masse en choisissant “_Oui_” dans la liste déroulante. +
Vous pouvez renseigner la date de naissance du contact et cocher la case _Alerte_ pour être prévenu de l’anniversaire d’un client ou d’un membre de l’association.





==== 5.3.2. Modifier un contact/adresse

Une fois créé, le contact apparaît dans la liste des contacts, ceux ci sont triés en listes de _Prospects-Clients-Fournisseurs-Autres_ 	(_non liés à un tiers_). +
En haut de chaque colonne, des champs de recherche ( _Nom, Prénom, Poste/Fonction, Société, Téléphone, EMail_), permettent de lancer une recherche pour retrouver rapidement l’un d’eux. +
Pour chaque contact, en fin de ligne apparaissent deux icônes, la première pour créer un événement à l’intention de ce contact, l’autre pour importer sa fiche au format _VCard_. +
Le nom du contact est un lien hypertexte permettant d’accéder à sa fiche. C’est en cliquant sur le bouton _Modifier_ que vous pourrez l’éditer pour appliquer vos correctifs ou ajouts.


==== 5.3.3. Supprimer un contact/adresse

Le nom du contact est un lien hypertexte permettant d’accéder à sa fiche. C’est en cliquant sur le bouton _Supprimer_ que vous pourrez le faire disparaître de la liste des contacts.

==== 5.3.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
CONTACT_USE_COMPANY_ADDRESS = Lors de la création d'un contact, permet de pré-remplir les champs avec les coordonnées du Tiers.

=== 5.4. Tags clients/prosp.

==== 5.4.1. Créer un nouveau tag/catégorie de client

La création de tags/catégories permet de filtrer et trier ses clients. +
Il faut au préalable avoir activé le module *Libellés/Catégories*. Pour ce faire, allez dans la partie _Configuration/Outils multi-modules_.


Cliquez sur _Nouveau Tag/catégorie_ dans le menu gauche. Renseignez un nom pour cette catégorie, dans le champ Ref. , une description éventuelle, sélectionnez une couleur, choisissez une catégorie existante dans la liste déroulante si vous voulez que la nouvelle catégorie soit une sous-catégorie de la précédente, et appuyez sur _ajoutez cette catégorie_.

==== 5.4.2. Modifier un tag/catégorie client

Cliquez sur le lien hypertexte que représente le nom de la catégorie choisie, appuyez sur _Modifier _pour en éditer la fiche, et pratiquez vos correctifs.

==== 5.4.3. Supprimer un tag/catégorie client

Cliquez sur le lien hypertexte que représente le nom de la catégorie choisie, appuyez sur _Supprimer _pour supprimer la catégorie, il vous sera demandé une confirmation pour ce faire.

=== 5.5. Tags fournisseurs

==== 5.5.1. Créer un nouveau tag/catégorie fournisseur

Il faut au préalable avoir activé le module *Catégories*. Pour ce faire, allez dans la partie _Configuration/Outils multi-modules_.


La création de catégories permet de filtrer et trier ses fournisseurs. Cliquez sur _Nouveau Tag/catégorie_ dans le menu gauche. Renseignez un nom pour cette catégorie, dans le champ _Ref._ , une description éventuelle, sélectionnez une couleur, choisissez une catégorie existante dans la liste déroulante si vous voulez que la nouvelle catégorie soit une sous-catégorie de la précédente, et appuyez sur _ajoutez cette catégorie_.

==== 5.5.2. Modifier un tag/catégorie fournisseur

Cliquez sur le lien hypertexte que représente le nom de la catégorie choisie, appuyez sur _Modifier _pour en éditer la fiche, et pratiquez vos correctifs.

==== 5.5.3. Supprimer un tag/catégorie fournisseur

Cliquez sur le lien hypertexte que représente le nom de la catégorie choisie, appuyez sur Supprimer pour supprimer la catégorie, il vous sera demandé une confirmation pour ce faire.






























== 6. Produits/

== Services


























=== 6.1. Introduction


Ces modules permettent de gérer un catalogue de produits pour le module _Produits_, ainsi qu'un catalogue de services pour le Module _Services_.

*Configuration* +
Ces modules sont livrés en standard avec la distribution de *Dolibarr*, aussi ils sont déjà installés. +
Pour utiliser ces modules, il vous faut d'abord les activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration – Modules disponibles - Gestion des Produits/Services (PM)_.


Choisissez l'onglet dans lequel apparaît le module puis cliquez sur _Activer_. +
Un pictogramme apparaît à la fin de la ligne du module, cliquez dessus pour accéder à la page de paramétrage spécifique à ce module.

*Modèle de numérotation des produits / services* +
Choisissez ici le modèle qui servira de compteur pour définir le code produit ou le code service aux nouveaux produits et/ou services créés. +
Le modèle Leopard +
Présente un code libre sans vérification. Peut être modifié à tout moment.


Le modèle Elephant +
Avec le modèle Elephant vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque Produit et/ou Service. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès le premier Produit et/ou Service. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le xème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur un Produit et/ou Service créé le 31/03/2017: +
ABC{yy}{mm}-{000000} donnera ABC1703-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY +
IN{yy}{mm}-{0000}-{t} donnera IN0701-0099-A si la société a le type “Responsable Inscripto” avec le code type qui est “A_RI”.



*Paramètres des produits/services*


*Modèle de document pour la fiche produit* +
Activez ici le modèle PDF standard.

*Modèle Générique ODT* +
*Attention !* Ce modèle n'est fonctionnel qu'à partir d'une version de PHP >= 5.2.0. +
Avec ce modèle, vous définissez une liste de répertoires contenant des modèles de document ODT (ces modèles doivent être des fichiers se terminant par .odt ou .ods). Indiquez les chemins complets de répertoire. Ajoutez un retour à la ligne entre chaque répertoire.** **Pour indiquer** **un répertoire du module GED, indiquez** **_DOL_DATA_ROOT/ecm/nomdurepertoireged_. Vous pouvez utiliser OpenOffice ou tout traitement de texte capable de sauvegarder des fichiers au format .odt. Si vous partez d'un exemple, vous les trouverez installés dans les sous-répertoires du répertoire _documents/doctemplates_* .* +
Ensuite, vous ajoutez et éditez vos fichiers modèles ODT avec le contenu qui vous intéresse. Incluez dans votre document les tags des informations que vous voulez voir apparaître. Les tags seront remplacés automatiquement au moment de la génération du document par *Dolibarr*. +
Si vous avez activé le module de Gestion électronique de documents, vous retrouvez le dossier que vous avez créé, ainsi que les fichiers ODT dans la partie _Racine (Arborescence manuelle)_.

*Règle pour les prix clients*

Parmi ces paramètres vous pouvez gérer _plusieurs niveaux de prix par produit/service_, choisissez oui dans la liste déroulante et cliquez sur _Modifier_. Une nouvelle ligne fait alors son apparition qui vous permet de choisir le nombre de prix que vous voulez utiliser pour ce produit/service. Vous avez le choix entre : +
Un seul prix de vente par produit/service (Si vous utilisez un module multi-société, avec le choix “prix unique”, le prix sera aussi le même pour toutes les sociétés si les produits sont partagés entre les environnements), +
Plusieurs niveaux de prix par produit/service ( chaque client est dans un et un seul niveau), +
Prix différents pour chaque client. +
Si vous activez la règle _Prix différents pour chaque client, _vous retrouvez maintenant sous l’onglet « _Prix clients_ » d’une fiche produit, le bouton « Ajouter _prix par client_ ». +
Attendre que vous ayez appuyé sur une touche avant de charger le contenu de la liste déroulante des produits (Cela peut augmenter les performances si vous avez un grand nombre de contacts).

*Prise en charge des produits virtuels*

Vous pouvez gérer la _prise en charge des produits virtuels/packs_, choisissez _oui _dans la liste déroulante et cliquez sur _Modifier_. +
Un produit ou service virtuel est un produit père, constitué d'autres produits. Cette fonction s'active depuis la page de configuration du module Produits ou Service. Elle a pour vocation à définir des “packages” ou “lots” de produits qui permettent de raisonner sur les commandes, factures et stocks avec un seul élément au lieu des n produits constituant le lot. +
Un produit virtuel répond aux règles suivantes: +
Lors de l'ajout d'un produit dans un document (propositions, facture, commande), seule la ligne du produit virtuel père est affichée. +
Le stock des n produits composant le produit virtuel est incrémenté/décrémenté quand le produit virtuel est incrémenté/décrémenté. Par exemple, si vous avez configuré l'augmentation de stock sur validation de commande fournisseur, en validant une commande fournisseur contenant un produit virtuel, vous incrémentez le stock de ce produit mais aussi de tous les sous-produits le constituant. +
Un produit virtuel peut lui même être constitué d'autres produits virtuels qui eux contiennent de vrais produits. +
*_Remarque_*: Il ne s'agit pas d'une fonction de “fabrication/production” où les produits fils composant le produit virtuel seraient consommés du stock pour obtenir un produit père supplémentaire en stock. Ici, les sous-produits composants un produit virtuel ne sont décrémentés du stock qu'au moment de la consommation du produit virtuel père et restent des sous-produits consommables de manière indépendantes des autres, contrairement à ceux d’un module de fabrication, où lorsque qu'un sous-produit est utilisé pour fabriquer un module père, le sous produit est décrémenté du stock même si le produit père n'est pas encore distribué, et souvent ce sous-produit ne peut plus faire le chemin inverse pour revenir en stock.





Attendre que vous ayez appuyé sur une touche avant de charger le contenu de la liste déroulante des produits (Cela peut augmenter les performances si vous avez un grand nombre de produits). +
Vous pouvez utiliser un champ avec auto-complétion pour choisir les produits_ (plutôt qu'une liste déroulante)_, choisissez _oui _dans la liste déroulante et cliquez sur _Modifier_, et vérifiez que AJAX/Javascript soit activé dans les paramètres d'interface utilisateur. Cela est pratique si vous gérez un grand nombre de produits/services. +
Notez que si vous avez un nombre important de produits ou services (>100 000), vous pouvez améliorer les performances en définissant la constante PRODUCT_DONOTSEARCH_ANYWHERE à 1 dans _Configuration->Divers_. La recherche sera alors limitée au début de la chaîne. Vous pouvez choisir le nombre de caractères déclenchant la recherche, soit 1, 2 ou 3.

Configurez le nombre de produits max dans les listes déroulantes (0=aucune limite) +
Vous pouvez choisir la _Visualisation des descriptions produits dans les formulaires (sinon en tant que bulle d'aide)_.

Visualisation des descriptions de produits dans la langue du tiers.



*Onglet Attributs supplémentaires* +
Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les Produits et Services. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire de type date nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : Date de péremption, un code de l'attribut : _perem (uniquement des caractères alphanumériques et en minuscule sans espace)_, un type : date, nous enregistrons. Maintenant si nous créons un nouveau produit, nous retrouvons un champ date sur sa fiche.

*Définitions* +
Un produit *Dolibarr *est un bien à gérer, soit parce qu'il caractérise un objet proposé à des clients, soit parce qu'il caractérise un objet obtenu auprès de fournisseurs. Il s'agit de biens matériels, contrairement aux Services. +
Un produit répond, en résumé, aux règles suivantes: +
✔ Un produit peut se stocker dans un entrepôt (seuls les produits d'ailleurs apparaissent dans le module Stock. Les services n'y apparaissent pas). +
✔ Un produit peut se livrer (seuls les produits d'ailleurs apparaissent dans le module _Expedition_. Les services n'y apparaissent pas. Ces derniers sont réalisés ou non, mais pas livrés). +
✔ Un produit est en général un bien matériel. Sa valeur se déprécie souvent avec le temps (Un produit d’occasion vaut moins que le même produit neuf).

Produits virtuels +
Un produit ou service virtuel est un produit père, constitué d'autres produits. Cette fonction s'active depuis la page de configuration du module Produits ou Service. Elle a pour vocation à définir des « packages » ou « lots » de produits qui permettent de raisonner sur les commandes, factures et stocks avec un seul élément au lieu des n +
produits constituant le lot. +
Un produit virtuel répond aux règles suivantes : +
✔ Lors de l'ajout d'un produit dans un document (propositions, facture, commande), seule la ligne du produit virtuel père est affichée. +
✔ Le stock de produits composant le produit virtuel est incrémenté/décrémenté quand le produit virtuel est incrémenté/décrémenté. +
✔ Un produit virtuel peut lui même être constitué d'autres produits virtuels qui eux contiennent de vrais produits. +
*Remarque*: Il ne s'agit pas d'une fonction de « fabrication/production » où les produits fils composant le produit virtuel seraient consommés du stock pour obtenir un produit père supplémentaire en stock. Ici, les sous-produits composant un produit virtuel ne sont décrémentés du stock qu'au moment de la consommation du produit virtuel et restent des sous-produits consommables de manière indépendante des autres, contrairement à celui d'un module de fabrication, où lorsqu'un sous-produit est utilisé pour fabriquer un module père, le sous produit est décrémenté du stock même si le produit père n'est pas encore distribué. +
Souvent ce sous-produit ne peut plus faire le chemin inverse pour revenir en stock.

=== 6.2. Produits

==== 6.2.1. Créer un nouveau produit

Aller dans le menu _Produits>Nouveau produit_, Saisissez les informations. +
Les champs _Réf, Libellé, État (Vente), État (Achat)_ sont obligatoires. +
Une fois les champs désirés renseignés, cliquez sur _Créer_.

 
Depuis la version précédente de Dolibarr, la façon de rattacher une image au produit a changé. Il faut passer par l’onglet « _Fichiers joints_ », et utiliser la fonctionnalité « _Ajouter un fichier/document_ »




Une fois votre produit créé, vous le retrouvez dans la liste des produits, accessible par le lien dans le menu gauche _Produits>Liste_. En cliquant sur notre produit dans la liste, nous accédons à sa fiche produit. Celle ci affiche des onglets plus ou moins nombreux selon le nombre de modules activés. +
Nous avons dans notre exemple activé les modules _Catégories, Stock, Codes-barres_ et _Marges_. +
Recherche par code-barres ajoutée.

*Astuce *: Vous pouvez rajouter ou modifier un taux de TVA par vous même, en vous rendant à l’adresse suivante : _Accueil/Configuration/Dictionnaires_. Cliquez sur le nom du dictionnaire « _Taux de TVA ou de taxes de ventes _». Pour rajouter un taux, celui à 20% par exemple, sélectionnez le pays ( ici la France en l’occurrence), le taux ( 20%), NPR à Non ( il s'agit de la TVA non perçue récupérable utilisée dans les DOM), renseignez une note pour le retrouver ( VAT rate 20) et cliquez sur le bouton « _Ajouter_ ».



Vous pouvez aussi changer en masse le taux de tva de votre base de produits en allant dans “Outils d’administration>Changement de TVA en masse”


==== 6.2.2. Modifier un produit

Éditez la fiche produit en cliquant sur le bouton _ Modifier _pour effectuer un changement.

==== 6.2.3. Supprimer un produit

De même pour supprimer la fiche d’un produit, cliquez sur le bouton _Supprimer_

==== 6.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

MAIN_PRODUCT_DISABLE_CUSTOMCOUNTRYCODE => Éviter que le code personnalisé et le pays d'origine soient définis comme description du produit lorsqu'ils sont ajoutés à Proposition commerciale/ Commande/ Facture.

PRODUCT_ADD_TYPE_IN_DOCUMENTS = Ajoute le texte « _Produit _» ou « _Service _» devant les lignes détails sur les PDF générés.

PRODUCT_SHOW_WHEN_CREATE = Vieille option non supportée (pose problème) qui permettait de saisir ses lignes lors de la première page de création de facture ou propale.

PRODUCT_DONOTSEARCH_ANYWHERE = Si la recherche Ajax est activée, il est possible de rechercher les produits avec les infos tapées n'importe où dans la référence ou le libellé. Avec cette option la recherche se fait uniquement sur le début, ce qui est beaucoup plus rapide lorsque le nombre de produits est très important.

PRODUIT_DESC_IN_LIST = Affiche la description longue du produit/service au sein des listes. Utilisé pour les vues listes des contrats de services uniquement pour l'instant.

FOURN_PRODUCT_AVAILABILITY = Dans la page de prix des fournisseurs des produits, active la fonction de délai de disponibilité des produits pour le fournisseur.

PRODUIT_MULTIPRICES_LABELx (where x = 1,2,...) => Lorsque le mode option pour paramétrer les prix est PRODUIT_MULTIPRICES (n prix différents par produit en fonction du niveau client), cette option forcera une étiquette au niveau x. La valeur doit être une clé. Si la clé est trouvée dans les fichiers de traduction, elle sera remplacée par la valeur traduite.

PRODUIT_PDF_MERGE_PROPAL => Activer le module Propal à fusionner les PDF des produits.

PRODUCT_USE_OLD_PATH_FOR_PHOTO => On demande à dolibarr de rechercher dans l’ancien emplacement (avant la 3.7) où les photos étaient stockées.

PRODUCT_USE_UNITS => Active les unités à partir du dictionnaire sur la fiche produit / service.

PRODUIT_MULTIPRICES_USE_VAT_PER_LEVEL => Lorsque l'option d'utilisation du prix par niveau/segment est activée, cela permet également de définir une TVA dédiée pour chaque niveau de prix.

MAIN_DIRECT_STATUS_UPDATE => Vous permet de changer le statut du produit (en vente/ pas en vente pour l'achat/pas pour l'achat) directement sur la page du produit via un bouton marche/arrêt. Cela peut être pratique pour ceux qui ont besoin de désactiver rapidement certains statuts de produits sans avoir à passer par la page du produit d'édition individuellement. Peut également être très utile s'il est utilisé comme filtre sur la liste de recherche de produits et de produits. v4.0 +.

PRODUCT_CHARGES => Ajoute un champ supplémentaire pour les frais ad hoc à l'étape du prix d'achat du produit. Le prix de revient est ensuite calculé avec le prix du fournisseur + frais si définis. Utile pour les coûts supplémentaires pour un produit ou certains frais de livraison du produit.

PRODUCT_MAX_VISIBLE_PHOTO => Afficher un nombre maximum de photos de produits (sous forme de vignettes) sur la carte principale du produit. Par exemple, si vous définissez cette constante sur “5”, les cinq premières photos de produit figurant sur la carte produit s'affichent.

PRODUCT_MAX_LENGTH_COMBO => limite la longueur du label affiché lors de l'ajout de lignes dans les propositions/factures/commandes.

=== 6.3. Stock

==== 6.3.1. Configurer le module stock

La gestion du stock permet de suivre des états de stock et des correctifs pour chaque produit, éventuellement partagés entre plusieurs entrepôts. +
Ce module est livré en standard avec la distribution de Dolibarr, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, allez sur la page _Accueil - Configuration - Modules_. +
Vous trouverez ce dernier dans la famille Gestion produits. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :


La page de configuration vous permet de choisir de Créer un stock/entrepôt propre à l'utilisateur automatiquement à la création de cet utilisateur : réglez à oui ou non l'option. +
La page de configuration vous permet de choisir une option, déterminant à quel moment d'une commande ou d'une facture le stock doit être altéré.



Règle de gestion des décrémentations de stock :

* Décrémente les stocks physiques sur validation des factures/avoirs clients (*Attention !*, dans cette version, c'est toujours dans le premier entrepôt que se fait l'ajustement)
* Décrémente les stocks physiques sur validation des commandes clients (*Attention !*, dans cette version, c'est toujours dans le premier entrepôt que se fait l'ajustement)
* Décrémente les stocks physiques sur validation des expéditions 
Règle de gestion des incrémentations de stock :

* Incrémente les stocks physiques sur validation des factures/avoirs fournisseurs (*Attention !*, dans cette version, c'est toujours dans le premier entrepôt que se fait l'ajustement)
* Incrémente les stocks physiques sur approbation des commandes fournisseurs (*Attention !*, dans cette version, c'est toujours dans le premier entrepôt que se fait l'ajustement)
* Incrémente les stocks physiques sur ventilation manuelle de la réception des commandes fournisseurs dans les entrepôts : Si vous recevez la commande et qu’elle n’est que partielle, qu’il manque des produits, indiquez qu’elle est réceptionnée partiellement, puis allez dans l’onglet « réception vers stock » et ventilez ce que vous avez reçu dans les bons stocks. Quand vous avez tout reçu et tout ventilé saisissez une réception totale.
Règle de gestion du réapprovisionnement des stocks :

* Utiliser le stock théorique à la place du stock physique.
==== 6.3.2. Créer un nouvel entrepôt

La création d’un entrepôt ou zone de stockage est la première étape obligatoire à la gestion du stock. On peut créer un entrepôt via l’onglet général _Produits/Services_ et le menu de gauche Stock puis _Nouvel entrepôt_.


La seule information obligatoire est la référence _Réf_. Il faut ensuite déterminer si l'entrepôt est en fonctionnement ou pas (_ouvert/fermé_). +
Un entrepôt fermé ne peut être utilisé au travers des autres outils de *Dolibarr*. C'est donc un bon moyen de préparer un entrepôt (en le remplissant) avant de le mettre en fonction, ou de le bloquer momentanément pendant un inventaire. +
Étape longue mais nécessaire, il s'agit ensuite, pour chaque produit, d'utiliser son onglet stock pour lui définir un stock de base, dans chaque entrepôt. +
Selon l'option choisie dans la configuration du module, une modification prend place au moment de la commande, au moment de la livraison, au moment de la facture, etc. Un mouvement de stock est alors enregistré selon les critères de _stockage/déstockage_ choisis. +
Si l’on désire apporter des correctifs au stock existant (vol, disparition, vieillissement, …), il est possible de le faire directement via l’onglet _stock_ de la fiche produit. +
Il est possible d'obtenir une liste détaillée des produits et mouvements enregistrés dans un entrepôt via un clic sur le nom de l'entrepôt dans la liste des entrepôts.

==== 6.3.3. Modifier un entrepôt

Dans le menu de gauche, cliquez sur liste, puis sur le lien hypertexte que représente le nom de l’entrepôt choisi, appuyez sur _Modifier _pour en éditer la fiche, et pratiquez vos correctifs.

==== 6.3.4. Supprimer un entrepôt

Cliquez sur le lien hypertexte que représente le nom de l’entrepôt choisi, appuyez sur _Supprimer _pour supprimer l’entrepôt, il vous sera demandé une confirmation pour ce faire.

==== 6.3.5. Réapprovisionnement

Cet écran permet de voir les produits avec un stock physique inférieure à la quantité minimale désirée (ou à la quantité du seuil d'alerte si la case « _Alertes seulement_ » est cochée) et propose de créer des commandes fournisseurs pour compléter la différence



Après sélection des références que nous voulons réapprovisionner, nous cliquons sur le bouton « _Créer commandes_ ».


Nos commandes sont présentes au format brouillon, nous pouvons cliquer sur une référence pour aller valider la commande correspondante.



Nous passons maintenant sur l'onglet « _Réception vers stocks_ » pour faire la réception de la commande fournisseur. Après sélection de l'entrepôt de réception, nous cliquons sur le bouton « _Ventiler_ ».



Si nous allons sur la fiche de l'entrepôt correspondant, sur l'onglet « _Mouvement de stock_ », nous apercevons la ligne de mouvement avec le libellé « _Réception de la commande fournisseur xxx _», la référence et le libellé du produit, et le nombre d'unités incrémentées.

==== 6.3.6. Transfert de stock

Sélectionnez un produit, une quantité à transférer, un entrepôt source et destination et cliquez sur « _Sélectionner_ ». Une fois tous les mouvements choisis, cliquez sur « _Enregistrer transferts_ ».

==== 6.3.7. Prix moyen pondéré (PMP)

Rendez vous sur l'onglet Stock du produit, cliquez sur le bouton « _Corriger le stock_ » et là renseignez le champ « _Prix d'achat unitaire_ »


==== 6.3.8. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

STOCK_SUPPORTS_SERVICES = Les services peuvent être ajoutés/supprimés des stocks.

SUPPLIER_ORDER_DISABLE_STOCK_DISPATCH_WHEN_TOTAL_REACHED => Désactiver la répartition des stocks lorsque le total prévu a déjà été reçu.

STOCK_CALCULATE_ON_BILL => STOCK THEORIQUE = STOCK PHYSIQUE + STOCK EN COMMANDE


=== 6.4. Code-barres

==== 6.4.1. Configurer le module Code-barres

Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration – Modules_.



Vous trouverez ce dernier dans la famille _Outils multi-modules_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :

*Modèles d'encodage des codes-barres* +
Dans la page d'administration, choisissez vos modèles d'encodage des codes-barres ( les plus utilisés sont code-barres de type EAN13 et code-barres de type ISBN. Les QRcodes sont maintenant gérés ) en positionnant la liste déroulante du modèle sur « _Moteur interne_ » vous devez voir apparaître un exemple de code-barres. Le moteur interne de certains types de codes-barres nécessitera l'installation de l'outil genbarcode sur votre serveur. A récupérer http://www.ashberg.de/php-barcode/download/#genbarcode[ici] .



*Autres options* +
Puis paramétrez les Type de code-barres utilisé par défaut pour les produits ou les Tiers dans les autres options. *Attention!* vous aurez une alarme qui s'affichera si vous n'avez pas installé l'outil genbarcode, ou si son chemin d'accès n'est pas le bon : «_ Fichier_ +
*_/usr/local/bin/genbarcode_*_ introuvable (Mauvais chemin, permissions incorrectes ou accès interdit par le paramètre PHP openbasedir ou safe_mode)_ » . Ceci est sans conséquence pour les modèles qui n'utilisent que PHP. Choisissez par exemple EAN13 dans la liste déroulante pour _Type de code-barres utilisé par défaut pour les produits_ et pour _Type de code-barres_ _utilisé par défaut pour les tiers_ puis cliquez sur « _Modifier _».




*Gestionnaire pour la génération automatique de numéro de code-barres (Produit)* +
Renvoie un numéro personnalisable selon un masque à définir.* Attention !* pour EAN13, ne renseignez que 12 chiffres, le 13ème est automatiquement calculé par le moteur, c’est la clef de contrôle (Checksum). Par exemple : *300999{000000} *300 étant le code pays de la France, 999 le code entreprise et les 6 zéros entre crochets, le compteur sur 6 chiffres incrémenté à chaque création de produit. 

==== 6.4.2. Utiliser les codes-barres

Une fois l'étape de configuration terminée, vous verrez apparaître un champ « _code-barres_ » sur les écrans en fonction de votre choix (écran de tiers et/ou de produits). Vous pouvez alimenter à votre guise ce champ avec la valeur du code-barres, en utilisant le clavier ou un scanner de code-barres. +
Pour l’utilisation du clavier, il suffit d'entrer le nombre représenté dans le code-barres par le clavier. Cela suppose que ce nombre ait été imprimé et soit visible sous le code-barres. Ce sera le cas si vous imprimez les étiquettes de code-barres à l'aide de la fonction “ _Imprimer code-barres_ “ fournie avec *Dolibarr 3.6*+ (menu *Outils*). 



Pour l’utilisation d’un scanner de code-barres :  +
Si le numéro de code-barres n'est pas visible, ou si vous ne voulez pas perdre de temps à taper tous les chiffres, vous pouvez utiliser un scanner de code-barres matériel. Pour être compatible avec *Dolibarr*, votre scanner de code-barres doit prendre en charge l' “ émulation de clavier “ . Lorsque vous numérisez le code-barres, c'est comme lorsque vous tapez le numéro à partir du clavier. Pour trouver un scanner de code-barres supportant une telle émulation (c'est le cas de la plupart mais pas tous), vous pouvez regarder la spécification technique du lecteur. Le Scanner doit faire apparaître le terme : 

* « _HID_ » ( pour Human Interface Device )
ou

* Interface « _Clavier Wedge_ » ou « _Wedge _»
Exemple:

* Motorola DS4208
* Datalogic QW2120

==== 6.4.3. Utiliser les Codes-barres avec UltimatePdf

Le module *UltimatePdf *permet d’Afficher le code-barres du tiers soit en haut ou bien en bas de vos propositions commerciales, commandes et/ou factures suivant les options cliquées dans l’administration du module.

=== 6.5. Catégories

==== 6.5.1. Créer une nouvelle catégorie

Le module catégorie permet de gérer des catégories sur les tiers clients, tiers fournisseurs ou les produits. +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration - Modules_ +
Le module se trouve dans l’onglet des _Modules complémentaires_, dans la famille _Outils multi-modules_, cliquez sur _Activer_. Le module est alors fonctionnel, sans autre configuration à réaliser. +
On peut créer une catégorie via l’onglet général _Produits/Services_ et le menu de gauche _Catégories_ puis _Nouvelle catégorie_. La seule information obligatoire est la référence _Réf_.

==== 6.5.2. Modifier une catégorie


==== 6.5.3. Supprimer une catégorie

Cliquez sur le lien hypertexte que représente le nom de la catégorie choisie, appuyez sur _Supprimer _pour supprimer la catégorie, il vous sera demandé une confirmation pour ce faire.

=== 6.6. Expéditions

==== 6.6.1. Configurer le module expédition

Ce module est livré en standard avec la distribution de Dolibarr, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, allez sur la page Accueil - Configuration - Modules. +
Vous trouverez ce dernier dans la famille Gestion de la relation client (GRC). Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module:

* Prise en charge des bons d'expédition/livraison vers le client
* Prise en charge des bons de réception client

Dans la plupart des cas, ce sont les bons d’expédition/livraison (liste des produits à envoyer par le transporteur) qui font office de bons de réception et qui sont signés par le client. La gestion des bons de réception fait donc double emploi et sera rarement activée.

*Modèles de numérotation des expéditions* +
Vous avez le choix entre deux types de Modèles de numérotation des expéditions :

* Ribera : Renvoie un numéro personnalisable selon un masque à définir.
Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque expédition. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première expédition. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir dictionnaires-types de sociétés). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème Expédition du tiers LaCompanie faite le 31/03/2017: +
ABC{yy}{mm}-{000000} donnera ABC1703-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY

* Safor : Renvoie le numéro sous la forme *SHyymm-nnnn* où *yy* est l'année, *mm* le mois et *nnnn* un compteur séquentiel sans rupture et sans remise à 0.



*Modèle du bordereau d'expédition* +
A votre choix, plusieurs types de Modèles de bordereau d'expédition : les modèles _Merou_ et _Rouget_ en standard et _ultimate_shipment_ si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[_Ultimatepdf]_. +
Le bouton d’état doit être vert pour que les modèles soient utilisables, l’un d’eux sera utilisé par défaut.




*Autres options* +
Vous pouvez placer une mention complémentaire sur les bons d’expéditions (Il n’y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte). +
Vous pouvez aussi intégrer un filigrane dans le document brouillon.

*Modèles de numérotation des bons de réception client* +
Vous avez le choix entre deux types de Modèles de numérotation des bons de réception client :







* Jade : Renvoie le numéro sous la forme BLyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0.
* Saphir : Renvoie un numéro personnalisable selon un masque à définir.

Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque livraison. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première livraison. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir dictionnaires-types de sociétés). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème livraison du tiers LaCompanie faite le 31/03/2017: +
ABC{yy}{mm}-{000000} donnera ABC1703-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY


*Modèle de bon de réception client* +
A votre choix, plusieurs types de Modèles de bon de réception client : le modèle _typhon _en standard et _ultimate_receipt_ si vous avez installé le module http://www.dolistore.com/lang-fr/modeles-de-documents/338-Ultimatepdf-3-5.html[_Ultimatepdf]_. +
Le bouton d’état doit être vert pour que les modèles soient utilisables, l’un d’eux sera utilisé par défaut.




*Autres options* +
Vous pouvez placer une mention complémentaire sur les bons d’expéditions (Il n’y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte).

==== 6.6.2. Créer une nouvelle expédition

Rendez vous sur la page Produits/services et dans le menu de gauche sur l’onglet _Expéditions_. +
Sur la partie droite de la page, vous trouverez toutes les commandes en instance sous le titre « _Expéditions à valider_ ». +
Sélectionnez l’une d’elle en cliquant dessus, et en ouvrant l’onglet Expéditions/réceptions , choisissez l’entrepôt dans la liste déroulante, et cliquez sur le bouton _nouvelle expédition._ +
Renseignez la date de livraison prévue, n’oubliez pas la méthode de livraison, choisissez la quantité à expédier et cliquez sur créer . Maintenant, validez et confirmez. Votre bordereau d’expédition apparaît maintenant sous l’intitulé « _Expéditions et réceptions pour cette commande_ ». +
Vous pouvez à partir de cette page utiliser le bouton _envoyer par mail_, ou bien _créer facture_, actions qui parlent d’elles mêmes.

==== 6.6.3. Modifier une expédition

On ne peut pas modifier une expédition, il faut la supprimer d’abord, avant d’en créer une nouvelle.

==== 6.6.4. Supprimer une expédition

Appuyez sur _Supprimer _pour supprimer l'expédition, il vous sera demandé une confirmation pour ce faire.

==== 6.6.5. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
DATE_LIVRAISON_WEEK_DELAY = Incrémente automatiquement la date de livraison du nombre de semaines déclarées à la création d'une propale ou d'une commande à partir de la date de création. +
STOCK_SUPPORTS_SERVICES = Permet d’intégrer des services dans une expédition. Pratique pour ceux qui associent un service à un produit.

=== 6.7. Services

==== 6.7.1. Créer un nouveau service

Aller dans le menu Services - Nouveau service, Saisissez les informations. +
Les champs _Réf, Libellé, État (Vente), État (Achat)_ sont obligatoires. +
Une fois les champs désirés renseignés, cliquez sur _Créer_.

==== 6.7.2. Modifier un service

Éditez la fiche service en cliquant sur le bouton _Modifier _pour effectuer un changement.

==== 6.7.3. Supprimer un service

De même pour supprimer la fiche d’un service, cliquez sur le bouton _Supprimer_.

==== 6.7.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans Accueil/Configuration/Divers. Voici ces constantes: +
SERVICE_ARE_ECOMMERCE_200238EC = Si cette option est activée, les services sont traités comme des e-Services selon la directive EU Council Directive 2002/38/EC +
(http://ec.europa.eu/taxation_customs/taxation/vat/traders/e-commerce/article_1610_en.htm[http://ec.europa.eu/taxation_customs/taxation/vat/traders/e-commerce/article_1610_en.htm]). Le taux de TVA par défaut est basé sur le pays d'achat et non de vente pour les ventes B to C. +
STOCK_SUPPORTS_SERVICES = Permet d’intégrer des services dans une expédition. Pratique pour ceux qui associent un service à un produit.



== 7. Commercial
































=== 7.1. Introduction


L’onglet Commercial regroupe les modules :

* Propositions commerciales (Pour la Gestion des devis/propositions commerciales)
* Commandes clients (Pour la Gestion des commandes clients)
* Commandes fournisseurs (pour la Gestion des commandes fournisseurs)
* Contrats/Abonnements (pour la gestion des contrats et des abonnements)
* Interventions (pour la Gestion des interventions chez les tiers)
* Propositions commerciales fournisseurs.

*Configuration* +
Ces modules sont livrés en standard avec la distribution de *Dolibarr*, aussi ils sont déjà installés.

* Vous trouverez le module Propositions commerciales dans la famille _Gestion de la relation client (GRC)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique









*Modèles de numérotation des propositions commerciales*

Choisissez ici le modèle de numérotation qui servira pour vos propositions commerciales, vous avez le choix entre le modèle Marbre qui renvoie le numéro sous la forme PRyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
(exemple PR1101-0001), ou bien le modèle Saphir qui renvoie un numéro personnalisable selon un masque à définir. +
Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque Proposition commerciale. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première Proposition commerciale. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le xème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou {y} année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir dictionnaires-types de sociétés). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème Proposition commerciale du tiers _LaCompanie_ faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY




*Modèles de documents de propositions commerciales* +
Puis choisissez votre modèle de documents de propositions commerciales en cliquant sur le bouton d’activation qui doit passer au vert. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une propale. Vous pouvez choisir un modèle par défaut, ou bien en créer un à l’aide d’ODT templates qui permet la génération depuis des modèles OpenDocument (Fichier .ODT OpenOffice, KOffice, TextEdit...). +
Si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[ultimatepdf] vous devrez activer ici un de ses modèles de propale : _ultimate_propal1_, _ultimate_propal2_.

*Autres options* +
Vous pouvez ici configurer un délai de validité par défaut (en jours) pour vos propales, ajouter une mention complémentaire sur les propositions ou bien ajouter un filigrane sur les brouillons de propositions.

*Chemin d'accès aux documents* +
Pour information, le chemin d’accès aux documents du module ( Il s'agit d'un chemin au sens UNIX ) : +
Par exemple : Répertoire _/home/httpd/vhosts/domaine.fr/domains/compta.domaine.fr/documents/propale_

*Attributs supplémentaires* +
Dans l’onglet « _Attributs supplémentaires_ » de la configuration du module _Propositions Commerciales_ définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Propositions commerciales. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).

*Attributs supplémentaires (lignes)* +
Dans l’onglet « _Attributs supplémentaires (lignes)_ » de la configuration du module _Propositions Commerciales_ définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Propositions Commerciales. La liste de Type s'est fortement enrichie depuis Dolibarr 3.3 (Chaîne, texte long, numérique, décimal, date, date et heure, Booleen(checkbox), Prix, Téléphone, Email, +
Liste de sélection, Liste issue d'une table, Séparateur de champ, Case à cocher, Case d'option). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire _Liste de sélection_, nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Au choix_, un code de l'attribut : _choix_, un type : _Liste de sélection_, la liste doit être de la forme clef -> valeur : par exemple 1,valeur1..., nous enregistrons. +
Chaque fois que vous ajoutez une ligne dans la Proposition Commerciale, celle ci sera doublée par une ligne affichant « Au choix » et en face la valeur de votre choix dans la liste déroulante.

* Vous trouverez le module _Commandes clients_ dans la famille _Gestion de la relation client (GRC)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique.



*Modèles de numérotation des commandes* +
Choisissez ici le modèle de numérotation des commandes qui servira pour vos commandes, vous avez le choix entre le modèle _Marbre_ qui renvoie le numéro sous la forme COyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0 (exemple CO1101-0001), ou bien le modèle _Saphir _qui renvoie un numéro personnalisable selon un masque à définir. +
Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque commande. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première commande. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le xème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir _dictionnaires-types de sociétés_). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème commande du tiers _LaCompanie_ faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY .

*Modèles de document des commandes* +
Puis choisissez votre modèle de documents de commande en cliquant sur le bouton d’activation qui doit passer au vert. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une commande. +
Vous trouverez ici un modèle de facture proforma. Vous pouvez choisir un modèle par défaut, ou bien en créer un à l’aide d’ODT templates qui permet la génération depuis des modèles OpenDocument (Fichier .ODT OpenOffice, KOffice, TextEdit...). +
Si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[ultimatepdf] vous devrez activer ici un de ses modèles de commande : _ultimate_order1, ultimate_order2, ultimate_proforma1, ultimate_proforma2_.

*Autres options* +
Vous pouvez ajouter une mention complémentaire sur les commandes (*Attention !* Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte) , ou bien ajouter un filigrane sur les brouillons de commandes (aucun si vide).

*Attributs supplémentaires* +
Dans l’onglet « _Attributs supplémentaires_ » de la configuration du module _Commandes_ définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Commandes. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).

*Attributs supplémentaires (lignes)* +
Dans l’onglet « _Attributs supplémentaires (lignes)_ » de la configuration du module _Commandes _définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Commandes. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire _Liste de sélection_, nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Au choix_, un code de l'attribut : _choix_, un type : _Liste de sélection_, la liste doit être de la forme clef -> valeur : par exemple 1,valeur1..., nous enregistrons. +
Chaque fois que vous ajoutez une ligne dans la commande, celle ci sera doublée par une ligne affichant « _Au choix_ » et en face la valeur de votre choix dans la liste déroulante.

* Vous trouverez le module _Fournisseur_ dans la famille _Gestion produits_. Le pictogramme d’état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d’accéder à la page de paramétrage spécifique.


*Onglet Commande fournisseur*

*Modèles de numérotation des commandes* +
Choisissez ici le modèle de numérotation des commandes qui servira pour vos commandes fournisseurs, vous avez le choix entre le modèle _Muguet _qui renvoie le numéro sous la forme CFyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0 (exemple CF1301-0001), ou bien le modèle _Orchidee _qui renvoie un numéro personnalisable selon un masque à définir.

Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées : +
*{000000}* correspond à un numéro qui sera incrémenté à chaque commande. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première commande. +
*{000000@x} *idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir _dictionnaires-types de sociétés_). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème commande du tiers _LaCompanie _faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY.

*Modèles de document des commandes* +
Puis choisissez votre modèle de documents de commande en cliquant sur le bouton d’activation qui doit passer au vert. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une commande. Vous pouvez choisir un modèle par défaut. Si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[_ultimatepdf ]_vous devez activer ici son modèle de commande : _ultimate_supplierorder_.

*Autres options* +
Vous pouvez ajouter une mention complémentaire sur les Commandes (*Attention !* Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte).

*Attributs supplémentaires (commandes)* +
Dans l’onglet « _Attributs supplémentaires _» de la configuration du module Commandes définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Commandes. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, numérique, décimal, date, date et heure, Booléen (Case à cocher), Prix, Téléphone, Email, Liste de sélection, Liste issue d'une table, Séparateur de champ, Case à cocher, Bouton radio).

*Onglet Facture fournisseur*

*Modèles de numérotation des factures fournisseur* +
Choisissez ici le modèle de numérotation des factures qui servira pour vos factures fournisseurs, vous avez le choix entre le modèle _Cactus _qui renvoie le numéro sous la forme SIyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0 (exemple SI1301-0001), ou bien le modèle _Tulip_ qui renvoie un numéro personnalisable selon un masque à définir.

Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque facture. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première facture. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir _dictionnaires-types de société_s). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème facture du tiers _LaCompanie_ faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY.


*Modèles de document de factures* +
Puis choisissez votre modèle de documents de factures en cliquant sur le bouton d’activation qui doit passer au vert. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une facture. Vous pouvez choisir un modèle par défaut. +
Si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[_ultimatepdf]_ vous devez activer ici son modèle de commande : _ultimate_supplierinvoice_.

*Autres options* +
Vous pouvez ajouter une mention complémentaire sur les factures (*Attention !* Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte).

*Attributs supplémentaires (factures)* +
Dans l’onglet « _Attributs supplémentaires_ » de la configuration du module _Factures_ définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérez sur les Factures. +
La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).

* Vous trouverez le module _Contrats_ dans la famille _Gestion de la relation client (GRC)_. Le pictogramme d’état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d’accéder à la page de paramétrage spécifique.


*Modèles de numérotation des contrats* +
Choisissez votre modèle de contrat, vous avez le choix entre le modèle _Magre_ qui renvoie un numéro personnalisable selon un masque à définir et le modèle _Serpis_ qui renvoie le numéro sous la forme CTyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées : +
*{000000}* correspond à un numéro qui sera incrémenté à chaque contrat. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès le premier contrat. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir _dictionnaires-types de sociétés_). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur le 99 ème contrat du tiers _LaCompanie_ fait le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY

* Vous trouverez le module _Interventions_ dans la famille _Gestion de la relation client (GRC)_. Le pictogramme d’état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d’accéder à la page de paramétrage spécifique.




*Modèles de numérotation des fiches d’intervention* +
Choisissez votre modèle de fiche d'intervention, vous avez le choix entre le modèle _Arctic_ qui renvoie un numéro personnalisable selon un masque à définir et le modèle _pacific_ qui renvoie le numéro sous la forme FIyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
Vous pouvez saisir tout masque de numérotation. Dans ce masque, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque intervention. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première intervention. +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence {yy}{mm} ou {yyyy}{mm} est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir _dictionnaires-types de sociétés_). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème intervention du tiers _LaCompanie_ faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY

*Modèle de document des fiches d'intervention* +
Puis choisissez votre modèle de documents de factures en cliquant sur le bouton d’activation qui doit passer au vert. Le modèle Soleil est le Modèle de fiche d'intervention standard. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une facture. Vous pouvez choisir un modèle par défaut. +
Si vous avez installé le module http://www.dolistore.com/lang-fr/modeles-de-documents/338-Ultimatepdf-3-5.html[_ultimatepdf]_ vous devez activer ici son modèle de commande : _ultimate_inter_.

*Autres options* +
Vous avez la possibilité d’insérer une mention complémentaire sur les fiches d'intervention ( *Attention !* Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte), ainsi qu’un filigrane sur les brouillons des fiches d'intervention (aucun si vide). +
Possibilité d'afficher les produits sur la fiche d'intervention (pour les interventions générées à partir des commandes).

*Attributs supplémentaires* +
Dans l’onglet « _Attributs supplémentaires_ » de la configuration du module _d'intervention _définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les interventions. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, numérique, décimal, date, date et heure, Booléen (Case à cocher), Prix, Téléphone, Email, Liste de sélection, Liste issue d'une table, Séparateur de champ, Case à cocher, Bouton radio).

* Vous trouverez le module _Demandes de tarifs fournisseur _dans la famille _Gestion de la relation fournisseur (SRM)_. Le pictogramme d’état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d’accéder à la page de paramétrage spécifique.


*Modèles **de documents des demandes de prix* +
Choisissez votre modèle de document de demande de prix, vous avez le choix entre le modèle _Aurore _et__ __si vous avez installé le module https://www.dolistore.com/fr/modules/823-Ultimatepdf-6-0-Support-technique.html[_ultimatepdf]_ vous devez activer ici son modèle : _ultimate_supplierproposal_.

=== 7.2. Propositions commerciales

==== 7.2.1. Créer une nouvelle proposition

Sous le chapeau Propositions commerc. cliquez sur le lien Nouvelle proposition. +
Le champ référence est incrémenté et renseigné automatiquement conformément au modèle de numérotation choisi précédemment dans la configuration du module. Le champ suivant ( non obligatoire ) permet de renseigner une référence plus parlante pour vous. Cliquez sur le lien du Tiers désiré dans la liste des Clients, car une proposition passe obligatoirement par le choix d’un Tiers. +
Tous les champs agrémentés d’une étoile présentent des listes déroulantes dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil/Configuration/Dictionnaires_. Cliquez sur le nom d’un dictionnaire, par exemple pour rajouter un pays (exemple : la Bordurie) à la liste existante, Pays . Dans le champ code, un code calqué sur ceux déjà présents (exemple : RG) et dans le champ libellé on ajoute Bordurie. Vous retrouvez maintenant ce nom dans la liste des pays. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci. +
Une fois les champs renseignés, cliquez sur le bouton _créer brouillon_. +
Ajoutez vos offres : Produit et/ou service, et validez.

==== 7.2.2. Clôturer une proposition

Cliquez sur le bouton Clôturer. Dans la liste déroulante _Clôturer au statut_ choisissez en fonction de la situation « _signée (à facturer)_ » ou bien «_ non signée (fermée)_ », validez. +
*Astuce !* Pour ceux qui ont pour cycle habituel de fonctionnement : +
« _Propale/commande/factur_e », vous devez activer le module _Workflow_ dans _Configuration des modules/Modules complémentaires/outils multi-modules_, puis dans la configuration du module _Workflow_ vous activez l'option « _Créer une commande client automatiquement à la signature d'une proposition commerciale_ » .


Maintenant lorsque vous cliquez sur le bouton _Clôturer_ et choisissez dans la liste déroulante _Clôturer au statut signée (à facturer)_, vous avez un bouton _Créer commande_ qui apparaîtra.


==== 7.2.3. Créer facture ou avoir

Dans le cas du choix _signée (à facturer)_, cliquez sur le bouton _créer facture ou avoir._


==== 7.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
PROPAL_CLONE_ON_CREATE_PAGE = Sur la page création nouvelle propale, ajoute l'option pour demander si l'on veut créer par « clonage » à partir d'une propale existante.

MAIN_PROPAL_CHOOSE_ODT_DOCUMENT => Sur la page de configuration, vous pouvez sélectionner le document ODT à utiliser lors de la fermeture ou annulation des propositions commerciales. +
MAIN_GENERATE_PROPOSALS_WITH_PICTURE => Ajouter l'image du produit (la première trouvée s'il y en a plusieurs) dans le PDF généré des propositions. Notez que cela réduit la largeur disponible pour la description du produit.

PROPAL_DISABLE_SIGNATURE => Ne montrez pas la boîte de signature.

WORKFLOW_PROPAL_CAN_CLASSIFY_BILLED_WITHOUT_INVOICES => Le bouton “Classez Facturé” est visible sur la proposition même s'il n'y a pas de facture liée à la proposition.

PRODUIT_PDF_MERGE_PROPAL => Lors de la génération du PDF de la proposition, tous les PDF liés aux produits liés à la proposition sont également inclus dans le PDF final.

PROPOSAL_ALLOW_EXTERNAL_DOWNLOAD => Lorsqu'un fichier PDF est généré, une clé de partage est automatiquement définie pour que le fichier puisse être téléchargé à l'aide de la clé de partage.

==== 7.2.5. Cas concret

*Question* : Si je créé un devis pour un Tiers comment faire pour qu'un commercial avec accès restreint à *Dolibarr* puisse voir ce Tiers et accéder au devis ? +
*Réponse* : Rendez vous sur l'onglet _Client_ de la fiche du tiers, sur la ligne _Commerciaux_ cliquez sur l'icône _Modifier_






Choisissez l'utilisateur concerné dans la liste et cliquez sur le lien _Ajouter_ en regard.


Le nom de l'utilisateur vient alors s'ajouter à celui de l'administrateur sur la ligne des commerciaux habilités à traiter avec ce client.


=== 7.3. Commandes clients

==== 7.3.1. Cycle de vie / Règles de gestion

Une commande client suit habituellement le cycle de vie suivant : +
Soit le module _expédition _est actif, et nous aurons : *_Brouillon --> Validée --> Expédition en cours --> Livrée --> Traitée (Livrée + Facturée)._* +
Soit le module _expédition _est désactivé, et nous aurons : *_Brouillon --> Validée --> Livrée --> Traitée (Livrée + Facturée)._* +
Le statut “A facturer” n'est pas un statut spécifique du workflow des commandes. Ce statut sera pour certains équivalent au statut “Validée”, et équivalent au statut “Livrée” pour d'autres. La création de la facture pouvant avoir lieu aussi bien avant qu'après la livraison, c'est votre choix d'organisation qui définira si c'est l'un ou l'autre. +
Une fois qu'une commande client est validée par son créateur, si vous avez activé le Module _Expéditions_, vous pouvez générer un ou plusieurs bon d'expéditions, voire bordereaux de réceptions afin d'envoyer vos produits. Ceci peut être réalisé à n'importe quel moment après la validation et avant que la commande ne soit passée au statut traitée ou annulée. +
Vous pouvez aussi annoncer le traitement d'une commande (passage au statut “Livrée”) quand vous le désirez. +
Vous aurez la possibilité de créer une ou plusieurs factures clients depuis la commande, soit depuis les commandes validées, soit depuis les commandes livrées. Notez que, par défaut, les factures construites depuis une commande ont le même contenu/montant mais vous pouvez éditer la facture, une fois générée, pour changer cela. +
Si vous cliquez sur “Classer facturée” et que vous avez “Classer Livrée” aussi, cela changera le statut à “Traitée” (fin du cycle de vie). La commande disparaîtra du menu “Commandes livrées” et apparaîtra dans “Commandes Traitées”                     .

==== 7.3.2. Créer une nouvelle commande client

Sous le chapeau _Commandes_ clients cliquez sur le lien _Nouvelle commande_. Le champ référence est incrémenté et renseigné automatiquement conformément au modèle de numérotation choisi précédemment dans la configuration du module. Le champ suivant ( non obligatoire ) permet de renseigner une référence plus parlante pour vous. Cliquez sur +
le lien du _Tiers_ désiré dans la liste des _Clients_, car une commande passe obligatoirement par le choix d’un _Tiers(Client)_. +
Tous les champs agrémentés d’une étoile présentent des listes déroulantes dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil/Configuration/Dictionnaires_. Cliquez sur le nom d’un dictionnaire, par exemple pour rajouter un pays (exemple : la Bordurie) à la liste existante, Pays . Dans le champ code, un code calqué sur ceux déjà présents (exemple : RG) et dans le champ libellé on ajoute Bordurie. Vous retrouvez maintenant ce nom dans la liste des pays. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci. +
Une fois les champs renseignés, cliquez sur le bouton _créer brouillon_. +
Ajoutez vos commandes : Produit et/ou service, et validez.

==== 7.3.3. Expédition/Réception

Dans la fiche _commande client_, passez sur l’onglet _Expéditions/réceptions_. Choisissez l’entrepôt source dans la liste déroulante et cliquez sur le bouton _Nouvelle expédition_.

La référence commande est incrémentée et renseignée automatiquement. Renseignez une date de livraison prévue, une note éventuelle, quelques renseignement sur l'objet de la livraison (poids, largeur etc...), la méthode de livraison et un numéro de suivi. La quantité à expédier est renseignée automatiquement, mais vous pouvez remplir ou vider ce champ en cliquant sur les liens du même nom. Cliquez sur le bouton _Créer_. Une fois la fiche d’expédition validée, vous verrez apparaître le bouton du bon de réception.



Le clic sur ce dernier vous amène sur la fiche réception, que vous pouvez valider en cliquant sur le bouton valider. Vous pouvez alors générer votre bon de livraison.

==== 7.3.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes : +
COMMANDE_REQUIRE_SOURCE = Rend obligatoire la saisie du champ source lors de la création d'une commande.

COMMANDE_VALID_AFTER_CLOSE_PROPAL = Quand une commande est créée sur fermeture de propale, la commande est directement mise à l'état validée.

COMMANDE_CHANGE_THIRDPARTY => On peut changer de client sur les commandes.

ORDER_ALLOW_EXTERNAL_DOWNLOAD => Lorsqu'un fichier PDF est généré, une clé de partage est automatiquement définie pour que le fichier puisse être téléchargé à l'aide de la clé de partage.

COMMANDE_ADD_DELIVERY_COST_LINE = Ajout d'une ligne avec le poids si le poids est connu et si le trigger _FraisPort_ est activé.

=== 7.4. Commandes fournisseurs


Une fois que les produits ou services d'une commande ont bien été reçues, il faut retourner sur la fiche commande pour saisir la réception. Le statut de la commande passe alors à reçu partiellement ou reçu complètement selon les informations saisies.

==== 7.4.1. Créer une nouvelle commande fournisseur

Sous le chapeau _Commandes fournisseurs_ cliquez sur le lien _Nouvelle commande_. Le champ référence est incrémenté et renseigné automatiquement conformément au modèle de numérotation choisi précédemment dans la configuration du module. Cliquez sur le lien du _Tiers_ désiré dans la liste des _Fournisseurs_, car une commande passe obligatoirement par le choix d’un _Tiers(Fournisseur)_. Le champ suivant ( non obligatoire ) permet de renseigner la référence du fournisseur. Cliquez sur _Créer brouillon._ +
Tous les champs agrémentés d’une étoile présentent des listes déroulantes dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil/Configuration/Dictionnaires_. Cliquez sur le nom d’un dictionnaire, par exemple pour rajouter un pays (exemple : la Bordurie) à la liste existante, Pays . Dans le champ code, un code calqué sur ceux déjà présents (exemple : RG) et dans le champ libellé on ajoute Bordurie. Vous retrouvez maintenant ce nom dans la liste des pays. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci. Seuls les produits rattachés à ce fournisseur sont disponibles dans la liste déroulante _Ajout nouvelle ligne - Produits/Services en vente_. Si l'on veut rajouter un nouveau produit, il est nécessaire de passer par l'interface des _produits/services_, de créer un produit puis d'utiliser l'onglet fournisseur de la fiche produit et d'indiquer le prix et la quantité minimum pour ce fournisseur. Le produit est alors disponible dans la liste des produits de ce fournisseur et peut être ajouté à la ligne de commande. +
Une fois la commande validée il vous faudra soit accepter soit refuser cette dernière (dans le cadre du passage entre les mains d'un responsable pour la validation d'une commande fournisseur). Si c'est l'option accepter qui a été choisie, un nouveau bloc apparaît : _Passer commande_. +
Renseignez une méthode de commande à partir de la liste déroulante, et passez commande. L'état de la fiche commande est alors : Attente réception, et un nouveau bloc _Réceptionner_ vient remplacer le bloc _Passer commande_.

==== 7.4.2. Réceptionner une commande fournisseur

Une fois que les produits d'une commande ont bien été reçus, il faut retourner sur la fiche commande pour en saisir la réception. Le statut de la commande passe alors à reçu partiellement ou reçu complètement selon les informations saisies. Dans le bloc « _Réceptionner_ » renseignez la date de livraison, choisissez l’option désirée de la liste déroulante du champ _Livraison_, placez un commentaire si besoin et cliquez sur le bouton _réceptionner_. L’option _Totale_ fait disparaître le bloc, mais un bouton _ré-ouvrir_ fait alors son apparition.

==== 7.4.3. Supprimer une commande fournisseur

Pour supprimer une commande il vous faut ouvrir la fiche de celle-ci. +
Une commande ne peut être supprimée que si celle-ci est à l’état de brouillon. Une fois validée, elle ne peut seulement qu’être annulée. La suppression d’une commande entraîne l’effacement de toutes les données s’y référant. +
*Attention !* Une commande supprimée ne peut pas être récupérée.

==== 7.4.4. Modifier une commande fournisseur

Pour modifier une commande il vous faut ouvrir sa fiche. Une commande +
ne peut être modifiée que si celle-ci est à l’état de brouillon.

==== 7.4.5. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
FOURN_PRODUCT_AVAILABILITY => Sur la page des prix fournisseur des produits, active la disponibilité des produits du fournisseur. C'est une fonctionnalité en double avec delivery_delay introduite avec la 3.8.

SUPPLIER_ORDER_AUTOADD_USER_CONTACT => Ajoute automatiquement l'utilisateur approuvant la commande du fournisseur en tant que contact.

SUPPLIER_ORDER_USE_DISPATCH_STATUS => Ajouter un statut sur chaque ligne d'expédition de commande.

SUPPLIER_ORDER_NO_DIRECT_APPROVE =>Aucun bouton “Valider et Approuver”. Toujours faire les étapes “Valider” et “Approuver” en 2 étapes.

SUPPLIER_ORDER_WITH_NOPRICEDEFINED => On peut rentrer un produit même si aucun prix fournisseur n'a été défini.

SUPPLIER_ORDER_EDIT_BUYINGPRICE_DURING_RECEIPT => On peut modifier le prix d'achat utilisé pour le calcul PMP lors de la réception d'un stock sur une commande fournisseur. (v6.0 +)

=== 7.5. Contrats

==== 7.5.1. Créer un nouveau contrat

Les contrats consignent les services clientèle assurés pour les clients. +
Vous pouvez créer des contrats pour des clients existants et spécifier le type de service et de conditions qui s’appliquent à chacun d’entre eux. +
Dans le menu gauche, sous le chapeau _Contrat_, cliquez sur _Nouveau contrat_. Renseignez alors le formulaire ouvert en commençant par choisir un client dans la liste déroulante des tiers : +
Le champ _Réf._ est renseigné automatiquement en fonction du masque configuré précédemment dans l'administration du module. Choisissez le commercial chargé du suivi du contrat, le commercial signataire de ce contrat. La date se renseigne automatiquement à la création, mais peut être changée. Rattachez éventuellement le contrat à un projet en le sélectionnant dans la liste déroulante. Vous pouvez intégrer une note publique et une note privée. Puis cliquez sur _Créer_. +
Ajoutez une ou plusieurs lignes de services soit à partir de la zone libre soit de la liste déroulante des services en vente. Une date prévue de mise en service et une date prévue de fin de service. La fiche contrat affiche les services en cours pour ce client et leur état.



==== 7.5.2. Clôturer un service

Utilisez l’icône _modifier_ placée sur la même ligne et à droite du statut du service, choisissez une _date effective_ _de fin de service _et cliquez sur _clôturer_. L'état de la fiche de contrat et le statut du service passent à _Fermé_.

==== 7.5.3. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

CONTRACT_SUPPORT_PRODUCTS => Les produits sont également suggérés dans le module contrat.

=== 7.6. Interventions

==== 7.6.1. Créer une nouvelle intervention

Dans le menu de gauche_ Interventions>nouvelle intervention_. Choisissez un tiers dans la liste déroulante et cliquez sur le bouton _créer brouillon._ +
Vous pouvez rattacher cette intervention à un projet et renseigner le champ _Description_. Cliquez sur le bouton créer brouillon. Renseignez le champ description de votre intervention, la date, l’heure et la durée. Vous pouvez répéter plusieurs fois la procédure, le champ _durée totale_ incrémente alors la totalité des heures d’intervention.

==== 7.6.2. Modifier une intervention

Vous pouvez modifier le contenu d’une intervention en cliquant sur le pictogramme _modifier_, ce qui permet d’éditer la ligne d’intervention.

==== 7.6.3. Supprimer une intervention

Vous pouvez supprimer le contenu d’une intervention en cliquant sur le pictogramme _supprimer_, ce qui permet de supprimer la ligne d’intervention.

==== 7.6.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
FICHEINTER_CLASSIFY_BILLED = Permet de classer une intervention comme « _facturée_ ». +
Cela rajoute aussi le trigger FICHINTER_CLASSIFY_BILLED dans la liste des événements automatiques possibles dans l’agenda.

FICHINTER_DISABLE_DETAILS => Désactiver l'entrée de la ligne de détails sur l'intervention. On peut valider sans ligne.

=== 7.7. Demandes de tarifs fournisseurs

==== 7.7.1. Créer une nouvelle demande de prix

Dans le menu de gauche_ Propositions commerciales fournisseurs>nouvelle demande_. Choisissez un fournisseur dans la liste déroulante et cliquez sur le bouton _créer brouillon._

==== 7.7.2. Modifier une demande de prix

Vous pouvez modifier le contenu d’une demande en cliquant sur le pictogramme _modifier_, ce qui permet d’éditer la ligne de demande.

==== 7.7.3. Supprimer une demande de prix

Vous pouvez supprimer le contenu d’une demande de prix en cliquant sur le pictogramme _supprimer_, ce qui permet de supprimer la ligne de demande.




== 8. Facturation|
Paiement





























=== 8.1. Introduction

L’onglet Facturation|Paiement regroupe les modules

* Factures et avoirs : Gestion des factures et avoirs clients. Gestion des factures fournisseurs.
* Dons : Gestion des dons.
* Dépenses spéciales : Dépenses spéciales (taxes, charges fiscales ou sociales, dividendes)
* Emprunt : Gestion des emprunts.
* Marges : Gestion des marges.

*Configuration*

Ces modules sont livrés en standard avec la distribution de *Dolibarr*, aussi ils sont déjà installés.

* Vous trouverez le module_ Factures et avoirs_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique.

*Onglet Divers* +
*Modèle de numérotation des factures et avoirs* +
Choisissez ici le modèle de numérotation qui servira pour vos factures, vous avez le choix entre le modèle _Mercure_ qui renvoie un numéro personnalisable selon un masque à définir : Vous pouvez saisir tout masque de numérotation. Les masques peuvent être définis de manière indépendante pour vos factures standards, vos factures de remplacement, vos factures d'avoir ou bien vos factures d'acompte. Dans ces masques, les balises suivantes peuvent être utilisées: +
*{000000}* correspond à un numéro qui sera incrémenté à chaque facture. Mettre autant de zéro que la longueur désirée du compteur. Le compteur sera complété par des 0 à gauche afin d'avoir autant de zéro que dans le masque. +
*{000000+000}* idem précédemment mais un offset correspondant au nombre à droite du + est appliqué dès la première facture. *Exemple : *vous voulez démarrer à partir du dernier numéro de facture de votre ancien logiciel qui était la FC558886, vous configurez le masque de cette façon : *FC{000000+558886}*. Le prochain numéro de facture sera bien le *FC558887.* +
*{000000@x}* idem précédemment mais le compteur est remis à zéro le x ème mois de l'année (x entre 1 et 12, ou 0 pour utiliser le mois de début d'exercice fiscal défini dans votre configuration, ou 99 pour remise à zéro chaque mois). Si cette option est utilisée et x vaut 2 ou plus, alors la séquence *{yy}{mm}* ou *{yyyy}{mm}* est obligatoire. +
*{dd}* jour (01 à 31). +
*{mm}* mois (01 à 12). +
*{yy}*, *{yyyy}* ou *{y}* année sur 2, 4 ou 1 chiffres. +
*{cccc}* le code client sur n lettres +
*{cccc000}* le code client sur n lettres est suivi d'un compteur propre au client sans offset, complété par des zéros pour en avoir autant que dans le masque, et remis à zéro en même temps que le compteur global. +
*{tttt}* Le code type entreprise sur n caractères (voir dictionnaires-types de sociétés). +
Tout autre caractère dans le masque sera laissé inchangé. +
Les espaces ne sont pas permis. Les “/” sont par contre permis maintenant. +
Exemple sur la 99 ème facture du tiers _LaCompanie_ faite le 31/03/2014: +
ABC{yy}{mm}-{000000} donnera ABC1403-000099 +
{0000+100}-XXX-{dd}-YYY donnera 0199-XXX-31-YYY +
Ou bien le modèle _Terre _qui renvoie le numéro sous la forme *FAyymm-nnnn* pour les factures et factures de remplacement, *AVyymm-nnnn* pour les avoirs et *ACyymm-nnnn* pour les acomptes où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
Ou bien encore le modèle _Mars _qui renvoie le numéro sous la forme *FAyymm-nnnn* pour les factures, *FRyymm-nnnn* pour les factures de remplacement, *ACyymm-nnnn* pour les acomptes et *AVyymm-nnnn* pour les avoirs où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0.

*Modèle de document de factures* +
Ensuite choisissez votre modèle de documents de facture en cliquant sur le bouton d’activation qui doit passer au vert. Tous les modèles activés apparaîtront dans la liste déroulante lors de la création d’une facture. Vous pouvez choisir un modèle par défaut, +
ou bien en créer un à l’aide d’ODT templates qui permet la génération depuis des modèles OpenDocument (Fichier .ODT ou .ODS OpenOffice, KOffice, TextEdit...). +
Si vous avez installé le module https://www.dolistore.com/fr/modules/914-Ultimatepdf-7-0.html[_ultimatepdf ]_vous devez activer ici son modèle de facture : _ultimate_invoice1, ultimate_invoice2(Modèle de facture PDF complet avec colonnes: Remise, Prix unitaire remisé...), ultimate_weight_invoice1(Modèle de facture PDF complet : modèle avec colonne poids des produits)_. +
*Attention !* Si vous utilisez ce modèle et voulez profiter de toutes ses fonctionnalités, rendez vous dans _Configuration des dictionnaires - Modes de paiements_ pour créer le code LCR s'il n'existe pas, et activez le.

*Mode de paiement suggéré par défaut si non défini au niveau de la facture* +
Vous pouvez proposer le paiement par virement sur le compte, en sélectionnant votre compte bancaire qui apparaîtra dans la liste déroulante si vous avez renseigné préalablement les coordonnées de votre banque. +
De même vous pouvez proposer le paiement par chèque à l'ordre et adresse de votre société. +
*Attention !* Si vous ne renseignez rien dans cette partie, vos coordonnées bancaires ou de règlement ne seront affichés dans aucun de vos documents (Commandes, propales, factures).

*Autres options* +
Parmi les options, vous pouvez proposer de forcer la date de facture à la date de validation. +
Proposer d'apposer une mention complémentaire sur les factures (Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte), telle qu’une phrase comme celle ci : « En cas de non paiement à l'échéance, le montant sera majoré d'intérêts au taux de 1.50% par mois de retard (loi 92-1442 du 31/12/1992). Pas d'escompte en cas de règlement anticipé. » +
Renseigner un texte qui viendra en Filigrane sur les brouillons de factures (aucun si vide).

*Attributs supplémentaires (factures clients)* +
Dans l’onglet « _Attributs supplémentaires (factures)_ » de la configuration du module _Factures_ définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérez sur les Factures. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire _Liste issue d'une table_ nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : +
_Type entreprise_, un code de l'attribut : _typent_, un type : Liste issue d'une table, une valeur : nous avons choisi la table _c_typent_, le champ libellé (de la table c_typent) et le champ code (de la table c_typent), nous enregistrons. Maintenant si nous créons une nouvelle facture, nous retrouvons la liste déroulante des types d'entreprises dans la fiche facture. +
Si nous voulons récupérer cette valeur dans un modèle de pdf, voilà comment procéder : +
*_$test=$object->array_options['options_typent'];_* +
*_$pdf->MultiCell(100, 4, $test, '', 'R');_* +
Code à placer et mettre en forme dans le modèle, à l'emplacement où nous voulons récupérer la valeur.

*Attributs supplémentaires (lignes)* +
Dans l’onglet « _Attributs supplémentaires (lignes)_ » de la configuration du module _Factures _définissez la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérés sur les Factures. La liste de Type s'est fortement enrichie +
depuis *Dolibarr 3.3* (Chaîne, texte long, numérique, décimal, date, date et heure, Booléen (Case à cocher), Prix, Téléphone, Email, Liste de sélection, Liste issue d'une table, Séparateur de champ, Case à cocher, Bouton radio). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire Liste de sélection, nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Au choix_, un code de l'attribut : _choix_, un type : _Liste de sélection_, la liste doit être de la forme clef -> valeur : par exemple 1,valeur1..., nous enregistrons. +
Chaque fois que vous ajoutez une ligne dans la facture, celle ci sera doublée par une ligne affichant « Au choix » et en face la valeur de votre choix dans la liste déroulante. +
Vous trouverez le module _Taxes, charges et dividendes_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d’état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d’accéder à la page de paramétrage spécifique.




TVA standard et règles d'arrondi

|===
|A 
Description|B|C|D|E|F|G|H|I

|Produit
alpha|1|1.24|10%|1.24|0.124|0.12|1.24+0.124= 1.364|1.36
|Produit|1|1.24|10%|1.24|0.124|0.12|1.24+0.124= 1.364|1.36
|===

Il y a 2 manières de calculer le total de la facture: faire la somme des lignes arrondies ou l'arrondi de la somme des lignes.

1) Si nous choisissons de faire la somme des lignes après les avoir arrondies (sur 2 décimales), on obtient:

Total sans taxe: 1.24(E1) + 1.24(E2) = 2.48 +
Total taxe 10%: 0.12(G1) + 0.12(G2) = 0.24 (nous sommons les valeurs arrondies de chaque ligne) +
Total avec taxe (nous sommons le total sans taxe + le total de taxe): 2.48(Ex) + 0.24(Gx) = 2.72 +
Notez que si nous sommons le prix incluant la taxe arrondie sur chaque ligne, nous avons: 1.36(I1) + 1.36(I2) = 2.72 (même résultat, aussi nous savons qu'il n'y a pas d'erreur)

2) Si nous choisissons de faire l'arrondi (sur 2 décimales) du montant total après avoir sommé les lignes, nous avons:

Total sans taxe: 1.24(E1) + 1.24(E2) = 2.48 (identique à la méthode 1) +
Total avec taxe 10%: (1.24(E1) + 1.24(E2)) * 10% = 0.124 + 0.124 = 0.248 arrondis au plus près pour avoir un total sur 2 décimales donne 0.25 (Nous additionnons le montant sans taxe de chaque ligne, calculons la tva dessus et après nous arrondissons à 2 décimales). +
Total avec taxe (on additionne le total sans taxe + total avec taxe): 2.48 + 0.25 = 2.73 +
La première chose que nous pouvons noter est que le résultat de la méthode 1 est différent de celui de la méthode 2. La différence n'est que de 0.01 mais si vous avez n fois la même ligne, cette différence pourrait être plus importante mais toujours inférieure ou égale à (n-1)*0.01. De plus, que vous essayiez par des arrondis vers le bas ou vers le haut au lieu du “au plus proche”, vous serez confronté au même phénomène (par exemple en arrondissant vers le bas, essayez avec une quantité de 2 sur la ligne 2 et vous constaterez les mêmes différences entre la méthode 1 et 2). Cette différence apparaîtra pour un jeu de données différent mais le problème reste entier, aussi ce problème n'est pas sur la manière dont nous arrondissons mais bien quand nous arrondissons.

La deuxième chose que nous pouvons noter est que si nous utilisons la méthode 2, il vaut mieux ne pas afficher la colonne I sur la facture, sinon le total visible sur la facture (2.73) ne sera pas le même que celui obtenu en additionnant le montant de chaque ligne (1.36+1.36=2.72). Afficher la colonne H semble mieux mais le total sera toujours différent car notre total (2.73) est arrondi et la somme des lignes par la colonne H (1.364+1.364=2.728) restera encore différent.

Bref, que l'on utilise la méthode 1 ou la méthode 2, il y aura toujours une incohérence visible qui pourra être trouvée.

Alors que faire ?

Dans certains pays, le mode de calcul doit toujours être celui utilisant la méthode 1 pour faire ses factures. Comme ceci est le mode par défaut de Dolibarr, il n'y a rien de particulier à faire, juste comprendre ce qui se passe. +
Dans d'autres pays (très rare), le calcul doit toujours être fait selon la méthode 2 pour faire ses factures. Afin d'éviter d'avoir un total au bas de la facture qui diffère du total obtenu en additionnant chaque ligne de détail, ce qui peut être fait est de ne pas afficher la colonne I. Ceci est d'ailleurs le cas avec les modèle de factures par défaut de Dolibarr, aussi, il n'y a rien de particulier à faire pour masquer cette information. Pour activer ce mode de calcul, vous devez avoir *_Dolibarr version 3.5+_* et positionner la constante *_MAIN_ROUNDOFTOTAL_NOT_TOTALOFROUND_* à 1 (Accueil - Configuration - Divers). +
Dans la plupart des pays, les 2 méthodes sont possibles. Dans ce cas, utilisez le mode par défaut qui est la méthode 1 car il est plus efficace quand il s'agira de faire la comptabilité (car, si vous utilisez la méthode 2, le total de TVA de vos factures ne sera pas les sommes de F, ni les sommes de G et ceci créera des confusions plus tard). Il n'y a donc rien de particulier à faire à part comprendre que ce qui se passe est normal. Si vous préférez toutefois absolument la méthode 2 (non recommandé si non obligatoire par la législation de votre pays) et que vous utilisez *_Dolibarr 3.5+_*, alors positionnez la constante *_MAIN_ROUNDOFTOTAL_NOT_TOTALOFROUND_* à 1 (Accueil - Configuration - Divers).


*Option d'exigibilité de TVA par défaut*

. *Standard* : L'exigibilité de la TVA sur encaissement est :
* sur livraison pour les biens (en pratique on utilise la date de facturation)
* sur paiement pour les services.
. *Option services sur Débit* : L'exigibilité de la TVA sur débit est :
* sur livraison pour les biens (en pratique on utilise la date de facturation)
* sur facturation (débit) pour les service

*Moment d'exigibilité par défaut de la TVA pour l'option choisie*

. *Achat* :
* Produit : Sur livraison (Date de facture utilisée)
* Services : Sur paiement (Date de paiement utilisée).
. *Achat* :
* Produit : Sur livraison (Date de facture utilisée)
* Services : Sur paiement (Date de paiement utilisée)

* Vous trouverez le module _Notes de frais et déplacements_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d’état doit être vert pour signifier son activation.
* Vous trouverez le module _Dons_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d’état doit être vert pour signifier son activation.
	*Modèles de documents de bon de réception de dons* +
Activez le modèle _cerfafr _qui est un modèle au format html.

* *Configurer le module Marges*
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration – Modules_. +
Vous trouverez ce dernier dans la famille _Modules financiers(Compta/trésorerie)_ de l'onglet modules complémentaires. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de +
paramétrage spécifique du module :





Vous choisirez ici, le type de marge gérée. +
Quelques définitions : +
*Marge brute* = Prix de vente HT – Prix d'achat HT ( pour être plus précis, il faudrait parler du Coût d'achat. Le coût d'achat tient compte du PRIX D'ACHAT mais aussi des FRAIS ACCESSOIRES à l'achat. C'est le montant NET FINANCIER) +
*Marge nette* = Marge brute – frais de distribution +
Frais de distribution = charges de gestion du magasin, loyers, charges de personnel, publicité… +
*Taux de marge* = Marge commerciale/Coût d'achat x 100 (Le taux de marge exprime ce que représente la marge commerciale en pourcentage du coût d'achat) +
*Taux de marque* = Marge commerciale/ Prix de vente HT x 100 (Le taux de marque exprime ce que représente la marge commerciale en pourcentage du Prix de vente)

=== 8.2. Factures clients

==== 8.2.1. Créer une facture client

Dans le menu de gauche, sous l’intitulé _Factures clients_, choisissez le lien _Nouvelle facture_. Choisissez un client dans la liste. A partir de l'onglet Client d'une fiche client, cliquez sur le bouton _Créer facture ou avoir_ :

 Vous aurez alors le choix entre plusieurs types de factures:

* La facture standard ( aussi appelée facture de doit (du verbe devoir), c’est la facture traditionnelle)
Il s'agit d'une facture standard. Il n'y a aucun pré-requis.




* La facture modèle
Pour créer une facture modèle vous devez d’abord créer une facture standard brouillon et la convertir en modèle.








Vous pouvez associer une tâche planifiée à un modèle.

*Attention!* : Pour cela vous devez avoir activé le module “Travaux programmés” +
sinon vous aurez une alerte :







Rendez vous sur la page de configuration du module : +
Activez la Clé de sécurité pour l'URL de lancement des travaux programmés.












Pour les factures récurrentes rendez vous dans _Accueil>Outils d'administration>Travaux planifiés_. Vous pouvez éditer l’exemple qui a été préparé et le configurer à votre convenance.





Pour lancer la commande manuellement vous cliquerez sur l’icône en fin de ligne. +
Pour avoir la commande qui se lance automatiquement, par exemple sur un environnement Unix vous pouvez utiliser l'entrée suivante en crontab pour exécuter la ligne de commande toutes les 5 minutes : +
*/5 * * * * pathtoscript/scripts/cron/cron_run_jobs.php 052c2b43e14246d92fc2298e9ea22b05 webmaster > /home/httpd/vhosts/pathtodomain/dol600.aflac.fr/documents/cron_run_jobs.php.log +
A vous de créer votre commande pour par exemple une relance journalière des factures.


* La facture d'acompte
La facture d’acompte est le type de facture qui fait suite à réception d’un acompte, s’il n’est pas encore possible de saisir le paiement sur une facture définitive. Vous pouvez créer autant de facture d’acompte que désiré. Une facture d’acompte sera ensuite convertie en réduction (déjà payé) pour une autre facture (la facture définitive) sur laquelle porte l’acompte.


Nous supposons dans ce cas de figure que le client règle un acompte. Dans le _Type_ nous choisissons _Facture d'acompte_, remplissons les autres champs, et cliquons sur _Créer brouillon_. +
La fiche facture qui apparaît est bien une facture d'acompte, nous pouvons le vérifier sur la ligne _Type_. Nous pouvons donc valider cette facture en cliquant sur le bouton _Valider._ Nous cliquons sur le bouton _Émettre règlement_, et nous renseignons le montant de l'acompte versé par le client. Clic sur _Payer_ et validation.

*Attention !* Le bouton Convertir en réduction future apparaîtra seulement et seulement si le montant restant à payer est ramené à 0.






Si nous cliquons maintenant sur le bouton Convertir en réduction future, sur la ligne des remises apparaît maintenant le montant disponible en ligne de déduction.




* Les factures de doit de remplacement
Une facture de remplacement permet de refaire une facture sur laquelle il y a des erreurs et sur laquelle rien n'a été fait (aucun paiement saisi). +
On ne peut créer qu'une seule facture de remplacement pour une facture de doit donnée. Quand on crée une facture de remplacement R, on choisit la facture de doit F qui doit être remplacée. Il n'est alors plus possible de faire d'actions sur la facture F, bien que cette dernière ne change pas de statut après que la facture de remplacement R ait été créée au statut brouillon. Si la facture de remplacement R est supprimée, la facture F reprends son état initial et le cycle de vie de la facture F peut reprendre. Si la facture de remplacement R est validée, la facture F passe alors automatiquement au statut abandonnée . Le cycle de vie continue sur la facture R.

* Les factures d'avoir

On crée une facture d'avoir sur une facture de doit. On peut créer plusieurs factures d'avoir sur une facture donnée. La facture d'avoir est transformée en réduction qui sert à réduire le paiement de n'importe quelle autre facture en attente de paiement.



Cliquez sur le bouton “Convertir en réduction future”, vous pourrez alors utiliser ce montant pour corriger votre facture en erreur.

*Attention!* La facture à corriger doit être validée pour pouvoir utiliser la remise.

Cliquez alors sur le bouton “Appliquer”. Vous pouvez ensuite passer cette facture à “Passer payée”.

==== 8.2.2. Modifier une facture client

Tant que la facture n’a pas été validée, vous pouvez encore corriger son contenu. Vous pouvez agir sur les lignes produits ou services, soit en les supprimant, soit en modifiant le contenu des champs TVA, prix HT, prix TTC ou quantité, après avoir cliqué sur l’icône _modifier_. Vous pouvez corriger les champs société (*Astuce!* : pour cela allez dans _Configuration>Divers_, et dans le champ « _nom _» placez la constante FACTURE_CHANGE_THIRDPARTY en lui donnant la valeur 1), Date , Date limite règlement, Conditions règlement,Mode de règlement et Projet en cliquant sur le bouton Modifier situé en bas de page.

==== 8.2.3. Supprimer une facture client

Pour quelque raison que ce soit, si vous devez supprimer une facture, la possibilité existe à partir du bouton _Supprimer _situé au bas de la fiche, mais rappelez vous qu’un numéro de référence lui a été attribuée, et ceci de façon irréversible, vous aurez alors un trou dans le suivi de vos factures. Nous rappelons que la meilleure façon de procéder si une +
erreur a été détectée après avoir validé la facture, est soit de faire une facture de remplacement, soit de faire une facture d'avoir.

==== 8.2.4. Réduire le montant total et/ou le solde à payer

Il est possible de réduire le montant total et/ou le solde à payer d'une facture, mais il convient de faire une distinction entre une remise et une réduction, bien que ces deux termes soient parfois utilisés l'un pour l'autre.



* *Réduction*
Une réduction est une réduction relative (pourcentage) du prix de vente d'un ou de plusieurs produits ou services détaillés dans la facture. Cette réduction doit être définie ligne par ligne lors de l'édition de la facture et être comprise entre 0% et 100% (le pourcentage de remise est alors remplacé par la mention offert).

* *Remise*
Une remise est une réduction du prix total de la facture. Elle peut être définie de deux manières selon qu'elle est ou non associée à une autre facture, c'est-à-dire à un versement déjà perçu ou non.

. *Remise associée à un versement déjà perçu*
Les factures d'avoir et factures d'acompte, qui sanctionnent des versements déjà perçus, peuvent être converties en réduction future (on notera d'ailleurs la confusion faite entre remise et réduction). Dans ce cas la réduction, une fois attribuée à la facture en cours via la section Remises, sera mentionnée dans le bas du document sous la forme d'une +
mention des versements anticipés considérés, qui sont donc déduits du montant total de la facture pour spécifier le solde à payer. Cette remise n'est donc pas mentionnée comme une ligne dans le détail de la facture.

. *Remise non associée à un versement déjà perçu*
Il est aussi possible de définir une remise qui n'est pas relative à un versement déjà perçu. Dans ce cas, il faut aller sur la fiche du client, onglet client, et définir la ou les remises fixes (montant) ou relatives (pourcentage) qu'on attribue à ce client, et pourquoi (geste commercial, compensation suite à retard de livraison, etc). Une fois ces remises attribuées au client, elles seront disponibles lors de l'édition de n'importe quelle facture de ce client, dans la rubrique Remises en haut de page. A l'inverse des remises consécutives à des versements déjà perçus, celles-ci seront mentionnées comme des lignes négatives dans le détail de la facture, et réduiront donc le montant total de celle-ci, avant déduction des versements éventuellement déjà perçus. Mais ces remises ne sont pas associées à une facture d'avoir ou d'acompte.

==== 8.2.5. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers._ Voici ces constantes: +
MAIN_DEPOSIT_MULTI_TVA => Dans la facture de dépôt, créé une ligne par taux de TVA à partir du document d'origine (6.0).

FACTURE_SHOW_SEND_REMINDER = Affiche le lien « _Envoyer rappel par mail_ », fonction avec même finalité que le lien « _Envoyer par mail_ » (vieille fonction obsolète).

INVOICE_CAN_ALWAYS_BE_EDITED => Permet de modifier les factures même si le paiement a été lancé. Note: Si le module "BlockedLog" est actif (requis par certains pays pour des raisons légales), cela ne changera pas le contenu des logs archivés suivis par ce module. Par définition, il n'y a aucun moyen de modifier ou de supprimer les enregistrements archivés. Il mettra simplement à jour les données dans votre application et un nouvel enregistrement pour suivre votre changement dans le journal d'archives non réversible.

INVOICE_CAN_ALWAYS_BE_REMOVED => Permet de toujours supprimer les factures (même si la facture n'est pas la dernière). Note: Si le module "BlockedLog" est actif (requis par certains pays pour des raisons légales), cela ne changera pas le contenu des logs archivés suivis par ce module. Par définition, il n'y a aucun moyen de modifier ou de supprimer les enregistrements archivés. Il mettra simplement à jour les données dans votre application et un nouvel enregistrement pour suivre votre changement dans le journal d'archives non réversible.

INVOICE_CAN_NEVER_BE_REMOVED => Ne jamais autoriser la suppression des factures (sauf les factures provisoires).

INVOICE_POSITIVE_CREDIT_NOTE = Les montants sur les avoirs sont affichés en positif.

FACTURE_CHANGE_THIRDPARTY = Permet de changer le tiers dans les factures brouillon. Si une remise a été définie à partir du tiers d'origine, les remises sont conservées, ce qui rend les données non cohérentes.

FACTURE_USE_PROFORMAT => Permet le type de factures PROFORMAT.

FACTURE_DEPOSITS_ARE_JUST_PAYMENTS => Traite les factures de dépôt comme un cas particulier. Les factures de dépôt ne comptent pas sur le chiffre d'affaires. Ils sont ensuite appliqués en paiement, comme une remise, sur la facture finale. Par défaut, lorsque vous incluez le dépôt dans le brouillon de la facture finale, le montant de la facture finale est réduit. Avec cette option, le montant final n'est pas réduit mais un paiement est enregistré.

FACTURE_SENDBYEMAIL_FOR_ALL_STATUS => On peut envoyer une facture par email au client même si la facture a le statut “brouillon”.

MAIN_GENERATE_DOCUMENTS_WITHOUT_VAT => Désactive la TVA sur les documents générés, comme pour une association. (cela fonctionne avec le modèle de document crabe).

INVOICE_CREDIT_NOTE_STANDALONE (dolibarr 3.9) => On peut faire une note de crédit sans facture.

INVOICE_DISABLE_REPLACEMENT = Désactiver les factures de remplacement.

INVOICE_DISABLE_CREDIT_NOTE = Désactiver les notes de crédit.

WORKFLOW_BILL_ON_SHIPMENT = Changer l'étiquette du bouton avec l'étiquette appropriée quand vous devez créer la facture sur des expéditions.

Introduction de l’option MAIN_DEFAULT_PAYMENT_TERM_ID pour définir le délai de paiement par défaut au niveau de l'entreprise.

L'option DOC_SHOW_FIRST_SALES_REP affiche le nom de “ l’utilisateur acheteur ou vendeur ” sur les PDF. +
Clé de substitution disponible (__INVOICE_MONTH__, __INVOICE_PREVIOUS_MONTH__, ...) à utiliser dans le texte de note des factures récurrentes.

INVOICE_DISABLE_DEPOSIT = Désactiver les factures de dépôt.


INVOICE_USE_SITUATION = Active la fonctionnalité “facture de situation”. 

*Attention !* il faut partir du tiers à facturer ou bien d’une proposition commerciale ou une commande qui lui ont été faites et non pas de factures>nouvelle facture.


Le pourcentage de la première facture de situation sera renseigné sur la fiche facture ligne par ligne dans le champ progression qui est apparu ou bien à l’aide du bouton “modifier toutes les lignes” d’un seul coup. Par exemple nous choisirons de mettre un pourcentage de 40%. +
Nous voyons que le total de cette facture correspond bien à 40% du montant initial.

Une fois cette facture de situation réglée, le bouton “Créer prochaine situation” apparaît. +
Si on clic dessus, le brouillon créé propose un nouveau type de facture : “facture suivant situation” avec le numéro de la facture précédente affiché.








*Attention !* : si vous voulez rajouter un montant de 40% par rapport à la facture précédente il faut en fait incrémenter le montant de la progression de 40%, soit renseigner 80% 
( 40%+40%).  +
Pour créer une troisième et dernière facture de situation on procédera de la même façon, en rajoutant 20% à notre total pour arriver aux 100% du montant.


==== 8.2.6. Scripts

Votre comptable vous réclame l'ensemble des factures clients réglées pour le bilan annuel de la société. Ce script va vous permettre de fabriquer un fichier PDF à partir de l'ensemble des fichiers PDF choisis. Vous choisirez en ligne de commande les règles pour définir quel PDF vous inclurez ou exclurez pour fabriquer le PDF cible. Vous trouverez le +
fichier rebuild_merge_pdf.php dans le dossier /scripts/invoices. +
Si vous voulez l'exécuter avec « . », il faut le rendre exécutable avec `chmod`. Pour ceci tapez dans le shell la commande qui suit : +
*_chmod +x rebuild_merge_pdf.php_* +
Pour choisir votre modèle de facture en sortie, il faudra éditer le fichier pour y intégrer le nom de celui ci sinon ce sera le modèle crabe par défaut. Nous allons utiliser le modèle ultimate_invoice1 ( faisant parti du module ultimatepdf)


Je fais pour l'exemple le choix de récupérer les factures réglées entre le 01/10/2012 et le 01/03/2013 :


Avec la commande :  +
*_./rebuild_merge_pdf.php filter=payments 20121001 20130331 lang=fr_FR_*

Pour récupérer le document construit, allez dans : _/documents/facture/temp_, vous y retrouverez un pdf nommé : _mergedpdf_payments_20121001_20130331.pdf_ +
Les fins de mois sont dures, il est difficile de récupérer le règlement des clients, bref vous décidez de mobiliser toutes vos troupes sur le terrain : +
Ce script envoie un email à tous les commerciaux associés à un tiers client qui possède au moins une facture impayée. Vous trouverez le fichier _email_unpaid_invoices_to_representatives.php_ dans le dossier _/scripts/invoices_. +
Si vous voulez l'exécuter avec « . », il faut le rendre exécutable avec `_chmod_`. Pour ceci tapez dans le shell la commande qui suit : +
*_chmod +x email_unpaid_invoices_to_representatives.php_* +
Avec la commande :  +
*_./email_unpaid_invoices_to_representatives.php confirm_* +
vos commerciaux recevront ce type de mail :


=== 8.3. Factures fournisseurs

==== 8.3.1. Créer une facture fournisseur

Dans le menu de gauche, sous l’intitulé _Factures fournisseurs_, choisissez le lien _Nouvelle facture_. Choisissez un fournisseur dans la liste déroulante, renseignez une référence fournisseur, un libellé de façon optionnelle, une date de facturation et d’échéance, et éventuellement une note publique et cliquez sur _Créer brouillon_. +
Une fois la facture créée (en mode brouillon), vous devez intégrer dans celle ci des Produits ou Services déjà définis dans *Dolibarr *ou bien dont vous saisissez directement l’intitulé, le taux de TVA, le prix unitaire. Pour calculer le total de TVA, il existe 2 modes: Le mode 1 consiste à arrondir la TVA de chaque ligne et à sommer cet arrondi. Le mode 2 consiste à sommer la TVA de chaque ligne puis à l'arrondir. Les résultats peuvent différer de quelques centimes. Le mode par défaut est le mode 1. Selon le mode utilisé par le fournisseur, choisissez le mode adéquat afin d'appliquer la même règle et obtenir un résultat identique au mode appliqué par votre fournisseur. Une fois la facture prête vous devez la valider. *Attention!* cette opération est irréversible. Quand vous validez la +
facture un numéro lui est attribué selon le modèle de numérotation que vous avez choisi dans la configuration du module _Fournisseur_.

==== 8.3.2. Modifier une facture fournisseur

Tant que la facture n’a pas été validée, vous pouvez encore corriger son contenu. Vous pouvez agir sur les lignes produits ou services, soit en les supprimant, soit en modifiant le contenu des champs TVA, prix HT, prix TTC ou quantité, après avoir cliqué sur l’icône _modifier_. Vous pouvez corriger les champs référence fournisseur, libellé, date de facturation et date d’échéance en cliquant sur le bouton _Modifier_ situé en bas de page.

==== 8.3.3. Supprimer une facture fournisseur

Pour quelque raison que ce soit, si vous devez supprimer une facture, la possibilité existe à partir du bouton _Supprimer _situé au bas de la fiche, mais rappelez vous qu’un numéro de référence lui a été attribuée, et ceci de façon irréversible, vous aurez alors un trou dans le suivi de vos factures.

==== 8.3.4. Saisir les paiements

Pour saisir le paiement d'une facture fournisseur, il suffit de sélectionner la facture concernée dans la liste des factures fournisseurs et de cliquer sur «_ Émettre règlement_ ». Dans la nouvelle fenêtre, renseigner les champs « _Date_ », « _Mode de règlement_ », éventuellement le numéro afférent ainsi que le compte bancaire concerné. Penser à recopier les montants réglés, dans la/les case(s) « _Montant _» en fin de ligne, puis +
enregistrer.

==== 8.3.5. Classer la facture

Après avoir émis un règlement, la facture passe à l'état « _Commencée_ » (liste des factures impayées) ou à l'état « _Règlement commencé_ » (dans la facture). Pour qu'elle soit au statut « _Payée _», il est conseillé de classer la facture comme payée : sélectionner la facture concernée puis cliquer sur « _Classer Payée_ », confirmer la demande, sauf si vous avez coché l’option : Classer automatiquement à « _Payé _» les factures standards et +
de remplacement entièrement payées, auquel cas cela sera fait automatiquement. Si une facture n'est pas classée « _payée _», mais que le règlement est émis, la facture passe de «_ Impayée _» à « _Commencée_ », mais elle sera toujours considérée comme une facture impayée dans la liste des factures fournisseurs.

==== 8.3.6. Cas concret

*Question* : Si je reçois une facture fournisseur et un avoir pour erreur sur la facture, comment faire ? +
Réponse : Saisissez la facture fournisseur ( facture de doit), puis saisissez une facture fournisseur normale mais avec montant négatif. Payez ( émettre règlement). Saisissez le paiement sur la facture fournisseur et un paiement négatif sur la facture d'avoir fournisseur. Classez les deux factures comme « _Payées_ ». Un paiement au débit et l' autre au crédit apparaîtront dans les écritures bancaires.

=== 8.4. Commandes à facturer

==== 8.4.1. Gérer une facture commande

Dans le menu de gauche, cliquez sur le lien _Commandes à facturer_. La liste des commandes à facturer apparaît alors dans le panneau de droite. *Attention!* seules les commandes clôturées apparaissent. Celles ci sont classées en fonction de leur référence, mais vous pouvez adopter un tri différent en cliquant sur l’icône ascendante ou descendante du champ _Société, Réf. commande client, Date commande, Date de livraison_ ou bien _État_ . En cliquant sur le lien de la référence de la commande vous +
ouvrez la fiche de cette dernière. Vous pouvez alors en utilisant le bouton correspondant, soit : 

* Cloner la commande, Astuce! : il vous est offert la possibilité de choisir un Tiers différent comme client, pour cela allez dans _Configuration>Divers_, et dans le champ « _nom _» placez la constante FACTURE_CHANGE_THIRDPARTY en lui donnant la valeur 1)
* Classer facturée.
* Créer la facture. Attention! vérifiez qu’une facture du montant total de la commande ne soit pas déjà associée à cette commande, car il est possible de facturer plusieurs fois la même commande.
* Expédier le produit, vous envoie sur l’onglet _Expéditions/Réceptions_ de la commande. Pour une nouvelle expédition, choisissez votre entrepôt source, cliquez sur le bouton _nouvelle expédition_, indiquez une date de livraison prévue, une méthode de livraison ( transporteur ou enlèvement par le client), corrigez les quantités à expédier et _créez_. Les quantités expédiées se décrémentent, et le reste à expédier doit être passé à zéro.
* Passez sur l’onglet _fiche réception_, et validez la réception. Le processus est alors bouclé.
==== 8.4.2. Modifier une facture commande

Une fois la facture de votre commande validée, vous pouvez cependant la modifier en cliquant sur le bouton _Modifier_. Vous pourrez alors corriger ou supprimer les lignes de produits ou services, rectifier les champs _Date, Date limite règlement, Conditions règlement, Mode règlement _et_ Projet_. Vous pouvez alors la valider à nouveau.

==== 8.4.3. Supprimer une facture commande

Vous ne pouvez pas supprimer une facture rattachée à votre commande, vous pourrez par contre la passer à « _Classer abandonnée_ ».

==== 8.4.4. Cas concret

*Question *: Comment faire pour facturer en une fois plusieurs commandes pour un même client ? +
*Réponse *: Allez sur la fiche du client, onglet Client. S'il existe plusieurs commandes validées, vous devez voir apparaître le bouton « _Facturer commandes_ »


La liste des commandes validées à facturer apparaît alors. Sélectionnez les lignes à facturer et cliquez sur le bouton «_ Facturer commandes_».



Les références des commandes apparaissent dans le champs « _note (publique)_ » du brouillon de votre facture, et seront renseignées sur votre facture finale.

==== 8.4.5. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
FACTURE_CHANGE_THIRDPARTY = changer de tiers comme client.

=== 8.5. Taxes et charges

==== 8.5.1. Créer une charge sociale

Dans le menu de gauche, cliquez sur le lien _Taxes et dividendes_, puis _Nouvelle charge_. Renseignez les champs _Libellé, Type_, celui ci agrémenté d’une étoile présente une liste déroulante dont le contenu peut être modifié par vous même en vous rendant à l’adresse suivante : _Accueil>Configuration>Dictionnaires_. Cliquez sur le nom du dictionnaire Types de charges sociales pour rajouter un type de charge (exemple : URSSAF) à la liste existante. Dans le champ code, un code calqué sur ceux déjà présents (exemple : URSSAF) et dans le champ libellé on ajoute URSSAF. Vous retrouvez maintenant ce nom dans la liste des charges sociales. En retournant dans les dictionnaires, vous pouvez activer, modifier ou supprimer celui ci. Après avoir renseigné les derniers champs, dont le montant, cliquez sur _Ajouter_. En cliquant sur le lien Charges sociales vous verrez ce dernier apparaître dans la liste. +
Sous le menu _Nouvelle charge_ vous retrouvez le lien _Règlements_ qui vous renvoie vers la page de règlement des charges sociales. Cliquez sur un lien dans la colonne Libellé pour ouvrir la fiche d’une charge sociale. Le bouton émettre règlement vous permet de procéder au règlement, après avoir renseigné au minimum les trois champs obligatoires ( _Date, Mode de règlement_ et _Compte à débiter_ ), renseignez un montant et +
cliquez sur_ Enregistrer_. Cliquez maintenant sur le bouton _Classer ’Payée’_, Vous passez d’abord par une phase de confirmation : _Êtes-vous sûr de vouloir classer cette charge sociale à payée ? _Si vous répondez par l’affirmative, il vous resteras toujours en cas d’erreur la possibilité de modifier ou de supprimer la fiche.

==== 8.5.2. Modifier une charge sociale

Rendez vous sur la fiche de la charge à modifier, cliquez sur le bouton _Modifier._ Seuls les champs _Libellé, Date fin période_ et _Date échéance_ sont accessibles. Pratiquez vos changements et enregistrez.

==== 8.5.3. Supprimer une charge sociale

Rendez vous sur la fiche de la charge à modifier, cliquez sur le bouton _Supprimer_. Vous passez d’abord par une phase de confirmation : _Êtes-vous sûr de vouloir supprimer cette charge sociale ? _si vous confirmez, la suppression est définitive.

=== 8.6. Rapports

==== 8.6.1. Résultat/exercice par tiers

Dans le menu de gauche, cliquez sur _Rapports>Par tiers_. Dans le champs de droite, en entête en fonction de votre configuration, par exemple si vous aviez choisi le mode _Créances-Dettes_, viendra s’afficher : _Bilan des recettes et dépenses, détail par tiers_, en mode _Créances-Dettes_ dit comptabilité d'engagement. (Voir le rapport Recettes-Dépenses dit comptabilité de caisse pour un calcul sur les paiements effectivement réalisés). choisissez la période d’analyse et cliquez sur le bouton _Rafraîchir_ .

==== 8.6.2. Chiffre d’affaire par tiers

Dans le menu de gauche, cliquez sur le lien _Par tiers_ situé sous _Chiffre d’affaire_. Choisissez la période d’analyse et cliquez sur _Rafraîchir_. Les tiers (Sociétés) apparaissent alors dans la première colonne, suivis par le montant du chiffre d’affaire lié à chaque tiers et le pourcentage correspondant. La dernière colonne offre trois icônes pointant vers les statistiques sur les propales, les commandes et les factures liés au tiers.

==== 8.6.3. Chiffre d’affaire par utilisateur

Dans le menu de gauche, cliquez sur le lien _Par utilisateur_ situé sous _Chiffre d’affaire_. Choisissez la période d’analyse et cliquez sur _Rafraîchir_. Les utilisateurs apparaissent alors dans la première colonne, suivis par le montant du chiffre d’affaire lié à chaque utilisateur et le pourcentage correspondant. La dernière colonne offre trois icônes +
pointant vers les statistiques sur les propales, les commandes et les factures liées à l’utilisateur.

==== 8.6.4. Journal des ventes

Un journal est l'endroit où sont enregistrées les écritures. Dans le journal des ventes, on enregistre tous les mouvements du compte 411xxx (Clients). Dans le menu de gauche, cliquez sur _Rapports>Journal des ventes_. Choisissez la période d’analyse et cliquez sur _Rafraîchir_. Les mouvements pour une pièce comptable sont ventilés sur trois lignes, +
correspondant à trois comptes différents, le compte 411xxx du client, le compte 445xxx de TVA et le compte 700xxx de vente du produit.

==== 8.6.5. Journal des achats

Un journal est l'endroit où sont enregistrées les écritures. Dans le journal des achats, on enregistre tous les mouvements du compte 401xxx (Fournisseurs). Dans le menu de gauche, cliquez sur _Rapports>Journal des achats_. Choisissez la période d’analyse et cliquez sur _Rafraîchir._ Les mouvements pour une pièce comptable sont ventilés sur trois +
lignes,correspondant à trois comptes différents, le compte 401xxx du fournisseur, le compte 445xxx de TVA et le compte 600xxx d’achat du produit.

=== 8.7. Marges

==== 8.7.1. Gérer les prix d'achat/coûts de revient

Renseignez sur vos fiches produits et services, les prix d'achat fournisseurs (vous pouvez en avoir plusieurs). Ils seront proposés en choix de prix d'achat sur les lignes de saisie des propositions commerciales, commandes clients et factures clients (liste déroulante), ils permettent en outre de créer les commandes fournisseurs. Sur les fiches fournisseurs des produits et services, vous avez à disposition un champ supplémentaire nommé « _Charges _» qui vous permet d'ajouter au prix d'achat fournisseur une charge qui vous est propre et qui viendra s'ajouter au prix d'achat. Le total sera le coût de revient de votre produit ou service. En choisissant dans le paramétrage du module de calculer la marge nette, tous les calculs de marge décrits ci-après seront donc faits sur ce prix de revient, et non sur le seul prix fournisseur. Si vous saisissez un prix fournisseur pour un nombre minimum d'articles (par exemple, 100 DVD) parce que vous avez un tarif particulier à partir d'un seuil de produits achetés, vous pouvez également saisir la charge correspondante à ce « lot ». Elle sera répartie pour être prise en compte en coût unitaire sur chaque élément de ce lot commandé.

==== 8.7.2. Gérer vos commerciaux

Pour suivre les marges par commercial, vous devez avoir autant de compte utilisateur que de commercial différent. Il doit s'agir de comptes internes à la société, et non de comptes externes. Ensuite, sur l'onglet « _fiche _» de vos clients, vous devez choisir un commercial à rattacher à ce client. À partir de là, quelque soit l'utilisateur qui crée les factures, les marges seront comptabilisées à ce commercial, sauf si vous définissez +
un type de contact et un utilisateur différent sur les factures (au cas par cas). +
*Attention! Dolibarr* permet de pouvoir attribuer plusieurs commerciaux à un tiers. Toutefois, le module Marges pour l'heure ne gère pas ce cas de figure, et vos marges vont être multipliées par le nombre de commerciaux indiqués. Vous ne devez donc attribuer qu'un seul commercial par tiers (le principal), puis gérer les cas de commerciaux différents via l'onglet « _Contacts/Adresse_ » de chaque document concerné +
en choisissant l'utilisateur concerné, et le type de contact que vous avez défini dans la configuration du module.

==== 8.7.3. Saisie d'un document

Dans la saisie des lignes de _propale/commande/facture_, choisissez ou saisissez le prix d'achat du produit ou du service afin d'inclure la ligne dans le calcul des marges. +
Choix des prix d'achat :

* Si vous saisissez une ligne « _libre_ », vous indiquez le prix de vente et le prix d'achat (ou le prix de revient selon votre choix de calcul global).
* Si vous choisissez un produit ou service de votre base produits/services, vous pourrez choisir un prix fournisseur tel que renseigné sur la fiche, ou encore saisir un prix d'achat libre.
*Attention!* : si le prix d'achat n'est pas renseigné, la prise en compte de la ligne dans le calcul des marges dépendra du paramètre que vous avez défini dans la configuration du module. +
Un tableau récapitulant les marges relatives au document en cours, avec une ligne pour les marges sur les produits, une pour les marges sur les services, et une pour la marge totale du document est présent sur l'écran de chaque document.

==== 8.7.4. Cas des remises

Une remise faite sur une ligne sera prise en compte pour le calcul de la marge. Les remises globales sont prises en compte en fonction du paramétrage du module.

==== 8.7.5. Récapitulatif général

Accédez au récapitulatif général par commercial, par client ou par produit/service en cliquant sur le menu _Marges_  présent dans _Compta/Tréso_. +
La prise en compte des marges dans les tableaux récapitulatifs est faite sur les factures validées. Pour chaque onglet de cet écran, vous pouvez afficher le tableaux récapitulatif ou le détail par produit, client, ou agent commercial. Vous pouvez également sélectionner une plage de dates de prise en compte des factures validées.






== 9. Comptabilité



































* Vous trouverez le module _comptabilité_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique



*Option de tenue de comptabilité* +
vous avez le choix entre l’option _Recettes-Dépenses_ : Dans ce mode, le CA est calculé sur la base des paiements (date de règlement). La validité des chiffres n'est donc assurée que si la tenue de la comptabilité passe rigoureusement par des entrées/sorties sur les comptes via des factures. Ce sera le choix de prédilection des professions libérales, et plus ou moins celui des petits commerçants et artisans. +
et l’option _Créances-Dettes_ : Dans ce mode, le CA est calculé sur la base des factures (date de validation). Payées ou non, elles apparaissent dans le résultat dès qu'elles sont dues. Ce sera l’option des PME-PMI.

*Autres options* +
Ici vous trouverez des champs à renseigner en vous faisant aider par votre comptable, ou bien en allant se documenter sur le plan comptable : (http://fr.wikipedia.org/wiki/Plan_comptable_%28France%29[http://fr.wikipedia.org/wiki/Plan_comptable_%28France%29]).

1. Code comptable par défaut des achats de marchandises voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#60._Achats_.28sauf_603.29[ici] +
2. Code comptable par défaut des ventes de marchandises voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#70._Ventes_de_produits_fabriqu.C3.A9s.2C_prestations_de_services.2C_marchandises[ici] +
3. Code comptable par défaut des achats de services voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#61._Services_ext.C3.A9rieurs[ici] +
4. Code comptable par défaut des ventes de services voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#70._Ventes_de_produits_fabriqu.C3.A9s.2C_prestations_de_services.2C_marchandises[ici] +
5. Code comptable par défaut de la TVA collectée voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#44._.C3.89tat_et_autres_collectivit.C3.A9s_publiques[ici] +
6. Code comptable par défaut de la TVA déductible voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#41._Clients_et_comptes_rattach.C3.A9s[ici] +
7. Code comptable par défaut des tiers clients voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#41._Clients_et_comptes_rattach.C3.A9s[ici] +
8. Code comptable par défaut des tiers fournisseurs voir http://fr.wikipedia.org/wiki/Plan_comptable_(France)#40._Fournisseurs_et_comptes_rattach.C3.A9s[ici]






== 10. Banques/Caisse



































=== 10.1. Introduction


L’onglet Banques/Caisses regroupe les modules :

* Banques et caisses pour la gestion des comptes financiers de type Comptes bancaires, postaux ou Caisses liquides.
* Prélèvements pour la gestion des prélèvements et retraits bancaires

*Configuration* +
Ces modules sont livrés en standard avec la distribution de *Dolibarr*, aussi il sont déjà installés. +
Pour utiliser ces modules, il vous faut d'abord les activer. Pour cela, après s'être connecté avec un compte administrateur, allez sur la page « _Accueil - Configuration - Modules_ ».

. Vous trouverez le module _Banques et Caisses_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique.
*Paramètres* +
Dans _Paramètres_ vous pouvez renseigner une mention complémentaire qui apparaîtra sur les bordereaux de remises de chèques (Il n'y a pas de coupure de ligne automatique, aussi si votre texte est trop long sur les documents, il vous faudra ajouter par vous même des retours chariot dans la zone de saisie du texte). +
*Ordre d'affichage des information bancaires* +
Par ailleurs l'ordre d'affichage des informations bancaires pour les pays, en les détaillant. A ce jour deux options s’offrent à nous, soit l’ordre d'affichage général, soit celui espagnol. Le module est alors opérationnel. +
*Définitions* +
Un compte banque c'est un compte bancaire (souvent ce compte permet de faire des chèques ou de payer par carte bancaire). +
Une caisse, c'est la boite à gâteau de grand-mère dans laquelle on met de l'argent liquide ou encore un porte-monnaie ou bien encore la caisse enregistreuse des commerçants. Quand on reçoit un paiement en chèque, il sera forcément déposé sur un compte bancaire (compte banque) mais en cas de réception d'argent liquide, il est possible de ranger les billets dans un porte monnaie, une caisse enregistreuse (compte caisse) comme de les mettre de côté pour les déposer à la banque. *Dolibarr *permet de créer autant de comptes banque ou de comptes caisse que besoin. +
Pour gérer une trésorerie, il en faudra au moins un (en général compte bancaire, à moins que le commerce géré n'accepte ni chèque, ni carte bleu et que tout soit fait en liquide, achat comme vente), mais ceci reste optionnel. Si la trésorerie ne doit pas être gérée par *Dolibarr*, le module _Banque/Caisse_ peut être désactivé.

. Vous trouverez le module _Prélèvements_ dans la famille _Modules financiers (Compta/trésorerie)_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique.
*Configuration du module prélèvements* +
Sélectionnez dans la liste déroulante l'utilisateur responsable des prélèvements. +
Renseignez le Numéro National Émetteur qui est ici par défaut l'Id prof. 1 (SIREN). +
Pour obtenir un Numéro National d’Émetteur, vous devez adresser à votre banque, une demande d'attribution établie sur lettre à entête de votre société, revêtue de la signature d'un collaborateur dûment habilité auprès de cette même banque. +
Cette demande doit mentionner : +
- la raison sociale de l'émetteur, +
- l'appellation commerciale, +
- le numéro SIREN, +
- l'adresse du siège social, +
- l'activité de votre entreprise, +
- le montant des prélèvements envisagés, +
- la périodicité des prélèvements, +
- le type de clients visés. +
D'autres justificatifs tel qu'un extrait d'immatriculation au Registre du Commerce et des Sociétés (Kbis), un exemplaire des statuts, etc…, sont susceptibles de vous être demandés. +
Après étude de la demande par votre banque et sous réserve d'accord, le dossier est transmis à la Banque de France pour l'attribution du numéro. +
Le Numéro National d’Émetteur se compose de 6 chiffres et est attribué sans limite de temps. +
*Attention !* : Si votre entreprise se compose de plusieurs entités juridiques, une demande par entité est nécessaire. +
Puis sélectionnez dans la liste déroulante le compte bancaire recevant les prélèvements. +
Cliquez sur le bouton « _Enregistrer _».

=== 10.2. Banques/Caisses

==== 10.2.1. Créer un nouveau compte financier

Dans le menu de gauche, sous sous l’intitulé _Banques/Caisses_, choisissez le lien _Nouveau compte_. Renseignez le champ référence (un numéro ou un raccourci du libellé du compte ou caisse). Pour le champ _libellé du compte_ ou _caisse_ on mettra généralement le nom de la banque pour un compte bancaire. Choisissez dans la liste déroulante le type de compte +
(compte bancaire Épargne/placement, compte bancaire courant ou carte, compte caisse/liquide). Choisissez la devise. L’état du compte (ouvert ou fermé). Choisissez votre pays pour lequel le compte est ouvert. Le code compta inclus dans le plan comptable français :

Compte 550 - +
1. Compte analytique 550/1 - Compte bancaire à la banque Xxxx +
2. Compte analytique 550/2 - Compte bancaire à la banque Yyyy

L’adresse web de votre banque en ligne. +
Le solde initial de votre compte à une date donnée. +
Le solde minimum autorisé et/ou désiré. +
Une fois tous les détails renseignés, cliquez sur « _Créer compte_ ». +
Votre compte apparaît maintenant sous le titre « _Comptes bancaires_ », +
dans la colonne de gauche. Cliquez sur l’intitulé du compte, choisissez l’onglet «_ Numéro Compte_ » et cliquez sur « _Modifier_ » (en bas à droite) pour remplir les détails RIB.

==== 10.2.2. Créer une rubrique compte/caisse

Vous pouvez regrouper sous le nom d’une rubrique des dépenses communes, exemple       « _compte essence _» pour suivre tous vos passages à la pompe. Pour cela renseignez un libellé dans le champ disponible, et cliquez sur « _ajouter_ »

==== 10.2.3. Créer un virement bancaire

En saisissant un virement d'un de vos comptes bancaires vers un autre, *Dolibarr *créé deux écritures comptables, une de débit dans un compte et l'autre de crédit du même montant dans l'autre compte. Le même libellé de transaction, et la même date, sont utilisés pour les 2 écritures. +
Par exemple, l’association *Dolibarr *possède deux comptes, un compte Paypal pour les règlements en ligne (soit des ventes sur Dolistore, soit des dons ou cotisations), et un compte bancaire Caisse d’Epargne. Régulièrement nous devons faire des virements du compte Paypal vers le compte Caisse d’Epargne, une seule écriture est alors nécessaire pour laisser une trace dans les deux comptes.

==== 10.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
BANK_DISABLE_DIRECT_INPUT = Permet d'empêcher le mauvais utilisateur d'ajouter une ligne d'écriture en direct dans le compte. +
BANK_CAN_RECONCILIATE_CASHACCOUNT (3.8) => Permet de rapprocher les comptes de trésorerie. +
BANK_DISABLE_CHECK_DEPOSIT => Permet de désactiver la fonction de dépôt de chèque.

=== 10.3. Remises de chèques

==== 10.3.1. Créer un nouveau dépôt

Dans le menu de gauche, sous l’intitulé _Remises de chèques_, choisissez le lien _Nouveau dépôt_.

Cliquez sur le nombre de chèques à déposer (ici 79) Sélectionner/filtrer les chèques à inclure dans le bordereau de remise et cliquer sur “Créer bordereau de dépôt sur compte : votre compte”.



Maintenant validez le bordereau de remise de chèques. Une pop-up affichera la formule : “_Êtes-vous sûr de vouloir valider ce bordereau, aucune modification n'est possible une fois le bordereau validé ?_”

==== 10.3.2. Modifier un dépôt

La seule modification possible se situe sur la date de la remise. La solution radicale étant de supprimer le dépôt et de recommencer la création d’un nouveau dépôt ( l’ensemble des chèques de la remise supprimée réapparaît dans la liste des chèques à traiter).

==== 10.3.3. Supprimer un dépôt

Cliquez sur le bouton «_ Supprimer _» et répondez par oui à l’invite suivante « _Êtes-vous sûr de vouloir supprimer ce bordereau ? _»

==== 10.3.4. Options cachées

BANK_DISABLE_CHECK_DEPOSIT pour désactiver la fonctionnalité de dépôt de chèque.

=== 10.4. Prélèvements

==== 10.4.1. Créer un nouveau prélèvement

Cela nécessite tout d’abord que la configuration du module _Prélèvement _soit correcte



Dans le menu de gauche cliquez sur _Prélèvements>Nouveau Prélèvement._ La réalisation d’un nouveau prélèvement nécessite l’existence de facture préétablies, avec comme mode de règlement le prélèvement. Vérifiez que les factures sont sur des sociétés dont le BAN(RIB) est correctement renseigné. +
A partir des écrans, vous faites une demande de prélèvement bancaire des factures en attente de paiement de votre choix. Puis à partir des écrans ou d'un script, vous générez le fichier texte des prélèvements et créez automatiquement le paiement dans *Dolibarr*.



Cliquez sur l'onglet Prélèvements de la facture dont le mode de règlement est configuré à Prélèvement. +
Cet onglet vous permet de demander à passer le paiement prélèvement. Une fois la demande faite, allez dans le menu par la Banque -> Virements pour générer l'ordre de prélèvement. Lorsque l'ordre de prélèvement est clos, le paiement sur la facture sera automatiquement enregistrée, et la facture fermée si le reste à payer est nul.

Puis cliquez sur Faire une demande de prélèvement. Vous pouvez maintenant retrouver votre facture en attente dans l'espace prélèvements  +
( _Banques/Caisses>Prélèvements>Nouveau prélèvement_ ) +
Cliquez sur le bouton _Prélever tout_. Le lien vers la fiche du prélèvement est dès lors listée en bas de page.

La référence est un lien cliquable, celui ci s'ouvre sur l'onglet fiche du bon de prélèvement. L'état de ce dernier est encore « _en attente_ ». L'onglet «_ Lignes_ » affiche la liste des prélèvements. Si suite à une erreur vous désirez supprimer une ligne de prélèvement, ce n'est pas possible de le faire de façon individuelle, il vous faudra revenir sur l'onglet « _Fiche_ » et cliquer sur le bouton « _Supprimer _», ce qui supprime la totalité du bon. Les factures à prélever sont alors de nouveau disponibles sur l'accueil du module.



Pour faire évoluer l'état du bon de prélèvement, cliquez sur le bouton +
« _Mettre statut 'Fichier envoyé' _»

















== 11. Projets































=== 11.1. Introduction


Le module Projets permet de définir des listes de tâches. Il regroupe par ailleurs ensemble des éléments de *Dolibarr *tels que des propositions commerciales, des commandes ou des factures.

*Définition* +
Une tâche a les caractéristiques suivantes :

* Un libellé.
* Une description.
* Une date de début.
* Une date de fin ou une durée, mais l'une ou l'autre et pas les deux.
* Un pourcentage d'état d'avancement.
* Une priorité.
* Un statut (en cours, confirmé ou annulé).

*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Vous trouverez ce dernier dans la famille Projets/Travail collaboratif. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :

*Modèles de numérotation des références projets* +
Choisissez ici le modèle de numérotation des références de vos projets +
Choisir le modèle _Simple_ : +
Renvoie le numéro sous la forme PJyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
Choisir le modèle _Universal _: +
Renvoie un numéro personnalisable selon un masque à définir.

*Modèles de numérotation des références tâches* +
Choisissez ici le modèle de numérotation des références de vos tâches +
Choisir le modèle _Simple_ : +
Renvoie le numéro sous la forme TKyymm-nnnn où yy est l'année, mm le mois et nnnn un compteur séquentiel sans rupture et sans remise à 0. +
Choisir le modèle _Universal_ : +
Renvoie un numéro personnalisable selon un masque à définir.

*Modèles de document de rapport projets* +
Puis choisissez votre modèle de documents pour afficher vos rapports de +
projets en cliquant sur le bouton d’activation qui doit passer au vert. +
Tous les modèles activés apparaîtront dans la liste déroulante lors de la +
création d’un projet. Vous pouvez choisir un modèle par défaut.

*Sous l'onglet Attributs supplémentaires (projets)* +
Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les projets. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)).


Prenons l'exemple de l'ajout d'un attribut supplémentaire Liste issue d'une table nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Matériel utilisé_, un code de l'attribut : _matremp_ , un type : _Liste issue d'une table_, une valeur : nous avons choisi _la table product_, le champ libellé (de la table product) et le champ label (de la table product), nous enregistrons. Mainte- +
nant si nous créons un nouveau projet, nous retrouvons la liste déroulante des produits dans la fiche.


*Sous l'onglet Attributs supplémentaires (tâches)* +
Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les projets. La liste de Type s'est fortement enrichie depuis *Dolibarr 3.3* (Chaîne, texte long, numérique, décimal, date, date et heure, Booléen (Case à cocher), Prix, Téléphone, Email, Liste de sélection, Liste issue d'une table, Séparateur de champ, Case à cocher, Bouton radio).

=== 11.2. Projets

==== 11.2.1. Créer un nouveau projet

Sous le chapeau _Mes projets_ ou _Projets_ cliquez sur le lien _Nouveau projet_ . +
Un projet peut être privé ou public. Les projets publics (et leurs tâches) peuvent être lus/édités par toute personne qui a les permissions Projet. Les projets privés (et leurs tâches) ne peuvent être lus/édités que par les utilisateurs qui ont les permissions Projet et qui en plus sont définis comme contact du projet, ainsi que par le créateur du projet (Si tous les contacts du projet sont retirés, il faut conserver au moins un utilisateur apte à éditer le projet, ne serait-ce que pour ajouter des contacts. C'est le créateur).

* Le champ référence s’incrémente automatiquement en fonction du modèle de numérotation des références de vos projets.
* Renseignez le champ Libellé.
* Pour le champs Tiers : si des objets (facture, commande, ...), appartenant à un autre tiers que celui choisi, doivent être liés au projet à créer, laissez vide afin de laisser le projet multi-tiers.
* Choisissez le mode de visibilité ( uniquement contacts du projet, ou bien tout le monde).
* Renseignez une date de début,
* Éventuellement une date de fin, et une description.
* Rendez vous sur l'onglet « _Contacts projet_ » pour choisir un contact utilisateur et un ou des contacts tiers associés au projet.
* Rendez vous ensuite sur l'onglet « _Objets associés_ » pour lier des propositions commerciales, des commandes ou des factures au projet.
==== 11.2.2. Supprimer un projet

Rendez vous sur la fiche du projet à supprimer, et cliquez sur le bouton « _Supprimer _», en fonction de l’état d’avancement du projet le message qui va s’afficher pourra être : «_ Êtes-vous sûr de vouloir supprimer ce projet ? Cette opération détruira également les tâches du projet (xxtâches actuellement) et le suivi des consommés._ »

=== 10.3. Tâches/activités

==== 10.3.1. Créer une nouvelle tâche

Sous le chapeau _Mes tâches/activités_ ou _tâches/activités_ cliquez sur le lien _Nouvelle tâche_. La création d’une tâche peut aussi se faire via le bouton « _Créer Tâche_  » depuis l’onglet « _Tâches_  » d’un projet. +
On ne peut créer une tâche que sur un projet partagé (sans responsable attitré) ou sur un projet dont on est le responsable. +
Une tâche peut être créée sous le projet ou sous une autre tâche du projet. +
Affectez le projet à un de vos utilisateurs. Donnez une date de début, éventuellement une date de fin. Prévoyez la charge de travail. Cliquez sur le bouton « _Ajouter_  ». Votre tâche est maintenant fonctionnelle.



Si maintenant vous cliquez sur la référence ou bien le libellé de la tâche, un nouveau bloc avec onglets apparaît sous le bloc Projet. L'onglet « _Temps consommé _ » vous permettra de gérer le temps consommé par l'utilisateur affecté à cette tâche.

==== 11.3.2. Nouveau temps consommé

Sous le chapeau _Mes tâches/activités_ ou _tâches/activités_ cliquez sur le lien _Nouveau consommé_. La création d’un nouveau consommé peut aussi se faire via le bouton « _Ajouter_ » depuis l’onglet « _Temps consommé_ » d’une tâche. Affectez une ressource ( contact projet), à une date donnée, avec une note et une durée, et cliquez sur « _Ajouter_ ». Le temps consommé s’additionne avec un éventuel consommé existant.

==== 11.3.3. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes:

PROJECT_CAN_ALWAYS_LINK_TO_ALL_SUPPLIERS => Permet d’activer la liaison d'un projet à tout fournisseur même lorsque vous utilisez la fonctionnalité de lien tiers. Remarque: Réglé à 1 par défaut à partir de 3.7. +
PROJECT_TIME_ON_ALL_TASKS_MY_PROJECTS =>Peut ajouter du temps à des tâches, même si je ne suis pas assigné à une tâche (cependant, la tâche doit être un projet dont je suis un contact).

PROJECT_SHOW_REF_INTO_LISTS =>Ajout d'une colonne avec la référence du projet dans la liste (avec la version 3.7 la liste des factures du fournisseur seulement, sera étendue à d'autres listes).

PROJECT_HIDE_UNSELECTABLES =>Masquer dans la liste de sélection, tous les projets que nous ne pouvons pas sélectionner (fermé ou brouillon).

PROJECT_HIDE_TASKS => Masquer les tâches. Pour un utilisateur utilisant un projet uniquement en tant que clé analytique et n'utilisant pas de tâches.

PROJECT_LIST_SHOW_STARTDATE => Affiche la date de début des projets dans les listes de projets.

PROJECT_LINK_ON_OVERWIEW_DISABLED (4.0) =>Cacher le formulaire “lien vers” sur la page de vue d'ensemble.

PROJECT_CREATE_ON_OVERVIEW_DISABLED (4.0) => Cacher le bouton “créer …” sur la page d'aperçu.

PROJECT_ALLOW_TO_LINK_FROM_OTHER_COMPANY => Peut lier un objet à un projet d'un autre tiers.

PROJECT_ALLOW_COMMENT_ON_TASK => Ajouter une fonction de commentaire sur la tâche du projet.




== 12. Gestion des Ressources Humaines






=== 12.1. Introduction

L’onglet _GRH_ regroupe les modules

* Congés : Déclaration et suivi des congés des employés.
* Notes de frais et déplacements : Gestion des notes de frais et déplacements.

*Configuration*

Ces modules sont livrés en standard avec la distribution de *Dolibarr*, aussi ils sont déjà installés.

* Vous trouverez le module _congés_ dans la famille _Ressources humaines_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique.
*Réglages principaux des congés* +
Délai pour faire une demande de congés avant ceux-ci ( renseigner une valeur en jours ) +
Prévenir le validateur si la demande de congés ne respecte pas le délai prévu ( case à cocher). +
Prévenir le validateur si l'utilisateur demande des congés dépassant son solde ( case à cocher). +
Nombre de congés payés ajoutés chaque mois ( incrémentation de 2.08334 jours tous les mois pour ce qui nous concerne ). +
Nombre de congés payés à déduire par jour de congé pris ( valeur en jour ). +
Dernière mise à jour automatique des congés ( la dernière date s’affiche automatiquement ).

*Réglages des congés liés à des événements* +
Créer un congé exceptionnel : Renseignez le nom de l’événement ( exemple : mariage ) et faite correspondre un nombre de jours pour cet événement.

* Vous trouverez le module _Notes de frais et déplacements_ dans la famille _Ressources humaines_. Le pictogramme d'état doit être vert pour signifier son activation. Il n’y a pas de paramétrage spécifique.
=== 12.2. Congés

==== 12.2.1. Créer une nouvelle demande

Dans le menu de gauche, sous l’intitulé _Congés_, choisissez le lien _Nouvelle demande _pour afficher la fiche _Nouvelle demande. _En entête de fiche vous trouverez la phrase «_ Les demandes de congés doivent être faites au moins _*_31 jours_*_ avant la date de ceux-ci._ » ( fonction du nombre de jours que vous avez renseigné dans la partie administration ). +
Renseignez l’_utilisateur_ bénéficiaire, _Date Début (Premier jour de congés), Date Fin (Dernier jour de congés), _dans la liste déroulante _Sera approuvé par: _sélectionnez l’utilisateur chargé de valider cette demande, vous pouvez fournir une description et finalement cliquez sur _Envoyer la demande de congés._



Une fois validée, la demande est dans l’état _En attente d'approbation_. L’administrateur chargé de gérer les demandes cliquera alors soit sur _Approuver_ soit sur _Refuser_.


Rendez vous dans http://compta.aflac.fr/user/home.php?leftmenu=users[_Utilisateurs & Groupes]___ __sur la fiche d’un utilisateur, vous y remarquerez la présence d’un onglet _Congés _reprenant les demandes et le solde de congés de l’utilisateur.





==== 12.2.2. Modifier une demande

Le bouton Modifier permet d’éditer la demande de congés. Vous pourrez alors rectifier les _Date Début (Premier jour de congés), Date Fin (Dernier jour de congés), _la _description, _et l’_approbateur_.

==== 12.2.3. Supprimer une demande

Une demande une fois validée ne peut pas être supprimée, elle peut seulement être annulée

=== 11.3. Notes de frais

==== 12.3.1. Créer une note de frais

Dans le menu de gauche, sous l’intitulé _Note de frais_, choisissez le lien _Nouveau_ pour +
afficher la fiche _Nouvelle note de frais_. Choisissez un type de frais dans la liste déroulante, l’utilisateur concerné, la date de la dépense, le kilométrage s’il s’agit d’un +
déplacement ou bien le montant de la dépense dans les autres cas, et pour terminer le +
tiers auquel on peut rattacher la dépense. La note de frais peut par ailleurs être rattachée à un projet.

==== 12.3.2. Modifier une note de frais

Le bouton Modifier permet d’éditer la note de frais. Tous les champs renseignés lors de la création de la fiche sont accessibles pour une éventuelle correction.

==== 11.3.3. Supprimer une note de frais

Classiquement en cliquant sur le bouton supprimer. *Attention !* si le bouton n’est pas +
accessible, vérifiez que vous avez bien reçu les droits pour ce faire dans les permissions +
utilisateurs.

====      12.3.4. Options cachées

EXPENSEREPORT_ALLOW_OVERLAPPING_PERIODS =>On peut entrer plusieurs notes de frais sur des périodes identiques ou se chevauchant.

== 13. Outils





























=== 13.1. Introduction


L’onglet Outils regroupe des outils multi-modules

* *EMailings*
Ce module permet d’envoyer des emails en masse à tout ou partie de vos clients, fournisseurs, prospects, adhérents, utilisateurs…

*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration – Modules_.



Le module se trouve dans l’onglet des Modules principaux, dans la famille _Outils multi-modules_, cliquez sur « _Activer _». Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module: +
La page de configuration vous permet de paramétrer l'adresse Email de l'émetteur (_From_), et l'adresse Email de retour pour récupérer les Emails en erreur (_Errors-to_). Cette dernière est importante à renseigner si vous voulez éviter d'être blacklisté. +
Permettre l'utilisation du tracker d'accusé de lecture et du lien de désinscription : cliquez sur le bouton _on/off_ pour le faire passer au vert. Le champ de la clef de sécurité permettant le cryptage des URL utilisées dans les fonctions d'accusé de lecture et de +
désinscription doit maintenant être renseigné automatiquement. +
L'introduction dans votre mail des constantes de substitution ___CHECK_READ___ et  ___UNSUBSCRIBE___ sont maintenant fonctionnelles.


Si l'envoi des mails est défectueux, rendez vous dans Accueil-Configuration-Emails : +
Cette page permet de remplacer les paramètres PHP en rapport avec l'envoi de mails. Dans la plupart des cas sur des OS comme Unix/Linux, les paramètres PHP sont déjà corrects et cette page est inutile. +
Par défaut c'est la fonction PHP mail qui est utilisée . +
Attention, sur certains systèmes Unix, avec cette méthode d'envoi, pour pouvoir envoyer des mails en votre nom, la configuration d'exécution de sendmail doit contenir l'option *_-ba_* (paramètre http://php.net/manual/fr/migration5.newconf.php[_mail.force_extra_parameters]_ dans le fichier php.ini). Si certains +
de vos destinataires ne reçoivent pas de message, essayez de modifier ce paramètre PHP avec *_mail.force_extra_parameters_* = *_-ba_*.








La fonction d'envoi de mails par la méthode « _PHP mail directe _» génère une requête mail qui peut être mal interprétée par certains serveurs beugués de réception de mail. Cela se traduit par des mails non lisibles chez les personnes hébergées par ces plateformes beuguées. C'est le cas des clients de certains fournisseurs d'accès internet (Ex: Orange). Ce n'est pas un problème ni dans *Dolibarr* ni dans PHP mais sur le serveur de réception. Vous pouvez toutefois ajouter l'option _MAIN_FIX_FOR_BUGGED_MTA_ à 1 dans _configuration - divers_ pour modifier *Dolibarr* afin de compenser le bug. Toutefois ce sont les serveurs respectueux du standard d'envoi de mail qui pourront avoir des problèmes. L'autre solution (recommandée) est d'utiliser la méthode d'envoi _SMTP socket library_ qui n'a aucun de ces inconvénients.

Le clic sur le bouton « _Tester disponibilité serveur_ » devrait indiquer : +
« _Tester disponibilité serveur Serveur disponible à l'adresse _*_ssl://smtp.gmail.com_*_ sur le port _*_465_* »

* *Export de données*

*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration - Modules_. +
Le module se trouve dans l’onglet des _Modules principaux_, dans la famille _Outils multi-modules_, cliquez sur « _Activer _». Le pictogramme d'état doit être vert pour signifier son activation.

* *Import de données*

*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Pour utiliser ce module, il vous faut d'abord l'activer. Pour cela, après s'être connecté avec un compte administrateur, aller sur la page _Accueil - Configuration - Modules_. +
Le module se trouve dans l’onglet des _Modules principaux_, dans la famille _Outils multi-modules_, cliquez sur « _Activer _». Le pictogramme d'état doit être vert pour signifier son activation.

=== 13.2. Emailings

==== 13.2.1. Créer un nouvel Emailing

Les fonctions de mailing sont accessibles depuis le menu « _Outils_ ». Dans le menu de gauche, sous l’intitulé _EMailings_ , choisissez le lien « _Nouvel emailing_ ». Renseignez le champ description ( par exemple : «  _Renouvellement cotisation _»), c’est le titre qui apparaîtra dans la liste des Emailings . Si vous avez configuré les deux adresses emails dans la partie administration du module, les deux champs suivants seront déjà +
renseignés. Saisissez un titre dans le champ « _Sujet du mail_ », remplacez la couleur de fond à l’aide de l’outil Color Picker, si vous désirez personnaliser votre mail. Saisissez le contenu de l'email avec les éventuelles variables de substitution ( ___LASTNAME___ pour le Nom, ___FIRSTNAME___ pour le Prénom etc.), mettez en forme à l’aide de l’outil CKEditor, et cliquez sur le bouton « _Créer emailing_ »


Vous devez ensuite choisir les destinataires, dans des listes prédéfinies, et pour cela, aller sur l'onglet « _Destinataires_ » et cliquer sur les boutons « _Ajouter_ » des listes prédéfinis de destinataires. Dans notre exemple, dans « _Modules de sélection des destinataires_ », nous choisissons la ligne Adhérents, dans la liste déroulante, sélectionnons « _validé (non à jour)_ », Date fin adhésion: Après 01/01/2012 Avant 01/09/2012 et cliquons sur          « _Ajouter_ ».


En revenant sur l'onglet « _Fiche emailing _», vous pouvez alors soit tester votre mailing auprès d’une adresse personnelle en cliquant sur le bouton « _Tester emailing_ », soit directement cliquer sur le bouton « _Valider emailing _», confirmez, et une pop up s’affichera avec le contenu suivant à valider : « _Pour des raisons de sécurité, il est recommandé de faire les envois d’un mailing de masse depuis une ligne de commande. Demandez à votre administrateur de lancer la commande suivante pour envoyer le_ +
_mailing à tous les destinataires :_*_ php ./scripts/emailings/mailing-send.php_*__ __».


*Attention ! *: Seul un mail au statut validé, peut être envoyé en masse.  +
Cliquez maintenant sur « _Envoi emailing_ ». +
Le statut global du mailing, ainsi que de le résultat de l'envoi pour chaque destinataire, sera mis à jour et consultable.

==== 13.2.2. Modifier un Emailing

Il est possible de cloner un Emailing existant, en allant sur la liste des Emailings déjà créés et envoyés. Les références sont des liens cliquables qui renvoient vers les Emailings correspondants qui sont alors réutilisables en cliquant sur le bouton « _Cloner_ ». +
Seuls les Emailings non validés sont encore modifiables. Le clone d’un Emailing peut lui aussi être modifié.

==== 13.2.3. Supprimer un Emailing

Un Emailing peut être supprimé, qu’il soit validé ou non, en cliquant sur le bouton « _Supprimer emailing_ » et après avoir répondu positivement à la demande de confirmation « _Confirmez-vous la suppression du mailing ? _».

==== 13.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante dans _Accueil/Configuration/Divers_. Voici ces constantes : +
_MAILING_LIMIT_SENDBYWEB_ = permet de configurer le nombre de mails à envoyer directement sans passer par l'envoi en ligne de commande.

MAIN_MAIL_DEBUG => Ecrire le contenu avec l'en-tête du dernier courriel dans le fichier dolibarr mail.log dans le répertoire dolibarr_main_data_root.

MAIN_SMS_DEBUG => Ecrire le contenu des SMS envoyés dans le fichier dolibarr_sms.log dans le répertoire dolibarr_main_data_root.

MAIN_MAIL_ALLOW_SENDMAIL_F =>Sur un système Linux ou BSD, la fonction de messagerie PHP utilise la commande sendmail local to server. Dans certains cas, l'e-mail de l'expéditeur doit être fourni sur la ligne de commande de sendmail avec l'option -f. Cette option est là pour demander à Dolibarr d'appeler la fonction mail de PHP en ajoutant une valeur pour l'option -f. Notez que dans la plupart des cas, même avec sendmail, l'email de l'expéditeur est correctement géré car il est ajouté dans l'en-tête technique de l'email. Cette option est ici seulement pour une installation rare de sendmail qui demande l'option -f pour être obligatoire ou pour une configuration sendmail qui n'utilise pas par défaut le Return-path de l'en-tête email pour définir l'expéditeur (avec cette option, le chemin de retour être fourni aussi sur la ligne de commande et non perdu par sendmail).

MAIN_MAIL_SENDMAIL_FORCE_BA =>Sur un système Linux ou BSD, la fonction de messagerie PHP utilise la commande sendmail local to server. Dans certains cas, nous souhaitons que le destinataire soit fourni à sendmail dans le contenu de l'e-mail au lieu de son paramètre de ligne de commande. Pour cela, nous devons ajouter le paramètre -ba à sendmail. Cette option demande à PHP de fournir ce paramètre lors de l'envoi d'un mail. Notez qu'une autre solution consiste à éditer le mail.force_extra_parameters = -ba dans le fichier php.ini.

MAIN_MAIL_NO_FULL_EMAIL => L'e-mail du destinataire et l'expéditeur sont nettoyés pour être sur le formulaire "<email>" au lieu de "Name <email>". Cela pourrait résoudre le problème de la compatibilité avec les expéditeurs d’email très anciens.

MAIN_FIX_FOR_BUGGED_MTA => Certains agents MTA sont buggés et ajoutent des caractères CR chaque fois qu'ils voient un LF. Parce que les e-mails Dolibarr sont prévus pour être nettoyés, si l'agent MTA le fait, vous enverrez un email avec deux caractères CR. Cela peut entraîner l'impossibilité pour le destinataire de lire votre courrier électronique. Pour corriger ceci, ajoutez cette constante à 1. Dolibarr créera alors un email qui n'est pas conforme RFC mais parce que l'agent MTA est buggé, l'email sera modifié et deviendra correct lors de l'envoi, résolvant le problème de mauvais email reçu. Ajoutez cette constante si votre destinataire rencontre des problèmes lors de l'ouverture d'un e-mail, par exemple les utilisateurs utilisant le webmail d'orange.fr ou hotmail.com

MAIN_MAIL_DO_NOT_USE_SIGN => N'ajoutez pas de signature d'utilisateur à la fin de l'e-mail prédéfini suggéré.

MAIL_FORCE_DELIVERY_RECEIPT_INVOICE, MAIL_FORCE_DELIVERY_RECEIPT_ORDER, MAIL_FORCE_DELIVERY_RECEIPT_PROPAL => Forcer la réception de la livraison à “Oui” sur le formulaire pour envoyer un e-mail.

MAIN_EMAIL_USECCC => 1 =Afficher le champ BCC dans les formulaires d'email, Si email = Montrer BCC pré-rempli avec l'email.

MAIN_MAIL_AUTOCOPY_PROPOSAL_TO, MAIN_MAIL_AUTOCOPY_ORDER_TO, MAIN_MAIL_AUTOCOPY_INVOICE_TO => Email à utiliser en tant que destinataire BCC lors de l'envoi d'un e-mail pour une proposition, une commande ou une facture. Vous pouvez rendre cette valeur visible en définissant MAIN_EMAIL_USECCC (à 1 ou à un autre e-mail, voir point précédent).

MAIN_EMAIL_ADD_TRACK_ID =>Lorsque la valeur est 1 (c'est aussi la valeur par défaut si l'option n'est pas définie): L'enregistrement "Message-id" ajouté dans l'en-tête smtp inclut un identifiant de suivi pour définir d'où l'email a été envoyé. Lorsque la valeur est 2: vous envoyez un e-mail à partir de la carte tierce, l'e-mail de l'expéditeur est complété par la chaîne de suivi de la source e-mail "+ thiXXX" (votre e-mail sera envoyé avec le “de” qui est : “myname+thi123@monentreprise.com” ). Ainsi, lorsque l'utilisateur reçoit un e-mail, le message “Réponse” est envoyé à myname@masociété.com, mais avec l'identifiant de suivi inclus (dans l'en-tête ou dans l'e-mail cible), vous permettant ainsi de savoir à quel tiers ou objet relatif à.

L’option MAIN_INFO_SOCIETE_MAIL_ALIASES pour pouvoir utiliser plusieurs identités dans l’origine des emails.

MAIL_MAX_NB_OF_RECIPIENTS_IN_SAME_EMAIL => Restreindre l'envoi d'un e-mail à x destinataires pour le même message (x pour To: + CC: + BCC :). Si non défini, la valeur est 10. Obligatoire pour lutter contre le spam qui inclut 1000 destinataires dans un message. Notez que MAIL_MAX_NB_OF_RECIPIENTS_TO_IN_SAME_EMAIL, MAIL_MAX_NB_OF_RECIPIENTS_CC_IN_SAME_EMAIL et MAIL_MAX_NB_OF_RECIPIENTS_BCC_IN_SAME_EMAIL sont également disponibles.

MAIN_MAIL_FORCE_CONTENT_TYPE_TO_HTML => Forcer l'envoi de tous les e-mails (événement avec contenu textuel uniquement) sous la forme d'un e-mail au format HTML.

MAIN_MAIL_USE_MULTI_PART => Forgez le contenu du courriel en utilisant une autre partie de texte (pour la version 5.0.2+). Par défaut avec 6.0+.

MAIN_MAIL_ADD_INLINE_IMAGES_IF_IN_MEDIAS => Si des images ont été stockées dans le répertoire medias à partir de CKEditor, les images dans les emails sont remplacées par "contenu en ligne". Cela peut augmenter sérieusement le risque d'être détecté comme SPAM.

MAIN_COPY_FILE_IN_EVENT_AUTO => Ajouter un document en pièce jointe sur un événement généré automatiquement en envoyant un courriel depuis dolibarr. (v6.0 +).

MAIN_EXTERNAL_SMTP_CLIENT_IP_ADDRESS => Entrez l'adresse IP publique du serveur, de sorte qu'il apparaîtra dans l'aide sur la page de configuration de la messagerie.

MAIN_MAIL_ENABLED_USER_DEST_SELECT => Afficher également les utilisateurs internes dans la liste des destinataires d'e-mails dans le formulaire d'envoi d'e-mail (v8.0 +).


=== 13.3. Assistant export

==== 13.3.1. Créer un nouvel export


Aller dans le menu _Outils/Assistant export/Nouvel export_.



Choisissez un lot prédéfini de données que vous désirez exporter. +
Pour notre exemple nous choisirons le module « _Tiers_», avec comme données exportables « _(sociétés/institutions/particuliers) et attributs_ », cliquez sur l’icône en bout de ligne pour accéder à l’étape suivante.





Choisissez les champs à exporter, ou choisissez un profil d'export prédéfini. En cliquant sur « _Tout_ » la liste des « _Champs exportables_ » passe dans la colonne des «_ Champs à exporter_ ».







Si vous voulez filtrer sur certaines valeurs, saisissez ces valeurs.






 A l’étape suivante vous pouvez trier l’ordre de la liste des champs à exporter. 



Si vous avez fait des réglages particuliers, pensez à enregistrer ce profil d'export si vous désirez le réutiliser ultérieurement

Maintenant, sélectionnez le format d'export dans la liste déroulante et cliquez sur «_ Générer _» pour fabriquer le fichier export. Les formats existants sont _CSV_ ou _TSV_ (Fichier texte) ou _Exel 2007 ou Exel 95_(Format Excel natif).

==== 13.3.2. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans Accueil/Configuration/Divers. Voici ces constantes : +
_EXPORT_CSV_SEPARATOR_TO_USE_ = Valeur de caractère à prendre comme délimiteur de fichier CSV (par défaut Dolibarr prend ","). +
Exemple : EXPORT_CSV_SEPARATOR_TO_USE=;

_EXPORT_CSV_FORCE_CHARSET_ = Choisit le charset du fichier généré par les exports CSV. Par défaut : UTF-8.  +
Exemple : EXPORT_CSV_FORCE_CHARSET=ISO-8859-1

EXPORTTOOL_CATEGORIES => O peut exporter des catégories (plusieurs lignes) dans une colonne avec le “profil d'exportation de produit”.

USE_STRICT_CSV_RULES => Utilisation du format CSV strict/réel pour l'exportation. Ne nettoit pas/remplace pas CR + LF par '\ n' mais les cite en utilisant le caractère CSV d'échappement (").

=== 13.4. Assistant import

==== 13.4.1. Créer un nouvel import

Aller dans le menu _Outils/Assistant import/Nouvel import_. +
A l’étape 1, choisissez un lot prédéfini de données que vous désirez importer. Nous reprenons notre exemple avec le module _Tiers_, et cliquons sur l’icône « _Nouvel import_ » .



A l'étape 2 nous choisissons le format de fichier que nous voulons importer en cliquant sur le pictogramme de fin de ligne. +
*Astuce !* : Vous pouvez en télécharger un en cliquant sur « _Télécharger un exemple vierge de fichier_ ».


A l’étape 3, choisissez le fichier à importer qui est sur votre ordinateur et cliquez sur ajouter pour l’envoyer sur *Dolibarr*. Nous allons importer le fichier créé au chapitre export. +
Une fois le fichier transféré, cliquez sur le pictogramme en fin de ligne pour passer à l’étape suivante.









A l’étape 4, dans la colonne de gauche se trouvent les champs présents dans le fichier que vous avez soumis. A droite se trouvent les champs présents dans *Dolibarr*. Déplacez les champs de la colonne de gauche en les montant ou descendant par un drag and drop en plaçant votre souris au niveau de la flèche, afin que chaque champ du fichier d’entrée se trouve devant la ligne du champ *Dolibarr*. Si un champ du fichier d’entrée ne doit pas être importé, il faut le déplacer en bas sous la ligne « _Champs du fichier source non importé _».

*Astuce !* : si aucun champs de votre import ne correspond à une ligne de *Dolibarr*, utilisez une ligne « _Aucun champ_ » que vous placerez en face. +
*Astuce !* : en fin de ligne, en passant la souris au dessus du point d'interrogation, vous pouvez avoir des informations sur les valeurs attendues à mettre dans le champ *Dolibarr*, avec contraintes et éventuellement exemples de valeurs.


A l’étape 5, cochez ou décochez la case « _Ne pas importer la première ligne du fichier source_ », puis cliquer sur « _Lancer la simulation de l'import_ ». +
 La simulation va tenter d'insérer en base en annulant les opérations à la fin. Un rapport des erreurs est ensuite affiché. Si il n'y a pas d'erreur, il est possible de cliquer sur «_ Lancer import final _» qui lui +
sera définif. Les données importées sont ajoutées aux données existantes. +
*Attention !* : souvent les erreurs lors de la phase de simulation proviennent de l’importation de la première ligne, si celle ci correspond à l’intitulé des champs. +
*Astuce !* : pensez à rajouter une colonne pays avec comme valeur 1 car l’import ne met pas de pays par défaut. +
*Astuce !* : Toutes les données importées dans *Dolibarr* le sont avec le champ _import_key_ à une valeur qui correspond à la date de l'import. En cas de problème détecté après coup, vous pourrez avec un éditeur SQL retrouver aisément les lignes en question.





==== 13.4.2. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans _Accueil/Configuration/Divers_. Voici ces constantes: +
_IMPORT_CSV_SEPARATOR_TO_USE_ = Valeur de caractère à prendre +
comme délimiteur de fichier CSV (par défaut *Dolibarr* prend ","). +
Exemple: IMPORT_CSV_SEPARATOR_TO_USE=;

_IMPORT_CSV_FORCE_CHARSET_ = Choisit le charset du fichier généré +
par les exports CSV. Par défaut : UTF-8. Exemple : +
IMPORT_CSV_FORCE_CHARSET=ISO-8859-1

=== 13.5. Imprimer code-barres


Avec cet outils, vous pouvez imprimer une planche d'étiquettes de code-barres. Sélectionnez votre format de planche d'étiquettes, le type de code-barres et la valeur du code-barres puis cliquez sur le bouton «__ ___Générer la page à imprimer _».





=== 13.6. Sondage

==== 13.6.1. Nouveau sondage


Vous pouvez créer un nouveau sondage, soit par date, soit standard.

==== 13.6.2. Liste

Liste des sondages déjà réalisés.


== 14. Agenda



































=== 14.1. Introduction


Le module Agenda permet de bénéficier d'un calendrier dans *Dolibarr* et +
de gérer des notions comme des événements ou des rendez-vous.

*Définition* +
*Les événements et rendez-vous (event)* +
Un événement (event en langage normé), est une notion qui caractérise une action instantanée ou de longue durée qui a eu lieu dans le passé ou doit avoir lieu dans le futur. +
Il a les caractéristiques suivantes:

* Un libellé (Dans la norme ical: summary)
* Une description (Dans la norme ical: description)
* Une date de début (Dans la norme ical: dtstart)
* Une date de fin (Dans la norme ical: dtend) ou une durée (Dans la
* norme ical: duration) mais c'est l'une ou l'autre et pas les deux.
* Un lieu, comme un nom de salle par exemple (Dans la norme ical:
* location)
* Une priorité (Dans la norme ical: priority)
* La transparence (dans la norme ical: transp) qui dit si les acteurs
* sont rendus indisponibles par cette tâche.
* Un statut (tentative, confirmé ou annulé), rarement utilisé.
* D'autres informations moins structurantes.

*Exemple d'utilisation* : Cela correspond aux informations que l'on voit dans les calendrier Outlook (onglet Calendrier), Evolution ou Thunderbird/Lightning. On utilise les «_ events _»  pour stocker les rendez-vous par exemple, mais ils peuvent aussi être utilisés pour stocker un travail à faire dans une plage de date donnée. +
Dans *Dolibarr* : Cette notion est gérée par le module _Agenda_. *Dolibarr* y a ajouté la notion de pourcentage d'avancement.




*Configuration* +
Ce module est livré en standard avec la distribution de *Dolibarr*, aussi il est déjà installé. +
Vous trouverez ce dernier dans la famille _Projets/Travail collaboratif_. Le pictogramme d'état doit être vert pour signifier son activation, le pictogramme suivant, en fin de ligne permet d'accéder à la page de paramétrage spécifique du module :



* *Divers*
Paramètres :

* Utilisez les types des événements (administrable dans Configuration -> Dictionnaires -> Liste des types d'événements de l'agenda) : configurez sur on ou off.
* Régler automatiquement ce type d'événement dans le filtre de recherche de la vue agenda : choisissez dans la liste déroulante le type d’événement.
* Réglez automatiquement le statut d'événement dans le filtre de recherche de la vue agenda : exemple : A réaliser, en cours…
* Quel onglet voulez-vous voir ouvrir par défaut quand on choisit le menu Agenda ? : exemple : Vue semaine, vue mois etc…
 

* *Alimentation automatique de l'agenda*
Définissez dans cet onglet les événements pour lesquels *Dolibarr* créera automatiquement une action dans l'agenda. Si aucune case n'est cochée (par défaut), seules les actions manuelles seront incluses dans l'agenda. +
Les événements choisis (création facture, validation commande) sont alors sauvés automatiquement dans le calendrier. Ils symbolisent une action métier qui vient d'être réalisée. Ils sont donc créés au statut réalisé (pourcentage d'avancement = 100%). La durée de ces événements est en général de 0 seconde (date de fin = date de début) .




* *Export calendrier*
Cette page permet de configurer quelques options permettant d'exporter une vue de votre agenda *Dolibarr* vers un calendrier externe (thunderbird, google calendar, ...)


Correction du fuseau horaire : Exemple: +2 (ne remplir que si un décalage d'heure est constaté dans l'export).

Vous pouvez aussi ajouter les paramètres suivants pour filtrer les réponses : +
*logina=admin* pour limiter l'export aux actions dont l'utilisateur *admin* est propriétaire. +
*logint=admin* pour limiter l'export aux actions affectées à l'utilisateur *admin*. +
*project=PROJECT_ID* pour restreindre aux événements associés au projet *PROJECT_ID*.

* *Import calendriers externes*
Cette page permet d'ajouter des sources de calendriers externes pour les visualiser au sein de l'agenda *Dolibarr*.

* *Attributs supplémentaires*
Définissez ici la liste des attributs supplémentaires, non disponibles en standard, et que vous voulez voir gérer sur les Agenda. La liste de Type s'est fortement enrichie +
depuis *Dolibarr 3.3* (Chaîne, texte long, Numérique entier, décimal, date, date et heure, Booléen (Case à cocher unique), Prix, Téléphone, Email, Url, Mot de passe, Liste de sélection, Liste issue d'une table, Bouton radio (choix unique), Cases à cocher, Cases à cocher issues d’une table, lier à un objet, Séparateur (il ne s’agit pas d’un champ de saisi)). +
Prenons l'exemple de l'ajout d'un attribut supplémentaire Liste de sélection, nous renseignons un ordre (qui s'appliquera uniquement sur la liste des attributs supplémentaires), un libellé : _Au choix_, un code de l'attribut : _choix_, un type : _Liste de sélection_, la liste doit être de la forme clef -> valeur : par exemple 1,valeur1..., nous enregistrons.

=== 14.2. Événements

==== 14.2.1. Créer un nouvel événement

Sous Dolibarr, on appelle aussi ces événements, les actions. Il y a les actions automatiques (créées automatiquement par *Dolibarr*) et les actions manuelles (créées explicitement par l'utilisateur). C'est la vocation même du module _Agenda_ que de gérer ce type d'événement. +
Dans le menu latéral gauche, sous le chapeau « _Événement_ », cliquez sur la ligne « _Nouvel événement_ », choisissez un type, (exemple : _Rendez vous_, _appel téléphonique_...). Si la case « _Événement sur la journée_ » est cochée le choix des horaires sera grisé. Renseignez une date de début et de fin. Un État/Pourcentage si applicable. Affectez l'action. Cliquez sur « _ajouter_ ». Votre événement se trouve maintenant dans la liste des événements.

==== 14.2.2. Modifier un événement

Accédez à l'événement que vous désirez modifier par la ligne «_ Liste _» dans le menu latéral gauche sous le chapeau « _Événement _». Choisissez l'événement désiré dans la liste, cliquez sur le lien hypertexte pour ouvrir la fiche de l'événement et cliquez sur le bouton « _Modifier_ ». La fiche est maintenant éditée, et il est possible de changer des éléments.

==== 14.2.3. Supprimer un événement

Accédez à l'événement que vous désirez supprimer par la ligne « _Liste_ » dans le menu latéral gauche sous le chapeau « _Événement _». Choisissez l'événement désiré dans la liste, cliquez sur le lien hypertexte pour ouvrir la fiche de l'événement et cliquez sur le bouton « _Supprimer _». +
Répondez par l'affirmative à la question « _Êtes-vous sûr de vouloir effacer cet événement ? _».

==== 14.2.4. Options cachées

Quelques options non visibles dans l’interface sont disponibles. Dans la plupart des cas, vous n’avez pas besoin de ces fonctions et leur utilisation peut rendre instable l’application. +
Pour les activer il faut définir une constante à 1 dans Accueil/Configuration/Divers. Voici ces constantes : +
AGENDA_MAX_EVENTS_DAY_VIEW => Définit le nombre maximum d'entrées visibles pour chaque jour dans l'agenda. La valeur par défaut est 3. La valeur 0 signifie aucune limite.

AGENDA_USE_EVENT_TYPE =>Ajoute un champ obligatoire "Type" lors de la création d'un événement (obsolète).

AGENDA_AUTOSET_END_DATE_WITH_DELTA_HOURS => Pour définir automatiquement la date de fin de l'événement à la date de commencement + delta sur la page de création d'événement.

MAIN_ADD_EVENT_ON_ELEMENT_CARD => Permet de créer un événement à partir d'un document (proposition, commande, facture).



























== 15. Modules Complémentaires







